{"ast":null,"code":"import _objectSpread from\"C:/Users/PC_User/Desktop/free-crm/bhotch-crm/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo,useCallback,useRef}from'react';import{MapPin,Calendar,Plus,Edit2,Trash2,DollarSign,ClipboardList,AlertCircle,CheckCircle,Clock,Home,Phone,Mail,RefreshCw,X,User,Tag,Briefcase,Search,TrendingUp,MessageSquare,Eye,XCircle,ShieldCheck,Navigation,Users,BarChart3,Activity,Loader2,Map,Filter}from'lucide-react';import{initializeApp}from'firebase/app';import{getAuth,signInWithEmailAndPassword}from'firebase/auth';// Firebase Configuration\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const firebaseConfig={apiKey:\"AIzaSyCa63Fy9PF-NV8C_z_5Qp7VWse5nRxRRJ8\",authDomain:\"crmbackend-470221.firebaseapp.com\",projectId:\"crmbackend-470221\",storageBucket:\"crmbackend-470221.firebasestorage.app\",messagingSenderId:\"874590395925\",appId:\"1:874590395925:web:41fff249ed9a7b349af81c\",measurementId:\"G-4BG7SZMK6K\"};const app=initializeApp(firebaseConfig);const auth=getAuth(app);// Google Maps API Key - IMPORTANT: Replace with your actual key\nconst GOOGLE_MAPS_API_KEY='AIzaSyBe0zlEBVGQB5cNpiPhLH-RGKDvUQDV-zk';// Replace this!\n// Google Sheets Service\nclass GoogleSheetsService{constructor(){this.baseURL='https://script.google.com/macros/s/AKfycbw8r0tVUeFptoP0hdEQONuP8RR5NdYxBjPZwiXPZCLJLwduWAm28K23aVjqwzr4joejtA/exec';}async makeRequest(action,payload){try{const response=await fetch(this.baseURL,{method:'POST',mode:'cors',credentials:'omit',headers:{'Content-Type':'text/plain;charset=utf-8','Accept':'application/json'},body:JSON.stringify(_objectSpread({action},payload))});const text=await response.text();try{return JSON.parse(text);}catch(_unused){console.warn('Could not parse response:',text);return{success:false,message:'Invalid response format'};}}catch(error){console.error('Request error:',error);return{success:false,message:error.message};}}async fetchLeads(){try{const url=\"\".concat(this.baseURL,\"?action=getLeads&cacheBust=\").concat(Date.now());const response=await fetch(url,{method:'GET',mode:'cors',credentials:'omit',headers:{'Accept':'application/json'}});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const text=await response.text();const data=JSON.parse(text);if(data.success===false){throw new Error(data.message||'Failed to fetch leads');}return data.leads||[];}catch(error){console.error('Could not fetch leads:',error);throw error;}}async addLead(lead){return this.makeRequest('addLead',{lead});}async updateLead(lead){return this.makeRequest('updateLead',{lead});}async deleteLead(leadId){return this.makeRequest('deleteLead',{leadId});}async geocodeAddress(address){return this.makeRequest('geocodeLead',{address});}}const googleSheetsService=new GoogleSheetsService();// Login Component\nfunction LoginForm(_ref){let{onLogin}=_ref;const[credentials,setCredentials]=useState({email:'',password:''});const[error,setError]=useState('');const[loading,setLoading]=useState(false);const handleSubmit=async()=>{if(!credentials.email||!credentials.password){setError('Please enter email and password');return;}setLoading(true);setError('');try{await signInWithEmailAndPassword(auth,credentials.email,credentials.password);sessionStorage.setItem('isAuthenticated','true');onLogin(true);}catch(error){setError('Invalid email or password');}finally{setLoading(false);}};const handleKeyPress=e=>{if(e.key==='Enter'){handleSubmit();}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-lg shadow-xl w-96\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(Home,{className:\"h-10 w-10 text-blue-600\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:\"Bhotch CRM\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm mt-2\",children:\"Sign in to manage your leads\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 bg-red-50 border border-red-200 text-red-600 rounded-lg text-sm\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:credentials.email,onChange:e=>setCredentials(_objectSpread(_objectSpread({},credentials),{},{email:e.target.value})),onKeyPress:handleKeyPress,className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:credentials.password,onChange:e=>setCredentials(_objectSpread(_objectSpread({},credentials),{},{password:e.target.value})),onKeyPress:handleKeyPress,className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:loading,className:\"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader2,{className:\"animate-spin h-5 w-5 mr-2\"}),\"Signing in...\"]}):'Sign In'})]})]})});}// Interactive Map Component\nfunction InteractiveMapView(_ref2){let{leads}=_ref2;const[selectedLead,setSelectedLead]=useState(null);const[mapLoaded,setMapLoaded]=useState(false);const[mapError,setMapError]=useState(null);const mapRef=useRef(null);const mapInstanceRef=useRef(null);const markersRef=useRef([]);const infoWindowRef=useRef(null);// Initialize Google Maps\nuseEffect(()=>{const initMap=()=>{if(!window.google||!mapRef.current)return;const mapOptions={zoom:11,center:{lat:39.7392,lng:-104.9903},// Denver, CO\nmapTypeId:'roadmap',mapTypeControl:true,streetViewControl:true,fullscreenControl:true,zoomControl:true};mapInstanceRef.current=new window.google.maps.Map(mapRef.current,mapOptions);infoWindowRef.current=new window.google.maps.InfoWindow();};if(!window.google&&!mapLoaded){const script=document.createElement('script');script.src=\"https://maps.googleapis.com/maps/api/js?key=\".concat(GOOGLE_MAPS_API_KEY,\"&libraries=places\");script.async=true;script.defer=true;script.onload=()=>{setMapLoaded(true);initMap();};script.onerror=()=>{setMapError('Failed to load Google Maps. Please check your API key.');};document.head.appendChild(script);}else if(window.google&&!mapInstanceRef.current){setMapLoaded(true);initMap();}},[]);// Run only once on mount\n// Update markers when leads change or map loads\nuseEffect(()=>{if(!mapInstanceRef.current||!leads.length)return;// Clear existing markers\nmarkersRef.current.forEach(marker=>marker.setMap(null));markersRef.current=[];const bounds=new window.google.maps.LatLngBounds();let hasValidMarkers=false;leads.forEach(lead=>{if(lead.latitude&&lead.longitude){const lat=parseFloat(lead.latitude);const lng=parseFloat(lead.longitude);if(!isNaN(lat)&&!isNaN(lng)){const position={lat,lng};const marker=new window.google.maps.Marker({position,map:mapInstanceRef.current,title:lead.customerName,icon:{url:'http://maps.google.com/mapfiles/ms/icons/red-dot.png',scaledSize:new window.google.maps.Size(40,40)},animation:window.google.maps.Animation.DROP});// Info window content\nconst contentString=\"\\n            <div style=\\\"padding: 12px; max-width: 350px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\\\">\\n              <h3 style=\\\"margin: 0 0 8px 0; color: #1f2937; font-size: 18px; font-weight: 600;\\\">\\n                \".concat(lead.customerName,\"\\n              </h3>\\n              <div style=\\\"space-y: 6px;\\\">\\n                <p style=\\\"margin: 4px 0; color: #4b5563; font-size: 14px;\\\">\\n                  <strong>\\uD83D\\uDCCD Address:</strong> \").concat(lead.address||'N/A',\"\\n                </p>\\n                <p style=\\\"margin: 4px 0; color: #4b5563; font-size: 14px;\\\">\\n                  <strong>\\uD83D\\uDCDE Phone:</strong> \").concat(lead.phoneNumber||'N/A',\"\\n                </p>\\n                <p style=\\\"margin: 4px 0; color: #4b5563; font-size: 14px;\\\">\\n                  <strong>\\u2709\\uFE0F Email:</strong> \").concat(lead.email||'N/A',\"\\n                </p>\\n                <p style=\\\"margin: 4px 0; color: #4b5563; font-size: 14px;\\\">\\n                  <strong>\\uD83C\\uDFF7\\uFE0F Status:</strong> \\n                  <span style=\\\"padding: 2px 8px; border-radius: 4px; font-size: 12px; font-weight: 500; background: \").concat(lead.quality==='Hot'?'#fee2e2':lead.quality==='Warm'?'#fef3c7':'#f3f4f6',\"; color: \").concat(lead.quality==='Hot'?'#dc2626':lead.quality==='Warm'?'#d97706':'#6b7280',\";\\\">\\n                    \").concat(lead.quality||'Cold',\"\\n                  </span>\\n                </p>\\n                \").concat(lead.leadSource?\"<p style=\\\"margin: 4px 0; color: #4b5563; font-size: 14px;\\\">\\n                    <strong>\\uD83D\\uDCCC Source:</strong> \".concat(lead.leadSource,\"\\n                  </p>\"):'',\"\\n                \").concat(lead.dabellaQuote?\"<p style=\\\"margin: 4px 0; color: #059669; font-size: 14px;\\\">\\n                    <strong>\\uD83D\\uDCB0 Quote:</strong> \".concat(parseFloat(lead.dabellaQuote).toLocaleString(),\"\\n                  </p>\"):'',\"\\n                \").concat(lead.notes?\"<p style=\\\"margin: 8px 0 0 0; padding-top: 8px; border-top: 1px solid #e5e7eb; color: #6b7280; font-size: 13px;\\\">\\n                    <strong>Notes:</strong> \".concat(lead.notes.substring(0,100)).concat(lead.notes.length>100?'...':'',\"\\n                  </p>\"):'',\"\\n              </div>\\n            </div>\\n          \");marker.addListener('click',()=>{infoWindowRef.current.setContent(contentString);infoWindowRef.current.open(mapInstanceRef.current,marker);setSelectedLead(lead);// Zoom to marker\nmapInstanceRef.current.setZoom(15);mapInstanceRef.current.setCenter(marker.getPosition());});markersRef.current.push(marker);bounds.extend(position);hasValidMarkers=true;}}});// Fit map to show all markers\nif(hasValidMarkers){mapInstanceRef.current.fitBounds(bounds);// Don't zoom in too much for single marker\nconst listener=window.google.maps.event.addListener(mapInstanceRef.current,\"idle\",function(){if(mapInstanceRef.current.getZoom()>16){mapInstanceRef.current.setZoom(16);}window.google.maps.event.removeListener(listener);});}},[leads,mapLoaded,setSelectedLead]);// Include all dependencies\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"h-full flex bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 relative\",children:[/*#__PURE__*/_jsx(\"div\",{ref:mapRef,className:\"w-full h-full\"}),!mapLoaded&&!mapError&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"animate-spin h-12 w-12 text-blue-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Loading map...\"})]})}),mapError&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center max-w-md\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-12 w-12 text-red-500 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-800 font-semibold mb-2\",children:\"Map Loading Error\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:mapError})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-4 left-4 bg-white rounded-lg shadow-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-800\",children:leads.filter(l=>l.latitude&&l.longitude).length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Mapped Leads\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-red-600\",children:leads.filter(l=>l.quality==='Hot').length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Hot Leads\"})]})]})})]}),selectedLead&&/*#__PURE__*/_jsx(\"div\",{className:\"w-96 bg-white shadow-xl overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800\",children:selectedLead.customerName}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedLead(null),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{size:20})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-semibold text-gray-700 mb-2\",children:\"Contact Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCCD Address:\"}),\" \",selectedLead.address]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCDE Phone:\"}),\" \",selectedLead.phoneNumber||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u2709\\uFE0F Email:\"}),\" \",selectedLead.email||'N/A']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-semibold text-gray-700 mb-2\",children:\"Lead Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Quality:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 px-2 py-1 rounded text-xs font-medium \".concat(selectedLead.quality==='Hot'?'bg-red-100 text-red-800':selectedLead.quality==='Warm'?'bg-yellow-100 text-yellow-800':'bg-gray-100 text-gray-800'),children:selectedLead.quality})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Source:\"}),\" \",selectedLead.leadSource||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",selectedLead.leadStatus||'New']}),selectedLead.dabellaQuote&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-green-600 font-semibold\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Quote:\"}),\" $\",parseFloat(selectedLead.dabellaQuote).toLocaleString()]})]})]}),selectedLead.notes&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-semibold text-gray-700 mb-2\",children:\"Notes\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:selectedLead.notes})]})]})]})})]});}// Calendar View Component\nfunction CalendarView(){return/*#__PURE__*/_jsxs(\"div\",{className:\"h-full bg-white\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:\"Calendar\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"View and manage your appointments\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(Plus,{size:20,className:\"inline mr-1\"}),\" Add Event\"]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6 h-[calc(100%-100px)]\",children:/*#__PURE__*/_jsx(\"iframe\",{src:\"https://calendar.google.com/calendar/embed?height=600&wkst=1&ctz=America%2FDenver&showPrint=0&title=Bhotch%20Appointment&src=YnJhbmRvbkByaW1laHEubmV0&src=YnJhbmRvbi5ob3RjaGtpc3NAZ21haWwuY29t&color=%23addf00&color=%233f51b5\",style:{border:'1px solid #e5e7eb',borderRadius:'8px'},width:\"100%\",height:\"100%\",frameBorder:\"0\",scrolling:\"no\",title:\"Google Calendar\"})})]});}// Dashboard Component\nfunction Dashboard(_ref3){let{leads}=_ref3;const stats=useMemo(()=>{const total=leads.length;const hot=leads.filter(l=>l.quality==='Hot').length;const warm=leads.filter(l=>l.quality==='Warm').length;const cold=leads.filter(l=>l.quality==='Cold').length;const quoted=leads.filter(l=>l.dabellaQuote&&parseFloat(l.dabellaQuote)>0).length;const totalQuoteValue=leads.reduce((sum,l)=>sum+(parseFloat(l.dabellaQuote)||0),0);const mapped=leads.filter(l=>l.latitude&&l.longitude).length;return{total,hot,warm,cold,quoted,totalQuoteValue,mapped};},[leads]);const recentLeads=useMemo(()=>{return[...leads].sort((a,b)=>new Date(b.createdDate||0)-new Date(a.createdDate||0)).slice(0,5);},[leads]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-gray-50 min-h-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"Welcome back! Here's your lead overview.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Total Leads\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900 mt-1\",children:stats.total})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-100 p-3 rounded-lg\",children:/*#__PURE__*/_jsx(Users,{className:\"h-7 w-7 text-blue-600\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Hot Leads\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-red-600 mt-1\",children:stats.hot})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 p-3 rounded-lg\",children:/*#__PURE__*/_jsx(Activity,{className:\"h-7 w-7 text-red-600\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Quoted Leads\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-green-600 mt-1\",children:stats.quoted})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-100 p-3 rounded-lg\",children:/*#__PURE__*/_jsx(BarChart3,{className:\"h-7 w-7 text-green-600\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Total Quote Value\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-indigo-600 mt-1\",children:[\"$\",stats.totalQuoteValue.toLocaleString()]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-indigo-100 p-3 rounded-lg\",children:/*#__PURE__*/_jsx(DollarSign,{className:\"h-7 w-7 text-indigo-600\"})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4 text-gray-800\",children:\"Lead Distribution\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-red-500 rounded-full mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Hot Leads\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold text-gray-900\",children:stats.hot})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-yellow-500 rounded-full mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Warm Leads\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold text-gray-900\",children:stats.warm})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-gray-400 rounded-full mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Cold Leads\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold text-gray-900\",children:stats.cold})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between pt-4 border-t\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 text-blue-600 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Mapped Leads\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold text-gray-900\",children:stats.mapped})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4 text-gray-800\",children:\"Recent Activity\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[recentLeads.map(lead=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:lead.customerName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 truncate\",children:lead.address})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-medium \".concat(lead.quality==='Hot'?'bg-red-100 text-red-800':lead.quality==='Warm'?'bg-yellow-100 text-yellow-800':'bg-gray-100 text-gray-800'),children:lead.quality||'Cold'})]},lead.id)),recentLeads.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500 py-4\",children:\"No recent leads\"})]})]})]})]});}// Lead Form Component\nfunction LeadForm(_ref4){let{lead,onSubmit,onCancel}=_ref4;const[formData,setFormData]=useState({customerName:(lead===null||lead===void 0?void 0:lead.customerName)||'',address:(lead===null||lead===void 0?void 0:lead.address)||'',phoneNumber:(lead===null||lead===void 0?void 0:lead.phoneNumber)||'',email:(lead===null||lead===void 0?void 0:lead.email)||'',quality:(lead===null||lead===void 0?void 0:lead.quality)||'Cold',leadSource:(lead===null||lead===void 0?void 0:lead.leadSource)||'Door to Door',disposition:(lead===null||lead===void 0?void 0:lead.disposition)||'',dabellaQuote:(lead===null||lead===void 0?void 0:lead.dabellaQuote)||'',roofType:(lead===null||lead===void 0?void 0:lead.roofType)||'',roofAge:(lead===null||lead===void 0?void 0:lead.roofAge)||'',inspectionStatus:(lead===null||lead===void 0?void 0:lead.inspectionStatus)||'',notes:(lead===null||lead===void 0?void 0:lead.notes)||'',followupDate:(lead===null||lead===void 0?void 0:lead.followupDate)||'',appointmentDate:(lead===null||lead===void 0?void 0:lead.appointmentDate)||'',leadStatus:(lead===null||lead===void 0?void 0:lead.leadStatus)||'New'});const handleSubmit=()=>{if(!formData.customerName||!formData.address){alert('Please fill in required fields (Name and Address)');return;}onSubmit(_objectSpread(_objectSpread({},lead),formData));};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:lead?'Edit Lead':'Add New Lead'}),/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"text-gray-400 hover:text-gray-600 transition-colors\",children:/*#__PURE__*/_jsx(X,{size:24})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Customer Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.customerName,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{customerName:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"John Doe\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Address *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.address,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{address:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"123 Main St, Denver, CO\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:formData.phoneNumber,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{phoneNumber:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"(555) 123-4567\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:formData.email,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{email:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"john@example.com\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Lead Quality\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.quality,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{quality:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Cold\",children:\"Cold\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Warm\",children:\"Warm\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Hot\",children:\"Hot\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Lead Source\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.leadSource,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{leadSource:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Door to Door\",children:\"Door to Door\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Referral\",children:\"Referral\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Online\",children:\"Online\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Phone\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Social Media\",children:\"Social Media\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Quote Amount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:formData.dabellaQuote,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{dabellaQuote:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"15000\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Lead Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.leadStatus,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{leadStatus:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"New\",children:\"New\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Contacted\",children:\"Contacted\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Qualified\",children:\"Qualified\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Quoted\",children:\"Quoted\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Closed Won\",children:\"Closed Won\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Closed Lost\",children:\"Closed Lost\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Roof Type\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.roofType,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{roofType:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"Asphalt Shingle\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Roof Age\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.roofAge,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{roofAge:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"10 years\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Inspection Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.inspectionStatus,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{inspectionStatus:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Not Scheduled\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Scheduled\",children:\"Scheduled\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Completed\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pending\",children:\"Pending\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Follow-up Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:formData.followupDate,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{followupDate:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Notes\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.notes,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{notes:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",rows:\"4\",placeholder:\"Add any additional notes about this lead...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSubmit,className:\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:[lead?'Update':'Add',\" Lead\"]})]})]})]})});}// Main App Component\nexport default function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[loading,setLoading]=useState(true);const[leads,setLeads]=useState([]);const[currentView,setCurrentView]=useState('dashboard');const[editingLead,setEditingLead]=useState(null);const[notifications,setNotifications]=useState([]);const[showAddForm,setShowAddForm]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[filterQuality,setFilterQuality]=useState('all');const[refreshing,setRefreshing]=useState(false);const addNotification=useCallback(function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';const newNotification={id:Date.now().toString(),message,type};setNotifications(prev=>[newNotification,...prev.slice(0,4)]);setTimeout(()=>{setNotifications(prev=>prev.filter(n=>n.id!==newNotification.id));},5000);},[]);const loadLeadsData=useCallback(async function(){let isManualRefresh=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;try{if(!isManualRefresh)setLoading(true);else setRefreshing(true);const sheetsLeads=await googleSheetsService.fetchLeads();// Remove duplicates\nconst seenIds=new Set();const uniqueLeads=sheetsLeads.filter(lead=>{if(!lead.id||seenIds.has(lead.id))return false;seenIds.add(lead.id);return true;});setLeads(uniqueLeads);if(isManualRefresh){addNotification('Leads refreshed successfully','success');}else if(uniqueLeads.length>0){addNotification(\"Loaded \".concat(uniqueLeads.length,\" leads\"),'success');}}catch(error){console.error('Error loading leads:',error);addNotification(\"Error: \".concat(error.message),'error');setLeads([]);}finally{setLoading(false);setRefreshing(false);}},[addNotification]);useEffect(()=>{const storedAuth=sessionStorage.getItem('isAuthenticated');if(storedAuth==='true'){setIsAuthenticated(true);}setLoading(false);},[]);useEffect(()=>{if(isAuthenticated){loadLeadsData();}},[isAuthenticated,loadLeadsData]);const handleAddLead=async leadData=>{try{const response=await googleSheetsService.addLead(leadData);if(response.success){await loadLeadsData(true);addNotification(\"Lead added: \".concat(leadData.customerName),'success');setShowAddForm(false);}else{throw new Error(response.message||'Failed to add lead');}}catch(error){addNotification(\"Error: \".concat(error.message),'error');}};const handleUpdateLead=async leadData=>{try{const response=await googleSheetsService.updateLead(leadData);if(response.success){await loadLeadsData(true);addNotification(\"Lead updated: \".concat(leadData.customerName),'success');setEditingLead(null);}else{throw new Error(response.message||'Failed to update lead');}}catch(error){addNotification(\"Error: \".concat(error.message),'error');}};const handleDeleteLead=async leadId=>{if(!window.confirm('Are you sure you want to delete this lead?'))return;try{const response=await googleSheetsService.deleteLead(leadId);if(response.success){await loadLeadsData(true);addNotification('Lead deleted successfully','success');}else{throw new Error(response.message||'Failed to delete lead');}}catch(error){addNotification(\"Error: \".concat(error.message),'error');}};const filteredLeads=useMemo(()=>{let filtered=[...leads];// Filter by search term\nif(searchTerm){filtered=filtered.filter(lead=>{var _lead$customerName,_lead$address,_lead$phoneNumber,_lead$email;return((_lead$customerName=lead.customerName)===null||_lead$customerName===void 0?void 0:_lead$customerName.toLowerCase().includes(searchTerm.toLowerCase()))||((_lead$address=lead.address)===null||_lead$address===void 0?void 0:_lead$address.toLowerCase().includes(searchTerm.toLowerCase()))||((_lead$phoneNumber=lead.phoneNumber)===null||_lead$phoneNumber===void 0?void 0:_lead$phoneNumber.includes(searchTerm))||((_lead$email=lead.email)===null||_lead$email===void 0?void 0:_lead$email.toLowerCase().includes(searchTerm.toLowerCase()));});}// Filter by quality\nif(filterQuality!=='all'){filtered=filtered.filter(lead=>lead.quality===filterQuality);}return filtered;},[leads,searchTerm,filterQuality]);const handleLogout=()=>{sessionStorage.removeItem('isAuthenticated');setIsAuthenticated(false);setLeads([]);};if(!isAuthenticated){return/*#__PURE__*/_jsx(LoginForm,{onLogin:setIsAuthenticated});}if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"animate-spin h-12 w-12 text-blue-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Loading CRM...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-sm border-b sticky top-0 z-40\",children:/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-600 rounded-lg p-2 mr-3\",children:/*#__PURE__*/_jsx(Home,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-800\",children:\"Bhotch CRM\"})]}),/*#__PURE__*/_jsxs(\"nav\",{className:\"flex space-x-1\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentView('dashboard'),className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(currentView==='dashboard'?'bg-blue-100 text-blue-700':'text-gray-600 hover:bg-gray-100'),children:[/*#__PURE__*/_jsx(BarChart3,{size:20,className:\"inline mr-2\"}),\"Dashboard\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentView('leads'),className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(currentView==='leads'?'bg-blue-100 text-blue-700':'text-gray-600 hover:bg-gray-100'),children:[/*#__PURE__*/_jsx(Users,{size:20,className:\"inline mr-2\"}),\"Leads\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentView('map'),className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(currentView==='map'?'bg-blue-100 text-blue-700':'text-gray-600 hover:bg-gray-100'),children:[/*#__PURE__*/_jsx(MapPin,{size:20,className:\"inline mr-2\"}),\"Map\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentView('calendar'),className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(currentView==='calendar'?'bg-blue-100 text-blue-700':'text-gray-600 hover:bg-gray-100'),children:[/*#__PURE__*/_jsx(Calendar,{size:20,className:\"inline mr-2\"}),\"Calendar\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadLeadsData(true),disabled:refreshing,className:\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50\",children:/*#__PURE__*/_jsx(RefreshCw,{size:20,className:refreshing?'animate-spin':''})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddForm(true),className:\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium\",children:[/*#__PURE__*/_jsx(Plus,{size:20,className:\"inline mr-1\"}),\"Add Lead\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\",title:\"Logout\",children:/*#__PURE__*/_jsx(XCircle,{size:20})})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-20 right-4 z-50 space-y-2\",children:notifications.map(notif=>/*#__PURE__*/_jsx(\"div\",{className:\"p-4 rounded-lg shadow-lg transition-all transform animate-slide-in-right \".concat(notif.type==='success'?'bg-green-500 text-white':notif.type==='error'?'bg-red-500 text-white':'bg-blue-500 text-white'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[notif.type==='success'&&/*#__PURE__*/_jsx(CheckCircle,{className:\"mr-2\",size:20}),notif.type==='error'&&/*#__PURE__*/_jsx(AlertCircle,{className:\"mr-2\",size:20}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:notif.message})]})},notif.id))}),/*#__PURE__*/_jsxs(\"main\",{className:\"h-[calc(100vh-73px)]\",children:[currentView==='dashboard'&&/*#__PURE__*/_jsx(Dashboard,{leads:filteredLeads}),currentView==='leads'&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-gray-50 min-h-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:\"All Leads\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mt-1\",children:[filteredLeads.length,\" total leads\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 w-full sm:w-auto\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search leads...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"px-4 py-2 border border-gray-300 rounded-lg flex-1 sm:w-64 focus:outline-none focus:ring-2 focus:ring-blue-500\"}),/*#__PURE__*/_jsxs(\"select\",{value:filterQuality,onChange:e=>setFilterQuality(e.target.value),className:\"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Quality\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Hot\",children:\"Hot\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Warm\",children:\"Warm\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Cold\",children:\"Cold\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50 border-b\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Quality\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Quote\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-100\",children:filteredLeads.map(lead=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50 transition-colors\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:lead.customerName}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:lead.email})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:lead.address})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:lead.phoneNumber||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-medium \".concat(lead.quality==='Hot'?'bg-red-100 text-red-800':lead.quality==='Warm'?'bg-yellow-100 text-yellow-800':'bg-gray-100 text-gray-800'),children:lead.quality})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\",children:lead.leadStatus||'New'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-green-600\",children:lead.dabellaQuote?\"$\".concat(parseFloat(lead.dabellaQuote).toLocaleString()):'-'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingLead(lead),className:\"text-blue-600 hover:text-blue-800 transition-colors\",title:\"Edit\",children:/*#__PURE__*/_jsx(Edit2,{size:18})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteLead(lead.id),className:\"text-red-600 hover:text-red-800 transition-colors\",title:\"Delete\",children:/*#__PURE__*/_jsx(Trash2,{size:18})})]})})]},lead.id))})]}),filteredLeads.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Users,{className:\"h-12 w-12 text-gray-300 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No leads found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm mt-1\",children:\"Try adjusting your search filters\"})]})]})})]}),currentView==='map'&&/*#__PURE__*/_jsx(InteractiveMapView,{leads:filteredLeads}),currentView==='calendar'&&/*#__PURE__*/_jsx(CalendarView,{})]}),showAddForm&&/*#__PURE__*/_jsx(LeadForm,{onSubmit:handleAddLead,onCancel:()=>setShowAddForm(false)}),editingLead&&/*#__PURE__*/_jsx(LeadForm,{lead:editingLead,onSubmit:handleUpdateLead,onCancel:()=>setEditingLead(null)}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:\"\\n        @keyframes slide-in-right {\\n          from {\\n            transform: translateX(100%);\\n            opacity: 0;\\n          }\\n          to {\\n            transform: translateX(0);\\n            opacity: 1;\\n          }\\n        }\\n        \\n        .animate-slide-in-right {\\n          animation: slide-in-right 0.3s ease-out;\\n        }\\n      \"})]});}","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","useRef","MapPin","Calendar","Plus","Edit2","Trash2","DollarSign","ClipboardList","AlertCircle","CheckCircle","Clock","Home","Phone","Mail","RefreshCw","X","User","Tag","Briefcase","Search","TrendingUp","MessageSquare","Eye","XCircle","ShieldCheck","Navigation","Users","BarChart3","Activity","Loader2","Map","Filter","initializeApp","getAuth","signInWithEmailAndPassword","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","GOOGLE_MAPS_API_KEY","GoogleSheetsService","constructor","baseURL","makeRequest","action","payload","response","fetch","method","mode","credentials","headers","body","JSON","stringify","_objectSpread","text","parse","_unused","console","warn","success","message","error","fetchLeads","url","concat","Date","now","ok","Error","status","data","leads","addLead","lead","updateLead","deleteLead","leadId","geocodeAddress","address","googleSheetsService","LoginForm","_ref","onLogin","setCredentials","email","password","setError","loading","setLoading","handleSubmit","sessionStorage","setItem","handleKeyPress","e","key","className","children","type","placeholder","value","onChange","target","onKeyPress","onClick","disabled","InteractiveMapView","_ref2","selectedLead","setSelectedLead","mapLoaded","setMapLoaded","mapError","setMapError","mapRef","mapInstanceRef","markersRef","infoWindowRef","initMap","window","google","current","mapOptions","zoom","center","lat","lng","mapTypeId","mapTypeControl","streetViewControl","fullscreenControl","zoomControl","maps","InfoWindow","script","document","createElement","src","async","defer","onload","onerror","head","appendChild","length","forEach","marker","setMap","bounds","LatLngBounds","hasValidMarkers","latitude","longitude","parseFloat","isNaN","position","Marker","map","title","customerName","icon","scaledSize","Size","animation","Animation","DROP","contentString","phoneNumber","quality","leadSource","dabellaQuote","toLocaleString","notes","substring","addListener","setContent","open","setZoom","setCenter","getPosition","push","extend","fitBounds","listener","event","getZoom","removeListener","ref","filter","l","size","leadStatus","CalendarView","style","border","borderRadius","width","height","frameBorder","scrolling","Dashboard","_ref3","stats","total","hot","warm","cold","quoted","totalQuoteValue","reduce","sum","mapped","recentLeads","sort","a","b","createdDate","slice","id","LeadForm","_ref4","onSubmit","onCancel","formData","setFormData","disposition","roofType","roofAge","inspectionStatus","followupDate","appointmentDate","alert","rows","App","isAuthenticated","setIsAuthenticated","setLeads","currentView","setCurrentView","editingLead","setEditingLead","notifications","setNotifications","showAddForm","setShowAddForm","searchTerm","setSearchTerm","filterQuality","setFilterQuality","refreshing","setRefreshing","addNotification","arguments","undefined","newNotification","toString","prev","setTimeout","n","loadLeadsData","isManualRefresh","sheetsLeads","seenIds","Set","uniqueLeads","has","add","storedAuth","getItem","handleAddLead","leadData","handleUpdateLead","handleDeleteLead","confirm","filteredLeads","filtered","_lead$customerName","_lead$address","_lead$phoneNumber","_lead$email","toLowerCase","includes","handleLogout","removeItem","notif"],"sources":["C:/Users/PC_User/Desktop/free-crm/bhotch-crm/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback, useRef } from 'react';\r\nimport { MapPin, Calendar, Plus, Edit2, Trash2, DollarSign, ClipboardList, AlertCircle, CheckCircle, Clock, Home, Phone, Mail, RefreshCw, X, User, Tag, Briefcase, Search, TrendingUp, MessageSquare, Eye, XCircle, ShieldCheck, Navigation, Users, BarChart3, Activity, Loader2, Map, Filter } from 'lucide-react';\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getAuth, signInWithEmailAndPassword } from 'firebase/auth';\r\n\r\n// Firebase Configuration\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCa63Fy9PF-NV8C_z_5Qp7VWse5nRxRRJ8\",\r\n  authDomain: \"crmbackend-470221.firebaseapp.com\",\r\n  projectId: \"crmbackend-470221\",\r\n  storageBucket: \"crmbackend-470221.firebasestorage.app\",\r\n  messagingSenderId: \"874590395925\",\r\n  appId: \"1:874590395925:web:41fff249ed9a7b349af81c\",\r\n  measurementId: \"G-4BG7SZMK6K\"\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nconst auth = getAuth(app);\r\n\r\n// Google Maps API Key - IMPORTANT: Replace with your actual key\r\nconst GOOGLE_MAPS_API_KEY = 'AIzaSyBe0zlEBVGQB5cNpiPhLH-RGKDvUQDV-zk'; // Replace this!\r\n\r\n// Google Sheets Service\r\nclass GoogleSheetsService {\r\n  constructor() { \r\n    this.baseURL = 'https://script.google.com/macros/s/AKfycbw8r0tVUeFptoP0hdEQONuP8RR5NdYxBjPZwiXPZCLJLwduWAm28K23aVjqwzr4joejtA/exec';\r\n  }\r\n  \r\n  async makeRequest(action, payload) { \r\n    try { \r\n      const response = await fetch(this.baseURL, { \r\n        method: 'POST', \r\n        mode: 'cors',\r\n        credentials: 'omit',\r\n        headers: { \r\n          'Content-Type': 'text/plain;charset=utf-8',\r\n          'Accept': 'application/json'\r\n        }, \r\n        body: JSON.stringify({ action, ...payload }) \r\n      }); \r\n      \r\n      const text = await response.text();\r\n      try {\r\n        return JSON.parse(text);\r\n      } catch {\r\n        console.warn('Could not parse response:', text);\r\n        return { success: false, message: 'Invalid response format' };\r\n      }\r\n    } catch (error) { \r\n      console.error('Request error:', error);\r\n      return { success: false, message: error.message }; \r\n    } \r\n  }\r\n  \r\n  async fetchLeads() { \r\n    try { \r\n      const url = `${this.baseURL}?action=getLeads&cacheBust=${Date.now()}`;\r\n      \r\n      const response = await fetch(url, { \r\n        method: 'GET', \r\n        mode: 'cors',\r\n        credentials: 'omit',\r\n        headers: {\r\n          'Accept': 'application/json'\r\n        }\r\n      }); \r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      \r\n      const text = await response.text();\r\n      const data = JSON.parse(text);\r\n      \r\n      if (data.success === false) {\r\n        throw new Error(data.message || 'Failed to fetch leads');\r\n      }\r\n      \r\n      return data.leads || []; \r\n    } catch (error) { \r\n      console.error('Could not fetch leads:', error);\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  async addLead(lead) {\r\n    return this.makeRequest('addLead', { lead });\r\n  }\r\n  \r\n  async updateLead(lead) {\r\n    return this.makeRequest('updateLead', { lead });\r\n  }\r\n  \r\n  async deleteLead(leadId) {\r\n    return this.makeRequest('deleteLead', { leadId });\r\n  }\r\n  \r\n  async geocodeAddress(address) {\r\n    return this.makeRequest('geocodeLead', { address });\r\n  }\r\n}\r\n\r\nconst googleSheetsService = new GoogleSheetsService();\r\n\r\n// Login Component\r\nfunction LoginForm({ onLogin }) {\r\n  const [credentials, setCredentials] = useState({ email: '', password: '' });\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async () => {\r\n    if (!credentials.email || !credentials.password) {\r\n      setError('Please enter email and password');\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      await signInWithEmailAndPassword(auth, credentials.email, credentials.password);\r\n      sessionStorage.setItem('isAuthenticated', 'true');\r\n      onLogin(true);\r\n    } catch (error) {\r\n      setError('Invalid email or password');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleSubmit();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100\">\r\n      <div className=\"bg-white p-8 rounded-lg shadow-xl w-96\">\r\n        <div className=\"text-center mb-6\">\r\n          <div className=\"bg-blue-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4\">\r\n            <Home className=\"h-10 w-10 text-blue-600\" />\r\n          </div>\r\n          <h2 className=\"text-2xl font-bold text-gray-800\">Bhotch CRM</h2>\r\n          <p className=\"text-gray-500 text-sm mt-2\">Sign in to manage your leads</p>\r\n        </div>\r\n        \r\n        {error && (\r\n          <div className=\"mb-4 p-3 bg-red-50 border border-red-200 text-red-600 rounded-lg text-sm\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"space-y-4\">\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            value={credentials.email}\r\n            onChange={(e) => setCredentials({...credentials, email: e.target.value})}\r\n            onKeyPress={handleKeyPress}\r\n            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            value={credentials.password}\r\n            onChange={(e) => setCredentials({...credentials, password: e.target.value})}\r\n            onKeyPress={handleKeyPress}\r\n            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n          />\r\n          <button \r\n            onClick={handleSubmit} \r\n            disabled={loading} \r\n            className=\"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center\"\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <Loader2 className=\"animate-spin h-5 w-5 mr-2\" />\r\n                Signing in...\r\n              </>\r\n            ) : (\r\n              'Sign In'\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Interactive Map Component\r\nfunction InteractiveMapView({ leads }) {\r\n  const [selectedLead, setSelectedLead] = useState(null);\r\n  const [mapLoaded, setMapLoaded] = useState(false);\r\n  const [mapError, setMapError] = useState(null);\r\n  const mapRef = useRef(null);\r\n  const mapInstanceRef = useRef(null);\r\n  const markersRef = useRef([]);\r\n  const infoWindowRef = useRef(null);\r\n\r\n  // Initialize Google Maps\r\n  useEffect(() => {\r\n    const initMap = () => {\r\n      if (!window.google || !mapRef.current) return;\r\n\r\n      const mapOptions = {\r\n        zoom: 11,\r\n        center: { lat: 39.7392, lng: -104.9903 }, // Denver, CO\r\n        mapTypeId: 'roadmap',\r\n        mapTypeControl: true,\r\n        streetViewControl: true,\r\n        fullscreenControl: true,\r\n        zoomControl: true\r\n      };\r\n\r\n      mapInstanceRef.current = new window.google.maps.Map(mapRef.current, mapOptions);\r\n      infoWindowRef.current = new window.google.maps.InfoWindow();\r\n    };\r\n\r\n    if (!window.google && !mapLoaded) {\r\n      const script = document.createElement('script');\r\n      script.src = `https://maps.googleapis.com/maps/api/js?key=${GOOGLE_MAPS_API_KEY}&libraries=places`;\r\n      script.async = true;\r\n      script.defer = true;\r\n      \r\n      script.onload = () => {\r\n        setMapLoaded(true);\r\n        initMap();\r\n      };\r\n      \r\n      script.onerror = () => {\r\n        setMapError('Failed to load Google Maps. Please check your API key.');\r\n      };\r\n      \r\n      document.head.appendChild(script);\r\n    } else if (window.google && !mapInstanceRef.current) {\r\n      setMapLoaded(true);\r\n      initMap();\r\n    }\r\n  }, []); // Run only once on mount\r\n\r\n  // Update markers when leads change or map loads\r\n  useEffect(() => {\r\n    if (!mapInstanceRef.current || !leads.length) return;\r\n\r\n    // Clear existing markers\r\n    markersRef.current.forEach(marker => marker.setMap(null));\r\n    markersRef.current = [];\r\n\r\n    const bounds = new window.google.maps.LatLngBounds();\r\n    let hasValidMarkers = false;\r\n\r\n    leads.forEach(lead => {\r\n      if (lead.latitude && lead.longitude) {\r\n        const lat = parseFloat(lead.latitude);\r\n        const lng = parseFloat(lead.longitude);\r\n        \r\n        if (!isNaN(lat) && !isNaN(lng)) {\r\n          const position = { lat, lng };\r\n\r\n          const marker = new window.google.maps.Marker({\r\n            position,\r\n            map: mapInstanceRef.current,\r\n            title: lead.customerName,\r\n            icon: {\r\n              url: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png',\r\n              scaledSize: new window.google.maps.Size(40, 40)\r\n            },\r\n            animation: window.google.maps.Animation.DROP\r\n          });\r\n\r\n          // Info window content\r\n          const contentString = `\r\n            <div style=\"padding: 12px; max-width: 350px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\">\r\n              <h3 style=\"margin: 0 0 8px 0; color: #1f2937; font-size: 18px; font-weight: 600;\">\r\n                ${lead.customerName}\r\n              </h3>\r\n              <div style=\"space-y: 6px;\">\r\n                <p style=\"margin: 4px 0; color: #4b5563; font-size: 14px;\">\r\n                  <strong>📍 Address:</strong> ${lead.address || 'N/A'}\r\n                </p>\r\n                <p style=\"margin: 4px 0; color: #4b5563; font-size: 14px;\">\r\n                  <strong>📞 Phone:</strong> ${lead.phoneNumber || 'N/A'}\r\n                </p>\r\n                <p style=\"margin: 4px 0; color: #4b5563; font-size: 14px;\">\r\n                  <strong>✉️ Email:</strong> ${lead.email || 'N/A'}\r\n                </p>\r\n                <p style=\"margin: 4px 0; color: #4b5563; font-size: 14px;\">\r\n                  <strong>🏷️ Status:</strong> \r\n                  <span style=\"padding: 2px 8px; border-radius: 4px; font-size: 12px; font-weight: 500; background: ${\r\n                    lead.quality === 'Hot' ? '#fee2e2' : \r\n                    lead.quality === 'Warm' ? '#fef3c7' : '#f3f4f6'\r\n                  }; color: ${\r\n                    lead.quality === 'Hot' ? '#dc2626' : \r\n                    lead.quality === 'Warm' ? '#d97706' : '#6b7280'\r\n                  };\">\r\n                    ${lead.quality || 'Cold'}\r\n                  </span>\r\n                </p>\r\n                ${lead.leadSource ? \r\n                  `<p style=\"margin: 4px 0; color: #4b5563; font-size: 14px;\">\r\n                    <strong>📌 Source:</strong> ${lead.leadSource}\r\n                  </p>` : ''\r\n                }\r\n                ${lead.dabellaQuote ? \r\n                  `<p style=\"margin: 4px 0; color: #059669; font-size: 14px;\">\r\n                    <strong>💰 Quote:</strong> ${parseFloat(lead.dabellaQuote).toLocaleString()}\r\n                  </p>` : ''\r\n                }\r\n                ${lead.notes ? \r\n                  `<p style=\"margin: 8px 0 0 0; padding-top: 8px; border-top: 1px solid #e5e7eb; color: #6b7280; font-size: 13px;\">\r\n                    <strong>Notes:</strong> ${lead.notes.substring(0, 100)}${lead.notes.length > 100 ? '...' : ''}\r\n                  </p>` : ''\r\n                }\r\n              </div>\r\n            </div>\r\n          `;\r\n\r\n          marker.addListener('click', () => {\r\n            infoWindowRef.current.setContent(contentString);\r\n            infoWindowRef.current.open(mapInstanceRef.current, marker);\r\n            setSelectedLead(lead);\r\n            \r\n            // Zoom to marker\r\n            mapInstanceRef.current.setZoom(15);\r\n            mapInstanceRef.current.setCenter(marker.getPosition());\r\n          });\r\n\r\n          markersRef.current.push(marker);\r\n          bounds.extend(position);\r\n          hasValidMarkers = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    // Fit map to show all markers\r\n    if (hasValidMarkers) {\r\n      mapInstanceRef.current.fitBounds(bounds);\r\n      \r\n      // Don't zoom in too much for single marker\r\n      const listener = window.google.maps.event.addListener(mapInstanceRef.current, \"idle\", function() { \r\n        if (mapInstanceRef.current.getZoom() > 16) {\r\n          mapInstanceRef.current.setZoom(16);\r\n        }\r\n        window.google.maps.event.removeListener(listener);\r\n      });\r\n    }\r\n  }, [leads, mapLoaded, setSelectedLead]); // Include all dependencies\r\n\r\n  return (\r\n    <div className=\"h-full flex bg-gray-50\">\r\n      <div className=\"flex-1 relative\">\r\n        <div ref={mapRef} className=\"w-full h-full\"></div>\r\n        \r\n        {!mapLoaded && !mapError && (\r\n          <div className=\"absolute inset-0 flex items-center justify-center bg-white\">\r\n            <div className=\"text-center\">\r\n              <Loader2 className=\"animate-spin h-12 w-12 text-blue-600 mx-auto mb-4\" />\r\n              <p className=\"text-gray-600\">Loading map...</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {mapError && (\r\n          <div className=\"absolute inset-0 flex items-center justify-center bg-white\">\r\n            <div className=\"text-center max-w-md\">\r\n              <AlertCircle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\r\n              <p className=\"text-gray-800 font-semibold mb-2\">Map Loading Error</p>\r\n              <p className=\"text-gray-600 text-sm\">{mapError}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Map Stats Overlay */}\r\n        <div className=\"absolute top-4 left-4 bg-white rounded-lg shadow-lg p-4\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"text-center\">\r\n              <p className=\"text-2xl font-bold text-gray-800\">{leads.filter(l => l.latitude && l.longitude).length}</p>\r\n              <p className=\"text-xs text-gray-500\">Mapped Leads</p>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <p className=\"text-2xl font-bold text-red-600\">{leads.filter(l => l.quality === 'Hot').length}</p>\r\n              <p className=\"text-xs text-gray-500\">Hot Leads</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {selectedLead && (\r\n        <div className=\"w-96 bg-white shadow-xl overflow-y-auto\">\r\n          <div className=\"p-6\">\r\n            <div className=\"flex justify-between items-start mb-4\">\r\n              <h3 className=\"text-xl font-bold text-gray-800\">{selectedLead.customerName}</h3>\r\n              <button \r\n                onClick={() => setSelectedLead(null)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <X size={20} />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"space-y-4\">\r\n              <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                <h4 className=\"text-sm font-semibold text-gray-700 mb-2\">Contact Information</h4>\r\n                <div className=\"space-y-2 text-sm\">\r\n                  <p><strong>📍 Address:</strong> {selectedLead.address}</p>\r\n                  <p><strong>📞 Phone:</strong> {selectedLead.phoneNumber || 'N/A'}</p>\r\n                  <p><strong>✉️ Email:</strong> {selectedLead.email || 'N/A'}</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                <h4 className=\"text-sm font-semibold text-gray-700 mb-2\">Lead Details</h4>\r\n                <div className=\"space-y-2 text-sm\">\r\n                  <p><strong>Quality:</strong> \r\n                    <span className={`ml-2 px-2 py-1 rounded text-xs font-medium ${\r\n                      selectedLead.quality === 'Hot' ? 'bg-red-100 text-red-800' : \r\n                      selectedLead.quality === 'Warm' ? 'bg-yellow-100 text-yellow-800' : \r\n                      'bg-gray-100 text-gray-800'\r\n                    }`}>\r\n                      {selectedLead.quality}\r\n                    </span>\r\n                  </p>\r\n                  <p><strong>Source:</strong> {selectedLead.leadSource || 'N/A'}</p>\r\n                  <p><strong>Status:</strong> {selectedLead.leadStatus || 'New'}</p>\r\n                  {selectedLead.dabellaQuote && (\r\n                    <p className=\"text-green-600 font-semibold\">\r\n                      <strong>Quote:</strong> ${parseFloat(selectedLead.dabellaQuote).toLocaleString()}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              \r\n              {selectedLead.notes && (\r\n                <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                  <h4 className=\"text-sm font-semibold text-gray-700 mb-2\">Notes</h4>\r\n                  <p className=\"text-sm text-gray-600\">{selectedLead.notes}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Calendar View Component\r\nfunction CalendarView() {\r\n  return (\r\n    <div className=\"h-full bg-white\">\r\n      <div className=\"p-6 border-b bg-gray-50\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-800\">Calendar</h2>\r\n            <p className=\"text-sm text-gray-600 mt-1\">View and manage your appointments</p>\r\n          </div>\r\n          <div className=\"flex space-x-2\">\r\n            <button className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\">\r\n              <Plus size={20} className=\"inline mr-1\" /> Add Event\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"p-6 h-[calc(100%-100px)]\">\r\n        <iframe \r\n          src=\"https://calendar.google.com/calendar/embed?height=600&wkst=1&ctz=America%2FDenver&showPrint=0&title=Bhotch%20Appointment&src=YnJhbmRvbkByaW1laHEubmV0&src=YnJhbmRvbi5ob3RjaGtpc3NAZ21haWwuY29t&color=%23addf00&color=%233f51b5\" \r\n          style={{border: '1px solid #e5e7eb', borderRadius: '8px'}} \r\n          width=\"100%\" \r\n          height=\"100%\" \r\n          frameBorder=\"0\" \r\n          scrolling=\"no\"\r\n          title=\"Google Calendar\"\r\n        ></iframe>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Dashboard Component\r\nfunction Dashboard({ leads }) {\r\n  const stats = useMemo(() => {\r\n    const total = leads.length;\r\n    const hot = leads.filter(l => l.quality === 'Hot').length;\r\n    const warm = leads.filter(l => l.quality === 'Warm').length;\r\n    const cold = leads.filter(l => l.quality === 'Cold').length;\r\n    const quoted = leads.filter(l => l.dabellaQuote && parseFloat(l.dabellaQuote) > 0).length;\r\n    const totalQuoteValue = leads.reduce((sum, l) => sum + (parseFloat(l.dabellaQuote) || 0), 0);\r\n    const mapped = leads.filter(l => l.latitude && l.longitude).length;\r\n    \r\n    return { total, hot, warm, cold, quoted, totalQuoteValue, mapped };\r\n  }, [leads]);\r\n\r\n  const recentLeads = useMemo(() => {\r\n    return [...leads]\r\n      .sort((a, b) => new Date(b.createdDate || 0) - new Date(a.createdDate || 0))\r\n      .slice(0, 5);\r\n  }, [leads]);\r\n\r\n  return (\r\n    <div className=\"p-6 bg-gray-50 min-h-full\">\r\n      <div className=\"mb-6\">\r\n        <h1 className=\"text-3xl font-bold text-gray-800\">Dashboard</h1>\r\n        <p className=\"text-gray-600 mt-1\">Welcome back! Here's your lead overview.</p>\r\n      </div>\r\n      \r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n        <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-500\">Total Leads</p>\r\n              <p className=\"text-3xl font-bold text-gray-900 mt-1\">{stats.total}</p>\r\n            </div>\r\n            <div className=\"bg-blue-100 p-3 rounded-lg\">\r\n              <Users className=\"h-7 w-7 text-blue-600\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-500\">Hot Leads</p>\r\n              <p className=\"text-3xl font-bold text-red-600 mt-1\">{stats.hot}</p>\r\n            </div>\r\n            <div className=\"bg-red-100 p-3 rounded-lg\">\r\n              <Activity className=\"h-7 w-7 text-red-600\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-500\">Quoted Leads</p>\r\n              <p className=\"text-3xl font-bold text-green-600 mt-1\">{stats.quoted}</p>\r\n            </div>\r\n            <div className=\"bg-green-100 p-3 rounded-lg\">\r\n              <BarChart3 className=\"h-7 w-7 text-green-600\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-500\">Total Quote Value</p>\r\n              <p className=\"text-2xl font-bold text-indigo-600 mt-1\">${stats.totalQuoteValue.toLocaleString()}</p>\r\n            </div>\r\n            <div className=\"bg-indigo-100 p-3 rounded-lg\">\r\n              <DollarSign className=\"h-7 w-7 text-indigo-600\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\">\r\n          <h2 className=\"text-xl font-bold mb-4 text-gray-800\">Lead Distribution</h2>\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"w-4 h-4 bg-red-500 rounded-full mr-3\"></div>\r\n                <span className=\"text-sm font-medium text-gray-700\">Hot Leads</span>\r\n              </div>\r\n              <span className=\"text-sm font-bold text-gray-900\">{stats.hot}</span>\r\n            </div>\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"w-4 h-4 bg-yellow-500 rounded-full mr-3\"></div>\r\n                <span className=\"text-sm font-medium text-gray-700\">Warm Leads</span>\r\n              </div>\r\n              <span className=\"text-sm font-bold text-gray-900\">{stats.warm}</span>\r\n            </div>\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"w-4 h-4 bg-gray-400 rounded-full mr-3\"></div>\r\n                <span className=\"text-sm font-medium text-gray-700\">Cold Leads</span>\r\n              </div>\r\n              <span className=\"text-sm font-bold text-gray-900\">{stats.cold}</span>\r\n            </div>\r\n            <div className=\"flex items-center justify-between pt-4 border-t\">\r\n              <div className=\"flex items-center\">\r\n                <MapPin className=\"w-4 h-4 text-blue-600 mr-3\" />\r\n                <span className=\"text-sm font-medium text-gray-700\">Mapped Leads</span>\r\n              </div>\r\n              <span className=\"text-sm font-bold text-gray-900\">{stats.mapped}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\">\r\n          <h2 className=\"text-xl font-bold mb-4 text-gray-800\">Recent Activity</h2>\r\n          <div className=\"space-y-3\">\r\n            {recentLeads.map(lead => (\r\n              <div key={lead.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\">\r\n                <div className=\"flex-1\">\r\n                  <p className=\"font-medium text-gray-900\">{lead.customerName}</p>\r\n                  <p className=\"text-sm text-gray-500 truncate\">{lead.address}</p>\r\n                </div>\r\n                <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                  lead.quality === 'Hot' ? 'bg-red-100 text-red-800' : \r\n                  lead.quality === 'Warm' ? 'bg-yellow-100 text-yellow-800' : \r\n                  'bg-gray-100 text-gray-800'\r\n                }`}>\r\n                  {lead.quality || 'Cold'}\r\n                </span>\r\n              </div>\r\n            ))}\r\n            {recentLeads.length === 0 && (\r\n              <p className=\"text-center text-gray-500 py-4\">No recent leads</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Lead Form Component\r\nfunction LeadForm({ lead, onSubmit, onCancel }) {\r\n  const [formData, setFormData] = useState({\r\n    customerName: lead?.customerName || '',\r\n    address: lead?.address || '',\r\n    phoneNumber: lead?.phoneNumber || '',\r\n    email: lead?.email || '',\r\n    quality: lead?.quality || 'Cold',\r\n    leadSource: lead?.leadSource || 'Door to Door',\r\n    disposition: lead?.disposition || '',\r\n    dabellaQuote: lead?.dabellaQuote || '',\r\n    roofType: lead?.roofType || '',\r\n    roofAge: lead?.roofAge || '',\r\n    inspectionStatus: lead?.inspectionStatus || '',\r\n    notes: lead?.notes || '',\r\n    followupDate: lead?.followupDate || '',\r\n    appointmentDate: lead?.appointmentDate || '',\r\n    leadStatus: lead?.leadStatus || 'New'\r\n  });\r\n\r\n  const handleSubmit = () => {\r\n    if (!formData.customerName || !formData.address) {\r\n      alert('Please fill in required fields (Name and Address)');\r\n      return;\r\n    }\r\n    onSubmit({ ...lead, ...formData });\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"p-6 border-b bg-gray-50\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <h2 className=\"text-2xl font-bold text-gray-800\">\r\n              {lead ? 'Edit Lead' : 'Add New Lead'}\r\n            </h2>\r\n            <button \r\n              onClick={onCancel}\r\n              className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n            >\r\n              <X size={24} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Customer Name *</label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.customerName}\r\n                onChange={(e) => setFormData({...formData, customerName: e.target.value})}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"John Doe\"\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Address *</label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.address}\r\n                onChange={(e) => setFormData({...formData, address: e.target.value})}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"123 Main St, Denver, CO\"\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Phone Number</label>\r\n              <input\r\n                type=\"tel\"\r\n                value={formData.phoneNumber}\r\n                onChange={(e) => setFormData({...formData, phoneNumber: e.target.value})}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"(555) 123-4567\"\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email</label>\r\n              <input\r\n                type=\"email\"\r\n                value={formData.email}\r\n                onChange={(e) => setFormData({...formData, email: e.target.value})}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"john@example.com\"\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Lead Quality</label>\r\n              <select\r\n                value={formData.quality}\r\n                onChange={(e) => setFormData({...formData, quality: e.target.value})}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"Cold\">Cold</option>\r\n                <option value=\"Warm\">Warm</option>\r\n                <option value=\"Hot\">Hot</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Lead Source</label>\r\n              <select\r\n                value={formData.leadSource}\r\n                onChange={(e) => setFormData({...formData, leadSource: e.target.value})}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"Door to Door\">Door to Door</option>\r\n                <option value=\"Referral\">Referral</option>\r\n                <option value=\"Online\">Online</option>\r\n                <option value=\"Phone\">Phone</option>\r\n                <option value=\"Social Media\">Social Media</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Quote Amount</label>\r\n              <input\r\n                type=\"number\"\r\n                value={formData.dabellaQuote}\r\n                onChange={(e) => setFormData({...formData, dabellaQuote: e.target.value})}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"15000\"\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Lead Status</label>\r\n              <select\r\n                value={formData.leadStatus}\r\n                onChange={(e) => setFormData({...formData, leadStatus: e.target.value})}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"New\">New</option>\r\n                <option value=\"Contacted\">Contacted</option>\r\n                <option value=\"Qualified\">Qualified</option>\r\n                <option value=\"Quoted\">Quoted</option>\r\n                <option value=\"Closed Won\">Closed Won</option>\r\n                <option value=\"Closed Lost\">Closed Lost</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Roof Type</label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.roofType}\r\n                onChange={(e) => setFormData({...formData, roofType: e.target.value})}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"Asphalt Shingle\"\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Roof Age</label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.roofAge}\r\n                onChange={(e) => setFormData({...formData, roofAge: e.target.value})}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"10 years\"\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Inspection Status</label>\r\n              <select\r\n                value={formData.inspectionStatus}\r\n                onChange={(e) => setFormData({...formData, inspectionStatus: e.target.value})}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"\">Not Scheduled</option>\r\n                <option value=\"Scheduled\">Scheduled</option>\r\n                <option value=\"Completed\">Completed</option>\r\n                <option value=\"Pending\">Pending</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Follow-up Date</label>\r\n              <input\r\n                type=\"date\"\r\n                value={formData.followupDate}\r\n                onChange={(e) => setFormData({...formData, followupDate: e.target.value})}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"mt-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Notes</label>\r\n            <textarea\r\n              value={formData.notes}\r\n              onChange={(e) => setFormData({...formData, notes: e.target.value})}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              rows=\"4\"\r\n              placeholder=\"Add any additional notes about this lead...\"\r\n            ></textarea>\r\n          </div>\r\n          \r\n          <div className=\"flex justify-end gap-3 mt-6\">\r\n            <button \r\n              onClick={onCancel} \r\n              className=\"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button \r\n              onClick={handleSubmit} \r\n              className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              {lead ? 'Update' : 'Add'} Lead\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Main App Component\r\nexport default function App() {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [leads, setLeads] = useState([]);\r\n  const [currentView, setCurrentView] = useState('dashboard');\r\n  const [editingLead, setEditingLead] = useState(null);\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterQuality, setFilterQuality] = useState('all');\r\n  const [refreshing, setRefreshing] = useState(false);\r\n\r\n  const addNotification = useCallback((message, type = 'info') => {\r\n    const newNotification = { \r\n      id: Date.now().toString(), \r\n      message, \r\n      type \r\n    };\r\n    setNotifications(prev => [newNotification, ...prev.slice(0, 4)]);\r\n    setTimeout(() => {\r\n      setNotifications(prev => prev.filter(n => n.id !== newNotification.id));\r\n    }, 5000);\r\n  }, []);\r\n\r\n  const loadLeadsData = useCallback(async (isManualRefresh = false) => {\r\n    try {\r\n      if (!isManualRefresh) setLoading(true);\r\n      else setRefreshing(true);\r\n      \r\n      const sheetsLeads = await googleSheetsService.fetchLeads();\r\n      \r\n      // Remove duplicates\r\n      const seenIds = new Set();\r\n      const uniqueLeads = sheetsLeads.filter(lead => {\r\n        if (!lead.id || seenIds.has(lead.id)) return false;\r\n        seenIds.add(lead.id);\r\n        return true;\r\n      });\r\n\r\n      setLeads(uniqueLeads);\r\n      \r\n      if (isManualRefresh) {\r\n        addNotification('Leads refreshed successfully', 'success');\r\n      } else if (uniqueLeads.length > 0) {\r\n        addNotification(`Loaded ${uniqueLeads.length} leads`, 'success');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading leads:', error);\r\n      addNotification(`Error: ${error.message}`, 'error');\r\n      setLeads([]);\r\n    } finally {\r\n      setLoading(false);\r\n      setRefreshing(false);\r\n    }\r\n  }, [addNotification]);\r\n\r\n  useEffect(() => {\r\n    const storedAuth = sessionStorage.getItem('isAuthenticated');\r\n    if (storedAuth === 'true') {\r\n      setIsAuthenticated(true);\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      loadLeadsData();\r\n    }\r\n  }, [isAuthenticated, loadLeadsData]);\r\n\r\n  const handleAddLead = async (leadData) => {\r\n    try {\r\n      const response = await googleSheetsService.addLead(leadData);\r\n      if (response.success) {\r\n        await loadLeadsData(true);\r\n        addNotification(`Lead added: ${leadData.customerName}`, 'success');\r\n        setShowAddForm(false);\r\n      } else {\r\n        throw new Error(response.message || 'Failed to add lead');\r\n      }\r\n    } catch (error) {\r\n      addNotification(`Error: ${error.message}`, 'error');\r\n    }\r\n  };\r\n\r\n  const handleUpdateLead = async (leadData) => {\r\n    try {\r\n      const response = await googleSheetsService.updateLead(leadData);\r\n      if (response.success) {\r\n        await loadLeadsData(true);\r\n        addNotification(`Lead updated: ${leadData.customerName}`, 'success');\r\n        setEditingLead(null);\r\n      } else {\r\n        throw new Error(response.message || 'Failed to update lead');\r\n      }\r\n    } catch (error) {\r\n      addNotification(`Error: ${error.message}`, 'error');\r\n    }\r\n  };\r\n\r\n  const handleDeleteLead = async (leadId) => {\r\n    if (!window.confirm('Are you sure you want to delete this lead?')) return;\r\n    \r\n    try {\r\n      const response = await googleSheetsService.deleteLead(leadId);\r\n      if (response.success) {\r\n        await loadLeadsData(true);\r\n        addNotification('Lead deleted successfully', 'success');\r\n      } else {\r\n        throw new Error(response.message || 'Failed to delete lead');\r\n      }\r\n    } catch (error) {\r\n      addNotification(`Error: ${error.message}`, 'error');\r\n    }\r\n  };\r\n\r\n  const filteredLeads = useMemo(() => {\r\n    let filtered = [...leads];\r\n    \r\n    // Filter by search term\r\n    if (searchTerm) {\r\n      filtered = filtered.filter(lead => \r\n        lead.customerName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        lead.address?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        lead.phoneNumber?.includes(searchTerm) ||\r\n        lead.email?.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    }\r\n    \r\n    // Filter by quality\r\n    if (filterQuality !== 'all') {\r\n      filtered = filtered.filter(lead => lead.quality === filterQuality);\r\n    }\r\n    \r\n    return filtered;\r\n  }, [leads, searchTerm, filterQuality]);\r\n\r\n  const handleLogout = () => {\r\n    sessionStorage.removeItem('isAuthenticated');\r\n    setIsAuthenticated(false);\r\n    setLeads([]);\r\n  };\r\n\r\n  if (!isAuthenticated) {\r\n    return <LoginForm onLogin={setIsAuthenticated} />;\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\r\n        <div className=\"text-center\">\r\n          <Loader2 className=\"animate-spin h-12 w-12 text-blue-600 mx-auto mb-4\" />\r\n          <p className=\"text-gray-600\">Loading CRM...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Header */}\r\n      <header className=\"bg-white shadow-sm border-b sticky top-0 z-40\">\r\n        <div className=\"px-4 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-6\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"bg-blue-600 rounded-lg p-2 mr-3\">\r\n                  <Home className=\"h-6 w-6 text-white\" />\r\n                </div>\r\n                <h1 className=\"text-2xl font-bold text-gray-800\">Bhotch CRM</h1>\r\n              </div>\r\n              \r\n              <nav className=\"flex space-x-1\">\r\n                <button \r\n                  onClick={() => setCurrentView('dashboard')} \r\n                  className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n                    currentView === 'dashboard' \r\n                      ? 'bg-blue-100 text-blue-700' \r\n                      : 'text-gray-600 hover:bg-gray-100'\r\n                  }`}\r\n                >\r\n                  <BarChart3 size={20} className=\"inline mr-2\" />\r\n                  Dashboard\r\n                </button>\r\n                <button \r\n                  onClick={() => setCurrentView('leads')} \r\n                  className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n                    currentView === 'leads' \r\n                      ? 'bg-blue-100 text-blue-700' \r\n                      : 'text-gray-600 hover:bg-gray-100'\r\n                  }`}\r\n                >\r\n                  <Users size={20} className=\"inline mr-2\" />\r\n                  Leads\r\n                </button>\r\n                <button \r\n                  onClick={() => setCurrentView('map')} \r\n                  className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n                    currentView === 'map' \r\n                      ? 'bg-blue-100 text-blue-700' \r\n                      : 'text-gray-600 hover:bg-gray-100'\r\n                  }`}\r\n                >\r\n                  <MapPin size={20} className=\"inline mr-2\" />\r\n                  Map\r\n                </button>\r\n                <button \r\n                  onClick={() => setCurrentView('calendar')} \r\n                  className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n                    currentView === 'calendar' \r\n                      ? 'bg-blue-100 text-blue-700' \r\n                      : 'text-gray-600 hover:bg-gray-100'\r\n                  }`}\r\n                >\r\n                  <Calendar size={20} className=\"inline mr-2\" />\r\n                  Calendar\r\n                </button>\r\n              </nav>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center space-x-3\">\r\n              <button \r\n                onClick={() => loadLeadsData(true)} \r\n                disabled={refreshing}\r\n                className=\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50\"\r\n              >\r\n                <RefreshCw size={20} className={refreshing ? 'animate-spin' : ''} />\r\n              </button>\r\n              <button \r\n                onClick={() => setShowAddForm(true)} \r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium\"\r\n              >\r\n                <Plus size={20} className=\"inline mr-1\" />\r\n                Add Lead\r\n              </button>\r\n              <button \r\n                onClick={handleLogout}\r\n                className=\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                title=\"Logout\"\r\n              >\r\n                <XCircle size={20} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Notifications */}\r\n      <div className=\"fixed top-20 right-4 z-50 space-y-2\">\r\n        {notifications.map(notif => (\r\n          <div \r\n            key={notif.id} \r\n            className={`p-4 rounded-lg shadow-lg transition-all transform animate-slide-in-right ${\r\n              notif.type === 'success' ? 'bg-green-500 text-white' :\r\n              notif.type === 'error' ? 'bg-red-500 text-white' :\r\n              'bg-blue-500 text-white'\r\n            }`}\r\n          >\r\n            <div className=\"flex items-center\">\r\n              {notif.type === 'success' && <CheckCircle className=\"mr-2\" size={20} />}\r\n              {notif.type === 'error' && <AlertCircle className=\"mr-2\" size={20} />}\r\n              <span className=\"font-medium\">{notif.message}</span>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"h-[calc(100vh-73px)]\">\r\n        {currentView === 'dashboard' && <Dashboard leads={filteredLeads} />}\r\n        \r\n        {currentView === 'leads' && (\r\n          <div className=\"p-6 bg-gray-50 min-h-full\">\r\n            <div className=\"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n              <div>\r\n                <h2 className=\"text-2xl font-bold text-gray-800\">All Leads</h2>\r\n                <p className=\"text-gray-600 mt-1\">{filteredLeads.length} total leads</p>\r\n              </div>\r\n              <div className=\"flex gap-3 w-full sm:w-auto\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search leads...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"px-4 py-2 border border-gray-300 rounded-lg flex-1 sm:w-64 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n                <select\r\n                  value={filterQuality}\r\n                  onChange={(e) => setFilterQuality(e.target.value)}\r\n                  className=\"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  <option value=\"all\">All Quality</option>\r\n                  <option value=\"Hot\">Hot</option>\r\n                  <option value=\"Warm\">Warm</option>\r\n                  <option value=\"Cold\">Cold</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden\">\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full\">\r\n                  <thead className=\"bg-gray-50 border-b\">\r\n                    <tr>\r\n                      <th className=\"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Name</th>\r\n                      <th className=\"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Address</th>\r\n                      <th className=\"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Phone</th>\r\n                      <th className=\"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Quality</th>\r\n                      <th className=\"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Status</th>\r\n                      <th className=\"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Quote</th>\r\n                      <th className=\"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody className=\"divide-y divide-gray-100\">\r\n                    {filteredLeads.map(lead => (\r\n                      <tr key={lead.id} className=\"hover:bg-gray-50 transition-colors\">\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <div className=\"font-medium text-gray-900\">{lead.customerName}</div>\r\n                          <div className=\"text-sm text-gray-500\">{lead.email}</div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4\">\r\n                          <div className=\"text-sm text-gray-900\">{lead.address}</div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                          {lead.phoneNumber || '-'}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className={`px-3 py-1 rounded-full text-xs font-medium ${\r\n                            lead.quality === 'Hot' ? 'bg-red-100 text-red-800' :\r\n                            lead.quality === 'Warm' ? 'bg-yellow-100 text-yellow-800' :\r\n                            'bg-gray-100 text-gray-800'\r\n                          }`}>\r\n                            {lead.quality}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\r\n                            {lead.leadStatus || 'New'}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className=\"text-sm font-semibold text-green-600\">\r\n                            {lead.dabellaQuote ? `$${parseFloat(lead.dabellaQuote).toLocaleString()}` : '-'}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            <button \r\n                              onClick={() => setEditingLead(lead)} \r\n                              className=\"text-blue-600 hover:text-blue-800 transition-colors\"\r\n                              title=\"Edit\"\r\n                            >\r\n                              <Edit2 size={18} />\r\n                            </button>\r\n                            <button \r\n                              onClick={() => handleDeleteLead(lead.id)} \r\n                              className=\"text-red-600 hover:text-red-800 transition-colors\"\r\n                              title=\"Delete\"\r\n                            >\r\n                              <Trash2 size={18} />\r\n                            </button>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n                \r\n                {filteredLeads.length === 0 && (\r\n                  <div className=\"text-center py-12\">\r\n                    <Users className=\"h-12 w-12 text-gray-300 mx-auto mb-4\" />\r\n                    <p className=\"text-gray-500\">No leads found</p>\r\n                    <p className=\"text-gray-400 text-sm mt-1\">Try adjusting your search filters</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {currentView === 'map' && <InteractiveMapView leads={filteredLeads} />}\r\n        {currentView === 'calendar' && <CalendarView />}\r\n      </main>\r\n\r\n      {/* Forms */}\r\n      {showAddForm && (\r\n        <LeadForm onSubmit={handleAddLead} onCancel={() => setShowAddForm(false)} />\r\n      )}\r\n      \r\n      {editingLead && (\r\n        <LeadForm lead={editingLead} onSubmit={handleUpdateLead} onCancel={() => setEditingLead(null)} />\r\n      )}\r\n      \r\n      <style jsx>{`\r\n        @keyframes slide-in-right {\r\n          from {\r\n            transform: translateX(100%);\r\n            opacity: 0;\r\n          }\r\n          to {\r\n            transform: translateX(0);\r\n            opacity: 1;\r\n          }\r\n        }\r\n        \r\n        .animate-slide-in-right {\r\n          animation: slide-in-right 0.3s ease-out;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"iIAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,OAAO,CAAEC,WAAW,CAAEC,MAAM,KAAQ,OAAO,CAChF,OAASC,MAAM,CAAEC,QAAQ,CAAEC,IAAI,CAAEC,KAAK,CAAEC,MAAM,CAAEC,UAAU,CAAEC,aAAa,CAAEC,WAAW,CAAEC,WAAW,CAAEC,KAAK,CAAEC,IAAI,CAAEC,KAAK,CAAEC,IAAI,CAAEC,SAAS,CAAEC,CAAC,CAAEC,IAAI,CAAEC,GAAG,CAAEC,SAAS,CAAEC,MAAM,CAAEC,UAAU,CAAEC,aAAa,CAAEC,GAAG,CAAEC,OAAO,CAAEC,WAAW,CAAEC,UAAU,CAAEC,KAAK,CAAEC,SAAS,CAAEC,QAAQ,CAAEC,OAAO,CAAEC,GAAG,CAAEC,MAAM,KAAQ,cAAc,CACnT,OAASC,aAAa,KAAQ,cAAc,CAC5C,OAASC,OAAO,CAAEC,0BAA0B,KAAQ,eAAe,CAEnE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBACA,KAAM,CAAAC,cAAc,CAAG,CACrBC,MAAM,CAAE,yCAAyC,CACjDC,UAAU,CAAE,mCAAmC,CAC/CC,SAAS,CAAE,mBAAmB,CAC9BC,aAAa,CAAE,uCAAuC,CACtDC,iBAAiB,CAAE,cAAc,CACjCC,KAAK,CAAE,2CAA2C,CAClDC,aAAa,CAAE,cACjB,CAAC,CAED,KAAM,CAAAC,GAAG,CAAGjB,aAAa,CAACS,cAAc,CAAC,CACzC,KAAM,CAAAS,IAAI,CAAGjB,OAAO,CAACgB,GAAG,CAAC,CAEzB;AACA,KAAM,CAAAE,mBAAmB,CAAG,yCAAyC,CAAE;AAEvE;AACA,KAAM,CAAAC,mBAAoB,CACxBC,WAAWA,CAAA,CAAG,CACZ,IAAI,CAACC,OAAO,CAAG,oHAAoH,CACrI,CAEA,KAAM,CAAAC,WAAWA,CAACC,MAAM,CAAEC,OAAO,CAAE,CACjC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,IAAI,CAACL,OAAO,CAAE,CACzCM,MAAM,CAAE,MAAM,CACdC,IAAI,CAAE,MAAM,CACZC,WAAW,CAAE,MAAM,CACnBC,OAAO,CAAE,CACP,cAAc,CAAE,0BAA0B,CAC1C,QAAQ,CAAE,kBACZ,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAAC,aAAA,EAAGX,MAAM,EAAKC,OAAO,CAAE,CAC7C,CAAC,CAAC,CAEF,KAAM,CAAAW,IAAI,CAAG,KAAM,CAAAV,QAAQ,CAACU,IAAI,CAAC,CAAC,CAClC,GAAI,CACF,MAAO,CAAAH,IAAI,CAACI,KAAK,CAACD,IAAI,CAAC,CACzB,CAAE,MAAAE,OAAA,CAAM,CACNC,OAAO,CAACC,IAAI,CAAC,2BAA2B,CAAEJ,IAAI,CAAC,CAC/C,MAAO,CAAEK,OAAO,CAAE,KAAK,CAAEC,OAAO,CAAE,yBAA0B,CAAC,CAC/D,CACF,CAAE,MAAOC,KAAK,CAAE,CACdJ,OAAO,CAACI,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CACtC,MAAO,CAAEF,OAAO,CAAE,KAAK,CAAEC,OAAO,CAAEC,KAAK,CAACD,OAAQ,CAAC,CACnD,CACF,CAEA,KAAM,CAAAE,UAAUA,CAAA,CAAG,CACjB,GAAI,CACF,KAAM,CAAAC,GAAG,IAAAC,MAAA,CAAM,IAAI,CAACxB,OAAO,gCAAAwB,MAAA,CAA8BC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAE,CAErE,KAAM,CAAAtB,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACkB,GAAG,CAAE,CAChCjB,MAAM,CAAE,KAAK,CACbC,IAAI,CAAE,MAAM,CACZC,WAAW,CAAE,MAAM,CACnBC,OAAO,CAAE,CACP,QAAQ,CAAE,kBACZ,CACF,CAAC,CAAC,CAEF,GAAI,CAACL,QAAQ,CAACuB,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,wBAAAJ,MAAA,CAAwBpB,QAAQ,CAACyB,MAAM,CAAE,CAAC,CAC3D,CAEA,KAAM,CAAAf,IAAI,CAAG,KAAM,CAAAV,QAAQ,CAACU,IAAI,CAAC,CAAC,CAClC,KAAM,CAAAgB,IAAI,CAAGnB,IAAI,CAACI,KAAK,CAACD,IAAI,CAAC,CAE7B,GAAIgB,IAAI,CAACX,OAAO,GAAK,KAAK,CAAE,CAC1B,KAAM,IAAI,CAAAS,KAAK,CAACE,IAAI,CAACV,OAAO,EAAI,uBAAuB,CAAC,CAC1D,CAEA,MAAO,CAAAU,IAAI,CAACC,KAAK,EAAI,EAAE,CACzB,CAAE,MAAOV,KAAK,CAAE,CACdJ,OAAO,CAACI,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9C,KAAM,CAAAA,KAAK,CACb,CACF,CAEA,KAAM,CAAAW,OAAOA,CAACC,IAAI,CAAE,CAClB,MAAO,KAAI,CAAChC,WAAW,CAAC,SAAS,CAAE,CAAEgC,IAAK,CAAC,CAAC,CAC9C,CAEA,KAAM,CAAAC,UAAUA,CAACD,IAAI,CAAE,CACrB,MAAO,KAAI,CAAChC,WAAW,CAAC,YAAY,CAAE,CAAEgC,IAAK,CAAC,CAAC,CACjD,CAEA,KAAM,CAAAE,UAAUA,CAACC,MAAM,CAAE,CACvB,MAAO,KAAI,CAACnC,WAAW,CAAC,YAAY,CAAE,CAAEmC,MAAO,CAAC,CAAC,CACnD,CAEA,KAAM,CAAAC,cAAcA,CAACC,OAAO,CAAE,CAC5B,MAAO,KAAI,CAACrC,WAAW,CAAC,aAAa,CAAE,CAAEqC,OAAQ,CAAC,CAAC,CACrD,CACF,CAEA,KAAM,CAAAC,mBAAmB,CAAG,GAAI,CAAAzC,mBAAmB,CAAC,CAAC,CAErD;AACA,QAAS,CAAA0C,SAASA,CAAAC,IAAA,CAAc,IAAb,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CAC5B,KAAM,CAACjC,WAAW,CAAEmC,cAAc,CAAC,CAAGrG,QAAQ,CAAC,CAAEsG,KAAK,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CAC3E,KAAM,CAACxB,KAAK,CAAEyB,QAAQ,CAAC,CAAGxG,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACyG,OAAO,CAAEC,UAAU,CAAC,CAAG1G,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAA2G,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAACzC,WAAW,CAACoC,KAAK,EAAI,CAACpC,WAAW,CAACqC,QAAQ,CAAE,CAC/CC,QAAQ,CAAC,iCAAiC,CAAC,CAC3C,OACF,CAEAE,UAAU,CAAC,IAAI,CAAC,CAChBF,QAAQ,CAAC,EAAE,CAAC,CAEZ,GAAI,CACF,KAAM,CAAAlE,0BAA0B,CAACgB,IAAI,CAAEY,WAAW,CAACoC,KAAK,CAAEpC,WAAW,CAACqC,QAAQ,CAAC,CAC/EK,cAAc,CAACC,OAAO,CAAC,iBAAiB,CAAE,MAAM,CAAC,CACjDT,OAAO,CAAC,IAAI,CAAC,CACf,CAAE,MAAOrB,KAAK,CAAE,CACdyB,QAAQ,CAAC,2BAA2B,CAAC,CACvC,CAAC,OAAS,CACRE,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAI,cAAc,CAAIC,CAAC,EAAK,CAC5B,GAAIA,CAAC,CAACC,GAAG,GAAK,OAAO,CAAE,CACrBL,YAAY,CAAC,CAAC,CAChB,CACF,CAAC,CAED,mBACEnE,IAAA,QAAKyE,SAAS,CAAC,4FAA4F,CAAAC,QAAA,cACzGxE,KAAA,QAAKuE,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDxE,KAAA,QAAKuE,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B1E,IAAA,QAAKyE,SAAS,CAAC,kFAAkF,CAAAC,QAAA,cAC/F1E,IAAA,CAACzB,IAAI,EAACkG,SAAS,CAAC,yBAAyB,CAAE,CAAC,CACzC,CAAC,cACNzE,IAAA,OAAIyE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,YAAU,CAAI,CAAC,cAChE1E,IAAA,MAAGyE,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,8BAA4B,CAAG,CAAC,EACvE,CAAC,CAELnC,KAAK,eACJvC,IAAA,QAAKyE,SAAS,CAAC,0EAA0E,CAAAC,QAAA,CACtFnC,KAAK,CACH,CACN,cAEDrC,KAAA,QAAKuE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB1E,IAAA,UACE2E,IAAI,CAAC,OAAO,CACZC,WAAW,CAAC,OAAO,CACnBC,KAAK,CAAEnD,WAAW,CAACoC,KAAM,CACzBgB,QAAQ,CAAGP,CAAC,EAAKV,cAAc,CAAA9B,aAAA,CAAAA,aAAA,IAAKL,WAAW,MAAEoC,KAAK,CAAES,CAAC,CAACQ,MAAM,CAACF,KAAK,EAAC,CAAE,CACzEG,UAAU,CAAEV,cAAe,CAC3BG,SAAS,CAAC,iIAAiI,CAC5I,CAAC,cACFzE,IAAA,UACE2E,IAAI,CAAC,UAAU,CACfC,WAAW,CAAC,UAAU,CACtBC,KAAK,CAAEnD,WAAW,CAACqC,QAAS,CAC5Be,QAAQ,CAAGP,CAAC,EAAKV,cAAc,CAAA9B,aAAA,CAAAA,aAAA,IAAKL,WAAW,MAAEqC,QAAQ,CAAEQ,CAAC,CAACQ,MAAM,CAACF,KAAK,EAAC,CAAE,CAC5EG,UAAU,CAAEV,cAAe,CAC3BG,SAAS,CAAC,iIAAiI,CAC5I,CAAC,cACFzE,IAAA,WACEiF,OAAO,CAAEd,YAAa,CACtBe,QAAQ,CAAEjB,OAAQ,CAClBQ,SAAS,CAAC,gLAAgL,CAAAC,QAAA,CAEzLT,OAAO,cACN/D,KAAA,CAAAE,SAAA,EAAAsE,QAAA,eACE1E,IAAA,CAACP,OAAO,EAACgF,SAAS,CAAC,2BAA2B,CAAE,CAAC,gBAEnD,EAAE,CAAC,CAEH,SACD,CACK,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAEA;AACA,QAAS,CAAAU,kBAAkBA,CAAAC,KAAA,CAAY,IAAX,CAAEnC,KAAM,CAAC,CAAAmC,KAAA,CACnC,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAG9H,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAAC+H,SAAS,CAAEC,YAAY,CAAC,CAAGhI,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACiI,QAAQ,CAAEC,WAAW,CAAC,CAAGlI,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAAAmI,MAAM,CAAG/H,MAAM,CAAC,IAAI,CAAC,CAC3B,KAAM,CAAAgI,cAAc,CAAGhI,MAAM,CAAC,IAAI,CAAC,CACnC,KAAM,CAAAiI,UAAU,CAAGjI,MAAM,CAAC,EAAE,CAAC,CAC7B,KAAM,CAAAkI,aAAa,CAAGlI,MAAM,CAAC,IAAI,CAAC,CAElC;AACAH,SAAS,CAAC,IAAM,CACd,KAAM,CAAAsI,OAAO,CAAGA,CAAA,GAAM,CACpB,GAAI,CAACC,MAAM,CAACC,MAAM,EAAI,CAACN,MAAM,CAACO,OAAO,CAAE,OAEvC,KAAM,CAAAC,UAAU,CAAG,CACjBC,IAAI,CAAE,EAAE,CACRC,MAAM,CAAE,CAAEC,GAAG,CAAE,OAAO,CAAEC,GAAG,CAAE,CAAC,QAAS,CAAC,CAAE;AAC1CC,SAAS,CAAE,SAAS,CACpBC,cAAc,CAAE,IAAI,CACpBC,iBAAiB,CAAE,IAAI,CACvBC,iBAAiB,CAAE,IAAI,CACvBC,WAAW,CAAE,IACf,CAAC,CAEDhB,cAAc,CAACM,OAAO,CAAG,GAAI,CAAAF,MAAM,CAACC,MAAM,CAACY,IAAI,CAACnH,GAAG,CAACiG,MAAM,CAACO,OAAO,CAAEC,UAAU,CAAC,CAC/EL,aAAa,CAACI,OAAO,CAAG,GAAI,CAAAF,MAAM,CAACC,MAAM,CAACY,IAAI,CAACC,UAAU,CAAC,CAAC,CAC7D,CAAC,CAED,GAAI,CAACd,MAAM,CAACC,MAAM,EAAI,CAACV,SAAS,CAAE,CAChC,KAAM,CAAAwB,MAAM,CAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAC/CF,MAAM,CAACG,GAAG,gDAAAxE,MAAA,CAAkD3B,mBAAmB,qBAAmB,CAClGgG,MAAM,CAACI,KAAK,CAAG,IAAI,CACnBJ,MAAM,CAACK,KAAK,CAAG,IAAI,CAEnBL,MAAM,CAACM,MAAM,CAAG,IAAM,CACpB7B,YAAY,CAAC,IAAI,CAAC,CAClBO,OAAO,CAAC,CAAC,CACX,CAAC,CAEDgB,MAAM,CAACO,OAAO,CAAG,IAAM,CACrB5B,WAAW,CAAC,wDAAwD,CAAC,CACvE,CAAC,CAEDsB,QAAQ,CAACO,IAAI,CAACC,WAAW,CAACT,MAAM,CAAC,CACnC,CAAC,IAAM,IAAIf,MAAM,CAACC,MAAM,EAAI,CAACL,cAAc,CAACM,OAAO,CAAE,CACnDV,YAAY,CAAC,IAAI,CAAC,CAClBO,OAAO,CAAC,CAAC,CACX,CACF,CAAC,CAAE,EAAE,CAAC,CAAE;AAER;AACAtI,SAAS,CAAC,IAAM,CACd,GAAI,CAACmI,cAAc,CAACM,OAAO,EAAI,CAACjD,KAAK,CAACwE,MAAM,CAAE,OAE9C;AACA5B,UAAU,CAACK,OAAO,CAACwB,OAAO,CAACC,MAAM,EAAIA,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC,CAAC,CACzD/B,UAAU,CAACK,OAAO,CAAG,EAAE,CAEvB,KAAM,CAAA2B,MAAM,CAAG,GAAI,CAAA7B,MAAM,CAACC,MAAM,CAACY,IAAI,CAACiB,YAAY,CAAC,CAAC,CACpD,GAAI,CAAAC,eAAe,CAAG,KAAK,CAE3B9E,KAAK,CAACyE,OAAO,CAACvE,IAAI,EAAI,CACpB,GAAIA,IAAI,CAAC6E,QAAQ,EAAI7E,IAAI,CAAC8E,SAAS,CAAE,CACnC,KAAM,CAAA3B,GAAG,CAAG4B,UAAU,CAAC/E,IAAI,CAAC6E,QAAQ,CAAC,CACrC,KAAM,CAAAzB,GAAG,CAAG2B,UAAU,CAAC/E,IAAI,CAAC8E,SAAS,CAAC,CAEtC,GAAI,CAACE,KAAK,CAAC7B,GAAG,CAAC,EAAI,CAAC6B,KAAK,CAAC5B,GAAG,CAAC,CAAE,CAC9B,KAAM,CAAA6B,QAAQ,CAAG,CAAE9B,GAAG,CAAEC,GAAI,CAAC,CAE7B,KAAM,CAAAoB,MAAM,CAAG,GAAI,CAAA3B,MAAM,CAACC,MAAM,CAACY,IAAI,CAACwB,MAAM,CAAC,CAC3CD,QAAQ,CACRE,GAAG,CAAE1C,cAAc,CAACM,OAAO,CAC3BqC,KAAK,CAAEpF,IAAI,CAACqF,YAAY,CACxBC,IAAI,CAAE,CACJhG,GAAG,CAAE,sDAAsD,CAC3DiG,UAAU,CAAE,GAAI,CAAA1C,MAAM,CAACC,MAAM,CAACY,IAAI,CAAC8B,IAAI,CAAC,EAAE,CAAE,EAAE,CAChD,CAAC,CACDC,SAAS,CAAE5C,MAAM,CAACC,MAAM,CAACY,IAAI,CAACgC,SAAS,CAACC,IAC1C,CAAC,CAAC,CAEF;AACA,KAAM,CAAAC,aAAa,wQAAArG,MAAA,CAGXS,IAAI,CAACqF,YAAY,iNAAA9F,MAAA,CAIcS,IAAI,CAACK,OAAO,EAAI,KAAK,mKAAAd,MAAA,CAGvBS,IAAI,CAAC6F,WAAW,EAAI,KAAK,mKAAAtG,MAAA,CAGzBS,IAAI,CAACW,KAAK,EAAI,KAAK,iSAAApB,MAAA,CAK9CS,IAAI,CAAC8F,OAAO,GAAK,KAAK,CAAG,SAAS,CAClC9F,IAAI,CAAC8F,OAAO,GAAK,MAAM,CAAG,SAAS,CAAG,SAAS,cAAAvG,MAAA,CAE/CS,IAAI,CAAC8F,OAAO,GAAK,KAAK,CAAG,SAAS,CAClC9F,IAAI,CAAC8F,OAAO,GAAK,MAAM,CAAG,SAAS,CAAG,SAAS,+BAAAvG,MAAA,CAE7CS,IAAI,CAAC8F,OAAO,EAAI,MAAM,wEAAAvG,MAAA,CAG1BS,IAAI,CAAC+F,UAAU,6HAAAxG,MAAA,CAEiBS,IAAI,CAAC+F,UAAU,6BACvC,EAAE,uBAAAxG,MAAA,CAEVS,IAAI,CAACgG,YAAY,4HAAAzG,MAAA,CAEcwF,UAAU,CAAC/E,IAAI,CAACgG,YAAY,CAAC,CAACC,cAAc,CAAC,CAAC,6BACrE,EAAE,uBAAA1G,MAAA,CAEVS,IAAI,CAACkG,KAAK,oKAAA3G,MAAA,CAEkBS,IAAI,CAACkG,KAAK,CAACC,SAAS,CAAC,CAAC,CAAE,GAAG,CAAC,EAAA5G,MAAA,CAAGS,IAAI,CAACkG,KAAK,CAAC5B,MAAM,CAAG,GAAG,CAAG,KAAK,CAAG,EAAE,6BACvF,EAAE,0DAIjB,CAEDE,MAAM,CAAC4B,WAAW,CAAC,OAAO,CAAE,IAAM,CAChCzD,aAAa,CAACI,OAAO,CAACsD,UAAU,CAACT,aAAa,CAAC,CAC/CjD,aAAa,CAACI,OAAO,CAACuD,IAAI,CAAC7D,cAAc,CAACM,OAAO,CAAEyB,MAAM,CAAC,CAC1DrC,eAAe,CAACnC,IAAI,CAAC,CAErB;AACAyC,cAAc,CAACM,OAAO,CAACwD,OAAO,CAAC,EAAE,CAAC,CAClC9D,cAAc,CAACM,OAAO,CAACyD,SAAS,CAAChC,MAAM,CAACiC,WAAW,CAAC,CAAC,CAAC,CACxD,CAAC,CAAC,CAEF/D,UAAU,CAACK,OAAO,CAAC2D,IAAI,CAAClC,MAAM,CAAC,CAC/BE,MAAM,CAACiC,MAAM,CAAC1B,QAAQ,CAAC,CACvBL,eAAe,CAAG,IAAI,CACxB,CACF,CACF,CAAC,CAAC,CAEF;AACA,GAAIA,eAAe,CAAE,CACnBnC,cAAc,CAACM,OAAO,CAAC6D,SAAS,CAAClC,MAAM,CAAC,CAExC;AACA,KAAM,CAAAmC,QAAQ,CAAGhE,MAAM,CAACC,MAAM,CAACY,IAAI,CAACoD,KAAK,CAACV,WAAW,CAAC3D,cAAc,CAACM,OAAO,CAAE,MAAM,CAAE,UAAW,CAC/F,GAAIN,cAAc,CAACM,OAAO,CAACgE,OAAO,CAAC,CAAC,CAAG,EAAE,CAAE,CACzCtE,cAAc,CAACM,OAAO,CAACwD,OAAO,CAAC,EAAE,CAAC,CACpC,CACA1D,MAAM,CAACC,MAAM,CAACY,IAAI,CAACoD,KAAK,CAACE,cAAc,CAACH,QAAQ,CAAC,CACnD,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAAC/G,KAAK,CAAEsC,SAAS,CAAED,eAAe,CAAC,CAAC,CAAE;AAEzC,mBACEpF,KAAA,QAAKuE,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCxE,KAAA,QAAKuE,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9B1E,IAAA,QAAKoK,GAAG,CAAEzE,MAAO,CAAClB,SAAS,CAAC,eAAe,CAAM,CAAC,CAEjD,CAACc,SAAS,EAAI,CAACE,QAAQ,eACtBzF,IAAA,QAAKyE,SAAS,CAAC,4DAA4D,CAAAC,QAAA,cACzExE,KAAA,QAAKuE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B1E,IAAA,CAACP,OAAO,EAACgF,SAAS,CAAC,mDAAmD,CAAE,CAAC,cACzEzE,IAAA,MAAGyE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,gBAAc,CAAG,CAAC,EAC5C,CAAC,CACH,CACN,CAEAe,QAAQ,eACPzF,IAAA,QAAKyE,SAAS,CAAC,4DAA4D,CAAAC,QAAA,cACzExE,KAAA,QAAKuE,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnC1E,IAAA,CAAC5B,WAAW,EAACqG,SAAS,CAAC,qCAAqC,CAAE,CAAC,cAC/DzE,IAAA,MAAGyE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,mBAAiB,CAAG,CAAC,cACrE1E,IAAA,MAAGyE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAEe,QAAQ,CAAI,CAAC,EAChD,CAAC,CACH,CACN,cAGDzF,IAAA,QAAKyE,SAAS,CAAC,yDAAyD,CAAAC,QAAA,cACtExE,KAAA,QAAKuE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CxE,KAAA,QAAKuE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B1E,IAAA,MAAGyE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAEzB,KAAK,CAACoH,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACtC,QAAQ,EAAIsC,CAAC,CAACrC,SAAS,CAAC,CAACR,MAAM,CAAI,CAAC,cACzGzH,IAAA,MAAGyE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,cAAY,CAAG,CAAC,EAClD,CAAC,cACNxE,KAAA,QAAKuE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B1E,IAAA,MAAGyE,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAEzB,KAAK,CAACoH,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACrB,OAAO,GAAK,KAAK,CAAC,CAACxB,MAAM,CAAI,CAAC,cAClGzH,IAAA,MAAGyE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,WAAS,CAAG,CAAC,EAC/C,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,CAELW,YAAY,eACXrF,IAAA,QAAKyE,SAAS,CAAC,yCAAyC,CAAAC,QAAA,cACtDxE,KAAA,QAAKuE,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBxE,KAAA,QAAKuE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpD1E,IAAA,OAAIyE,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAEW,YAAY,CAACmD,YAAY,CAAK,CAAC,cAChFxI,IAAA,WACEiF,OAAO,CAAEA,CAAA,GAAMK,eAAe,CAAC,IAAI,CAAE,CACrCb,SAAS,CAAC,mCAAmC,CAAAC,QAAA,cAE7C1E,IAAA,CAACrB,CAAC,EAAC4L,IAAI,CAAE,EAAG,CAAE,CAAC,CACT,CAAC,EACN,CAAC,cAENrK,KAAA,QAAKuE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBxE,KAAA,QAAKuE,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxC1E,IAAA,OAAIyE,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,qBAAmB,CAAI,CAAC,cACjFxE,KAAA,QAAKuE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCxE,KAAA,MAAAwE,QAAA,eAAG1E,IAAA,WAAA0E,QAAA,CAAQ,uBAAW,CAAQ,CAAC,IAAC,CAACW,YAAY,CAAC7B,OAAO,EAAI,CAAC,cAC1DtD,KAAA,MAAAwE,QAAA,eAAG1E,IAAA,WAAA0E,QAAA,CAAQ,qBAAS,CAAQ,CAAC,IAAC,CAACW,YAAY,CAAC2D,WAAW,EAAI,KAAK,EAAI,CAAC,cACrE9I,KAAA,MAAAwE,QAAA,eAAG1E,IAAA,WAAA0E,QAAA,CAAQ,qBAAS,CAAQ,CAAC,IAAC,CAACW,YAAY,CAACvB,KAAK,EAAI,KAAK,EAAI,CAAC,EAC5D,CAAC,EACH,CAAC,cAEN5D,KAAA,QAAKuE,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxC1E,IAAA,OAAIyE,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cAC1ExE,KAAA,QAAKuE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCxE,KAAA,MAAAwE,QAAA,eAAG1E,IAAA,WAAA0E,QAAA,CAAQ,UAAQ,CAAQ,CAAC,cAC1B1E,IAAA,SAAMyE,SAAS,+CAAA/B,MAAA,CACb2C,YAAY,CAAC4D,OAAO,GAAK,KAAK,CAAG,yBAAyB,CAC1D5D,YAAY,CAAC4D,OAAO,GAAK,MAAM,CAAG,+BAA+B,CACjE,2BAA2B,CAC1B,CAAAvE,QAAA,CACAW,YAAY,CAAC4D,OAAO,CACjB,CAAC,EACN,CAAC,cACJ/I,KAAA,MAAAwE,QAAA,eAAG1E,IAAA,WAAA0E,QAAA,CAAQ,SAAO,CAAQ,CAAC,IAAC,CAACW,YAAY,CAAC6D,UAAU,EAAI,KAAK,EAAI,CAAC,cAClEhJ,KAAA,MAAAwE,QAAA,eAAG1E,IAAA,WAAA0E,QAAA,CAAQ,SAAO,CAAQ,CAAC,IAAC,CAACW,YAAY,CAACmF,UAAU,EAAI,KAAK,EAAI,CAAC,CACjEnF,YAAY,CAAC8D,YAAY,eACxBjJ,KAAA,MAAGuE,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eACzC1E,IAAA,WAAA0E,QAAA,CAAQ,QAAM,CAAQ,CAAC,KAAE,CAACwD,UAAU,CAAC7C,YAAY,CAAC8D,YAAY,CAAC,CAACC,cAAc,CAAC,CAAC,EAC/E,CACJ,EACE,CAAC,EACH,CAAC,CAEL/D,YAAY,CAACgE,KAAK,eACjBnJ,KAAA,QAAKuE,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxC1E,IAAA,OAAIyE,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,OAAK,CAAI,CAAC,cACnE1E,IAAA,MAAGyE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAEW,YAAY,CAACgE,KAAK,CAAI,CAAC,EAC1D,CACN,EACE,CAAC,EACH,CAAC,CACH,CACN,EACE,CAAC,CAEV,CAEA;AACA,QAAS,CAAAoB,YAAYA,CAAA,CAAG,CACtB,mBACEvK,KAAA,QAAKuE,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9B1E,IAAA,QAAKyE,SAAS,CAAC,yBAAyB,CAAAC,QAAA,cACtCxE,KAAA,QAAKuE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDxE,KAAA,QAAAwE,QAAA,eACE1E,IAAA,OAAIyE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,UAAQ,CAAI,CAAC,cAC9D1E,IAAA,MAAGyE,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,mCAAiC,CAAG,CAAC,EAC5E,CAAC,cACN1E,IAAA,QAAKyE,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7BxE,KAAA,WAAQuE,SAAS,CAAC,iFAAiF,CAAAC,QAAA,eACjG1E,IAAA,CAACjC,IAAI,EAACwM,IAAI,CAAE,EAAG,CAAC9F,SAAS,CAAC,aAAa,CAAE,CAAC,aAC5C,EAAQ,CAAC,CACN,CAAC,EACH,CAAC,CACH,CAAC,cAENzE,IAAA,QAAKyE,SAAS,CAAC,0BAA0B,CAAAC,QAAA,cACvC1E,IAAA,WACEkH,GAAG,CAAC,gOAAgO,CACpOwD,KAAK,CAAE,CAACC,MAAM,CAAE,mBAAmB,CAAEC,YAAY,CAAE,KAAK,CAAE,CAC1DC,KAAK,CAAC,MAAM,CACZC,MAAM,CAAC,MAAM,CACbC,WAAW,CAAC,GAAG,CACfC,SAAS,CAAC,IAAI,CACdzC,KAAK,CAAC,iBAAiB,CAChB,CAAC,CACP,CAAC,EACH,CAAC,CAEV,CAEA;AACA,QAAS,CAAA0C,SAASA,CAAAC,KAAA,CAAY,IAAX,CAAEjI,KAAM,CAAC,CAAAiI,KAAA,CAC1B,KAAM,CAAAC,KAAK,CAAGzN,OAAO,CAAC,IAAM,CAC1B,KAAM,CAAA0N,KAAK,CAAGnI,KAAK,CAACwE,MAAM,CAC1B,KAAM,CAAA4D,GAAG,CAAGpI,KAAK,CAACoH,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACrB,OAAO,GAAK,KAAK,CAAC,CAACxB,MAAM,CACzD,KAAM,CAAA6D,IAAI,CAAGrI,KAAK,CAACoH,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACrB,OAAO,GAAK,MAAM,CAAC,CAACxB,MAAM,CAC3D,KAAM,CAAA8D,IAAI,CAAGtI,KAAK,CAACoH,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACrB,OAAO,GAAK,MAAM,CAAC,CAACxB,MAAM,CAC3D,KAAM,CAAA+D,MAAM,CAAGvI,KAAK,CAACoH,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACnB,YAAY,EAAIjB,UAAU,CAACoC,CAAC,CAACnB,YAAY,CAAC,CAAG,CAAC,CAAC,CAAC1B,MAAM,CACzF,KAAM,CAAAgE,eAAe,CAAGxI,KAAK,CAACyI,MAAM,CAAC,CAACC,GAAG,CAAErB,CAAC,GAAKqB,GAAG,EAAIzD,UAAU,CAACoC,CAAC,CAACnB,YAAY,CAAC,EAAI,CAAC,CAAC,CAAE,CAAC,CAAC,CAC5F,KAAM,CAAAyC,MAAM,CAAG3I,KAAK,CAACoH,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACtC,QAAQ,EAAIsC,CAAC,CAACrC,SAAS,CAAC,CAACR,MAAM,CAElE,MAAO,CAAE2D,KAAK,CAAEC,GAAG,CAAEC,IAAI,CAAEC,IAAI,CAAEC,MAAM,CAAEC,eAAe,CAAEG,MAAO,CAAC,CACpE,CAAC,CAAE,CAAC3I,KAAK,CAAC,CAAC,CAEX,KAAM,CAAA4I,WAAW,CAAGnO,OAAO,CAAC,IAAM,CAChC,MAAO,CAAC,GAAGuF,KAAK,CAAC,CACd6I,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,GAAI,CAAArJ,IAAI,CAACqJ,CAAC,CAACC,WAAW,EAAI,CAAC,CAAC,CAAG,GAAI,CAAAtJ,IAAI,CAACoJ,CAAC,CAACE,WAAW,EAAI,CAAC,CAAC,CAAC,CAC3EC,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAChB,CAAC,CAAE,CAACjJ,KAAK,CAAC,CAAC,CAEX,mBACE/C,KAAA,QAAKuE,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxCxE,KAAA,QAAKuE,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB1E,IAAA,OAAIyE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,WAAS,CAAI,CAAC,cAC/D1E,IAAA,MAAGyE,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,0CAAwC,CAAG,CAAC,EAC3E,CAAC,cAENxE,KAAA,QAAKuE,SAAS,CAAC,2DAA2D,CAAAC,QAAA,eACxE1E,IAAA,QAAKyE,SAAS,CAAC,4FAA4F,CAAAC,QAAA,cACzGxE,KAAA,QAAKuE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDxE,KAAA,QAAAwE,QAAA,eACE1E,IAAA,MAAGyE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,aAAW,CAAG,CAAC,cAChE1E,IAAA,MAAGyE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAEyG,KAAK,CAACC,KAAK,CAAI,CAAC,EACnE,CAAC,cACNpL,IAAA,QAAKyE,SAAS,CAAC,4BAA4B,CAAAC,QAAA,cACzC1E,IAAA,CAACV,KAAK,EAACmF,SAAS,CAAC,uBAAuB,CAAE,CAAC,CACxC,CAAC,EACH,CAAC,CACH,CAAC,cAENzE,IAAA,QAAKyE,SAAS,CAAC,4FAA4F,CAAAC,QAAA,cACzGxE,KAAA,QAAKuE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDxE,KAAA,QAAAwE,QAAA,eACE1E,IAAA,MAAGyE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,WAAS,CAAG,CAAC,cAC9D1E,IAAA,MAAGyE,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CAAEyG,KAAK,CAACE,GAAG,CAAI,CAAC,EAChE,CAAC,cACNrL,IAAA,QAAKyE,SAAS,CAAC,2BAA2B,CAAAC,QAAA,cACxC1E,IAAA,CAACR,QAAQ,EAACiF,SAAS,CAAC,sBAAsB,CAAE,CAAC,CAC1C,CAAC,EACH,CAAC,CACH,CAAC,cAENzE,IAAA,QAAKyE,SAAS,CAAC,4FAA4F,CAAAC,QAAA,cACzGxE,KAAA,QAAKuE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDxE,KAAA,QAAAwE,QAAA,eACE1E,IAAA,MAAGyE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,cAAY,CAAG,CAAC,cACjE1E,IAAA,MAAGyE,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAEyG,KAAK,CAACK,MAAM,CAAI,CAAC,EACrE,CAAC,cACNxL,IAAA,QAAKyE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cAC1C1E,IAAA,CAACT,SAAS,EAACkF,SAAS,CAAC,wBAAwB,CAAE,CAAC,CAC7C,CAAC,EACH,CAAC,CACH,CAAC,cAENzE,IAAA,QAAKyE,SAAS,CAAC,4FAA4F,CAAAC,QAAA,cACzGxE,KAAA,QAAKuE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDxE,KAAA,QAAAwE,QAAA,eACE1E,IAAA,MAAGyE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,mBAAiB,CAAG,CAAC,cACtExE,KAAA,MAAGuE,SAAS,CAAC,yCAAyC,CAAAC,QAAA,EAAC,GAAC,CAACyG,KAAK,CAACM,eAAe,CAACrC,cAAc,CAAC,CAAC,EAAI,CAAC,EACjG,CAAC,cACNpJ,IAAA,QAAKyE,SAAS,CAAC,8BAA8B,CAAAC,QAAA,cAC3C1E,IAAA,CAAC9B,UAAU,EAACuG,SAAS,CAAC,yBAAyB,CAAE,CAAC,CAC/C,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,cAENvE,KAAA,QAAKuE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDxE,KAAA,QAAKuE,SAAS,CAAC,0DAA0D,CAAAC,QAAA,eACvE1E,IAAA,OAAIyE,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CAAC,mBAAiB,CAAI,CAAC,cAC3ExE,KAAA,QAAKuE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBxE,KAAA,QAAKuE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDxE,KAAA,QAAKuE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC1E,IAAA,QAAKyE,SAAS,CAAC,sCAAsC,CAAM,CAAC,cAC5DzE,IAAA,SAAMyE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,WAAS,CAAM,CAAC,EACjE,CAAC,cACN1E,IAAA,SAAMyE,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAEyG,KAAK,CAACE,GAAG,CAAO,CAAC,EACjE,CAAC,cACNnL,KAAA,QAAKuE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDxE,KAAA,QAAKuE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC1E,IAAA,QAAKyE,SAAS,CAAC,yCAAyC,CAAM,CAAC,cAC/DzE,IAAA,SAAMyE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,YAAU,CAAM,CAAC,EAClE,CAAC,cACN1E,IAAA,SAAMyE,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAEyG,KAAK,CAACG,IAAI,CAAO,CAAC,EAClE,CAAC,cACNpL,KAAA,QAAKuE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDxE,KAAA,QAAKuE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC1E,IAAA,QAAKyE,SAAS,CAAC,uCAAuC,CAAM,CAAC,cAC7DzE,IAAA,SAAMyE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,YAAU,CAAM,CAAC,EAClE,CAAC,cACN1E,IAAA,SAAMyE,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAEyG,KAAK,CAACI,IAAI,CAAO,CAAC,EAClE,CAAC,cACNrL,KAAA,QAAKuE,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eAC9DxE,KAAA,QAAKuE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC1E,IAAA,CAACnC,MAAM,EAAC4G,SAAS,CAAC,4BAA4B,CAAE,CAAC,cACjDzE,IAAA,SAAMyE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,cAAY,CAAM,CAAC,EACpE,CAAC,cACN1E,IAAA,SAAMyE,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAEyG,KAAK,CAACS,MAAM,CAAO,CAAC,EACpE,CAAC,EACH,CAAC,EACH,CAAC,cAEN1L,KAAA,QAAKuE,SAAS,CAAC,0DAA0D,CAAAC,QAAA,eACvE1E,IAAA,OAAIyE,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,cACzExE,KAAA,QAAKuE,SAAS,CAAC,WAAW,CAAAC,QAAA,EACvBmH,WAAW,CAACvD,GAAG,CAACnF,IAAI,eACnBjD,KAAA,QAAmBuE,SAAS,CAAC,iGAAiG,CAAAC,QAAA,eAC5HxE,KAAA,QAAKuE,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrB1E,IAAA,MAAGyE,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAEvB,IAAI,CAACqF,YAAY,CAAI,CAAC,cAChExI,IAAA,MAAGyE,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAEvB,IAAI,CAACK,OAAO,CAAI,CAAC,EAC7D,CAAC,cACNxD,IAAA,SAAMyE,SAAS,+CAAA/B,MAAA,CACbS,IAAI,CAAC8F,OAAO,GAAK,KAAK,CAAG,yBAAyB,CAClD9F,IAAI,CAAC8F,OAAO,GAAK,MAAM,CAAG,+BAA+B,CACzD,2BAA2B,CAC1B,CAAAvE,QAAA,CACAvB,IAAI,CAAC8F,OAAO,EAAI,MAAM,CACnB,CAAC,GAXC9F,IAAI,CAACgJ,EAYV,CACN,CAAC,CACDN,WAAW,CAACpE,MAAM,GAAK,CAAC,eACvBzH,IAAA,MAAGyE,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,iBAAe,CAAG,CACjE,EACE,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAEA;AACA,QAAS,CAAA0H,QAAQA,CAAAC,KAAA,CAA+B,IAA9B,CAAElJ,IAAI,CAAEmJ,QAAQ,CAAEC,QAAS,CAAC,CAAAF,KAAA,CAC5C,KAAM,CAACG,QAAQ,CAAEC,WAAW,CAAC,CAAGjP,QAAQ,CAAC,CACvCgL,YAAY,CAAE,CAAArF,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEqF,YAAY,GAAI,EAAE,CACtChF,OAAO,CAAE,CAAAL,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEK,OAAO,GAAI,EAAE,CAC5BwF,WAAW,CAAE,CAAA7F,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE6F,WAAW,GAAI,EAAE,CACpClF,KAAK,CAAE,CAAAX,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEW,KAAK,GAAI,EAAE,CACxBmF,OAAO,CAAE,CAAA9F,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE8F,OAAO,GAAI,MAAM,CAChCC,UAAU,CAAE,CAAA/F,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE+F,UAAU,GAAI,cAAc,CAC9CwD,WAAW,CAAE,CAAAvJ,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEuJ,WAAW,GAAI,EAAE,CACpCvD,YAAY,CAAE,CAAAhG,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEgG,YAAY,GAAI,EAAE,CACtCwD,QAAQ,CAAE,CAAAxJ,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEwJ,QAAQ,GAAI,EAAE,CAC9BC,OAAO,CAAE,CAAAzJ,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEyJ,OAAO,GAAI,EAAE,CAC5BC,gBAAgB,CAAE,CAAA1J,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE0J,gBAAgB,GAAI,EAAE,CAC9CxD,KAAK,CAAE,CAAAlG,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEkG,KAAK,GAAI,EAAE,CACxByD,YAAY,CAAE,CAAA3J,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE2J,YAAY,GAAI,EAAE,CACtCC,eAAe,CAAE,CAAA5J,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE4J,eAAe,GAAI,EAAE,CAC5CvC,UAAU,CAAE,CAAArH,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEqH,UAAU,GAAI,KAClC,CAAC,CAAC,CAEF,KAAM,CAAArG,YAAY,CAAGA,CAAA,GAAM,CACzB,GAAI,CAACqI,QAAQ,CAAChE,YAAY,EAAI,CAACgE,QAAQ,CAAChJ,OAAO,CAAE,CAC/CwJ,KAAK,CAAC,mDAAmD,CAAC,CAC1D,OACF,CACAV,QAAQ,CAAAvK,aAAA,CAAAA,aAAA,IAAMoB,IAAI,EAAKqJ,QAAQ,CAAE,CAAC,CACpC,CAAC,CAED,mBACExM,IAAA,QAAKyE,SAAS,CAAC,gFAAgF,CAAAC,QAAA,cAC7FxE,KAAA,QAAKuE,SAAS,CAAC,6EAA6E,CAAAC,QAAA,eAC1F1E,IAAA,QAAKyE,SAAS,CAAC,yBAAyB,CAAAC,QAAA,cACtCxE,KAAA,QAAKuE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD1E,IAAA,OAAIyE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAC7CvB,IAAI,CAAG,WAAW,CAAG,cAAc,CAClC,CAAC,cACLnD,IAAA,WACEiF,OAAO,CAAEsH,QAAS,CAClB9H,SAAS,CAAC,qDAAqD,CAAAC,QAAA,cAE/D1E,IAAA,CAACrB,CAAC,EAAC4L,IAAI,CAAE,EAAG,CAAE,CAAC,CACT,CAAC,EACN,CAAC,CACH,CAAC,cAENrK,KAAA,QAAKuE,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBxE,KAAA,QAAKuE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDxE,KAAA,QAAAwE,QAAA,eACE1E,IAAA,UAAOyE,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,iBAAe,CAAO,CAAC,cACvF1E,IAAA,UACE2E,IAAI,CAAC,MAAM,CACXE,KAAK,CAAE2H,QAAQ,CAAChE,YAAa,CAC7B1D,QAAQ,CAAGP,CAAC,EAAKkI,WAAW,CAAA1K,aAAA,CAAAA,aAAA,IAAKyK,QAAQ,MAAEhE,YAAY,CAAEjE,CAAC,CAACQ,MAAM,CAACF,KAAK,EAAC,CAAE,CAC1EJ,SAAS,CAAC,wGAAwG,CAClHG,WAAW,CAAC,UAAU,CACvB,CAAC,EACC,CAAC,cAEN1E,KAAA,QAAAwE,QAAA,eACE1E,IAAA,UAAOyE,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,WAAS,CAAO,CAAC,cACjF1E,IAAA,UACE2E,IAAI,CAAC,MAAM,CACXE,KAAK,CAAE2H,QAAQ,CAAChJ,OAAQ,CACxBsB,QAAQ,CAAGP,CAAC,EAAKkI,WAAW,CAAA1K,aAAA,CAAAA,aAAA,IAAKyK,QAAQ,MAAEhJ,OAAO,CAAEe,CAAC,CAACQ,MAAM,CAACF,KAAK,EAAC,CAAE,CACrEJ,SAAS,CAAC,wGAAwG,CAClHG,WAAW,CAAC,yBAAyB,CACtC,CAAC,EACC,CAAC,cAEN1E,KAAA,QAAAwE,QAAA,eACE1E,IAAA,UAAOyE,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,cAAY,CAAO,CAAC,cACpF1E,IAAA,UACE2E,IAAI,CAAC,KAAK,CACVE,KAAK,CAAE2H,QAAQ,CAACxD,WAAY,CAC5BlE,QAAQ,CAAGP,CAAC,EAAKkI,WAAW,CAAA1K,aAAA,CAAAA,aAAA,IAAKyK,QAAQ,MAAExD,WAAW,CAAEzE,CAAC,CAACQ,MAAM,CAACF,KAAK,EAAC,CAAE,CACzEJ,SAAS,CAAC,wGAAwG,CAClHG,WAAW,CAAC,gBAAgB,CAC7B,CAAC,EACC,CAAC,cAEN1E,KAAA,QAAAwE,QAAA,eACE1E,IAAA,UAAOyE,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,OAAK,CAAO,CAAC,cAC7E1E,IAAA,UACE2E,IAAI,CAAC,OAAO,CACZE,KAAK,CAAE2H,QAAQ,CAAC1I,KAAM,CACtBgB,QAAQ,CAAGP,CAAC,EAAKkI,WAAW,CAAA1K,aAAA,CAAAA,aAAA,IAAKyK,QAAQ,MAAE1I,KAAK,CAAES,CAAC,CAACQ,MAAM,CAACF,KAAK,EAAC,CAAE,CACnEJ,SAAS,CAAC,wGAAwG,CAClHG,WAAW,CAAC,kBAAkB,CAC/B,CAAC,EACC,CAAC,cAEN1E,KAAA,QAAAwE,QAAA,eACE1E,IAAA,UAAOyE,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,cAAY,CAAO,CAAC,cACpFxE,KAAA,WACE2E,KAAK,CAAE2H,QAAQ,CAACvD,OAAQ,CACxBnE,QAAQ,CAAGP,CAAC,EAAKkI,WAAW,CAAA1K,aAAA,CAAAA,aAAA,IAAKyK,QAAQ,MAAEvD,OAAO,CAAE1E,CAAC,CAACQ,MAAM,CAACF,KAAK,EAAC,CAAE,CACrEJ,SAAS,CAAC,wGAAwG,CAAAC,QAAA,eAElH1E,IAAA,WAAQ6E,KAAK,CAAC,MAAM,CAAAH,QAAA,CAAC,MAAI,CAAQ,CAAC,cAClC1E,IAAA,WAAQ6E,KAAK,CAAC,MAAM,CAAAH,QAAA,CAAC,MAAI,CAAQ,CAAC,cAClC1E,IAAA,WAAQ6E,KAAK,CAAC,KAAK,CAAAH,QAAA,CAAC,KAAG,CAAQ,CAAC,EAC1B,CAAC,EACN,CAAC,cAENxE,KAAA,QAAAwE,QAAA,eACE1E,IAAA,UAAOyE,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,aAAW,CAAO,CAAC,cACnFxE,KAAA,WACE2E,KAAK,CAAE2H,QAAQ,CAACtD,UAAW,CAC3BpE,QAAQ,CAAGP,CAAC,EAAKkI,WAAW,CAAA1K,aAAA,CAAAA,aAAA,IAAKyK,QAAQ,MAAEtD,UAAU,CAAE3E,CAAC,CAACQ,MAAM,CAACF,KAAK,EAAC,CAAE,CACxEJ,SAAS,CAAC,wGAAwG,CAAAC,QAAA,eAElH1E,IAAA,WAAQ6E,KAAK,CAAC,cAAc,CAAAH,QAAA,CAAC,cAAY,CAAQ,CAAC,cAClD1E,IAAA,WAAQ6E,KAAK,CAAC,UAAU,CAAAH,QAAA,CAAC,UAAQ,CAAQ,CAAC,cAC1C1E,IAAA,WAAQ6E,KAAK,CAAC,QAAQ,CAAAH,QAAA,CAAC,QAAM,CAAQ,CAAC,cACtC1E,IAAA,WAAQ6E,KAAK,CAAC,OAAO,CAAAH,QAAA,CAAC,OAAK,CAAQ,CAAC,cACpC1E,IAAA,WAAQ6E,KAAK,CAAC,cAAc,CAAAH,QAAA,CAAC,cAAY,CAAQ,CAAC,EAC5C,CAAC,EACN,CAAC,cAENxE,KAAA,QAAAwE,QAAA,eACE1E,IAAA,UAAOyE,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,cAAY,CAAO,CAAC,cACpF1E,IAAA,UACE2E,IAAI,CAAC,QAAQ,CACbE,KAAK,CAAE2H,QAAQ,CAACrD,YAAa,CAC7BrE,QAAQ,CAAGP,CAAC,EAAKkI,WAAW,CAAA1K,aAAA,CAAAA,aAAA,IAAKyK,QAAQ,MAAErD,YAAY,CAAE5E,CAAC,CAACQ,MAAM,CAACF,KAAK,EAAC,CAAE,CAC1EJ,SAAS,CAAC,wGAAwG,CAClHG,WAAW,CAAC,OAAO,CACpB,CAAC,EACC,CAAC,cAEN1E,KAAA,QAAAwE,QAAA,eACE1E,IAAA,UAAOyE,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,aAAW,CAAO,CAAC,cACnFxE,KAAA,WACE2E,KAAK,CAAE2H,QAAQ,CAAChC,UAAW,CAC3B1F,QAAQ,CAAGP,CAAC,EAAKkI,WAAW,CAAA1K,aAAA,CAAAA,aAAA,IAAKyK,QAAQ,MAAEhC,UAAU,CAAEjG,CAAC,CAACQ,MAAM,CAACF,KAAK,EAAC,CAAE,CACxEJ,SAAS,CAAC,wGAAwG,CAAAC,QAAA,eAElH1E,IAAA,WAAQ6E,KAAK,CAAC,KAAK,CAAAH,QAAA,CAAC,KAAG,CAAQ,CAAC,cAChC1E,IAAA,WAAQ6E,KAAK,CAAC,WAAW,CAAAH,QAAA,CAAC,WAAS,CAAQ,CAAC,cAC5C1E,IAAA,WAAQ6E,KAAK,CAAC,WAAW,CAAAH,QAAA,CAAC,WAAS,CAAQ,CAAC,cAC5C1E,IAAA,WAAQ6E,KAAK,CAAC,QAAQ,CAAAH,QAAA,CAAC,QAAM,CAAQ,CAAC,cACtC1E,IAAA,WAAQ6E,KAAK,CAAC,YAAY,CAAAH,QAAA,CAAC,YAAU,CAAQ,CAAC,cAC9C1E,IAAA,WAAQ6E,KAAK,CAAC,aAAa,CAAAH,QAAA,CAAC,aAAW,CAAQ,CAAC,EAC1C,CAAC,EACN,CAAC,cAENxE,KAAA,QAAAwE,QAAA,eACE1E,IAAA,UAAOyE,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,WAAS,CAAO,CAAC,cACjF1E,IAAA,UACE2E,IAAI,CAAC,MAAM,CACXE,KAAK,CAAE2H,QAAQ,CAACG,QAAS,CACzB7H,QAAQ,CAAGP,CAAC,EAAKkI,WAAW,CAAA1K,aAAA,CAAAA,aAAA,IAAKyK,QAAQ,MAAEG,QAAQ,CAAEpI,CAAC,CAACQ,MAAM,CAACF,KAAK,EAAC,CAAE,CACtEJ,SAAS,CAAC,wGAAwG,CAClHG,WAAW,CAAC,iBAAiB,CAC9B,CAAC,EACC,CAAC,cAEN1E,KAAA,QAAAwE,QAAA,eACE1E,IAAA,UAAOyE,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,UAAQ,CAAO,CAAC,cAChF1E,IAAA,UACE2E,IAAI,CAAC,MAAM,CACXE,KAAK,CAAE2H,QAAQ,CAACI,OAAQ,CACxB9H,QAAQ,CAAGP,CAAC,EAAKkI,WAAW,CAAA1K,aAAA,CAAAA,aAAA,IAAKyK,QAAQ,MAAEI,OAAO,CAAErI,CAAC,CAACQ,MAAM,CAACF,KAAK,EAAC,CAAE,CACrEJ,SAAS,CAAC,wGAAwG,CAClHG,WAAW,CAAC,UAAU,CACvB,CAAC,EACC,CAAC,cAEN1E,KAAA,QAAAwE,QAAA,eACE1E,IAAA,UAAOyE,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,mBAAiB,CAAO,CAAC,cACzFxE,KAAA,WACE2E,KAAK,CAAE2H,QAAQ,CAACK,gBAAiB,CACjC/H,QAAQ,CAAGP,CAAC,EAAKkI,WAAW,CAAA1K,aAAA,CAAAA,aAAA,IAAKyK,QAAQ,MAAEK,gBAAgB,CAAEtI,CAAC,CAACQ,MAAM,CAACF,KAAK,EAAC,CAAE,CAC9EJ,SAAS,CAAC,wGAAwG,CAAAC,QAAA,eAElH1E,IAAA,WAAQ6E,KAAK,CAAC,EAAE,CAAAH,QAAA,CAAC,eAAa,CAAQ,CAAC,cACvC1E,IAAA,WAAQ6E,KAAK,CAAC,WAAW,CAAAH,QAAA,CAAC,WAAS,CAAQ,CAAC,cAC5C1E,IAAA,WAAQ6E,KAAK,CAAC,WAAW,CAAAH,QAAA,CAAC,WAAS,CAAQ,CAAC,cAC5C1E,IAAA,WAAQ6E,KAAK,CAAC,SAAS,CAAAH,QAAA,CAAC,SAAO,CAAQ,CAAC,EAClC,CAAC,EACN,CAAC,cAENxE,KAAA,QAAAwE,QAAA,eACE1E,IAAA,UAAOyE,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,gBAAc,CAAO,CAAC,cACtF1E,IAAA,UACE2E,IAAI,CAAC,MAAM,CACXE,KAAK,CAAE2H,QAAQ,CAACM,YAAa,CAC7BhI,QAAQ,CAAGP,CAAC,EAAKkI,WAAW,CAAA1K,aAAA,CAAAA,aAAA,IAAKyK,QAAQ,MAAEM,YAAY,CAAEvI,CAAC,CAACQ,MAAM,CAACF,KAAK,EAAC,CAAE,CAC1EJ,SAAS,CAAC,wGAAwG,CACnH,CAAC,EACC,CAAC,EACH,CAAC,cAENvE,KAAA,QAAKuE,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB1E,IAAA,UAAOyE,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,OAAK,CAAO,CAAC,cAC7E1E,IAAA,aACE6E,KAAK,CAAE2H,QAAQ,CAACnD,KAAM,CACtBvE,QAAQ,CAAGP,CAAC,EAAKkI,WAAW,CAAA1K,aAAA,CAAAA,aAAA,IAAKyK,QAAQ,MAAEnD,KAAK,CAAE9E,CAAC,CAACQ,MAAM,CAACF,KAAK,EAAC,CAAE,CACnEJ,SAAS,CAAC,wGAAwG,CAClHwI,IAAI,CAAC,GAAG,CACRrI,WAAW,CAAC,6CAA6C,CAChD,CAAC,EACT,CAAC,cAEN1E,KAAA,QAAKuE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C1E,IAAA,WACEiF,OAAO,CAAEsH,QAAS,CAClB9H,SAAS,CAAC,oFAAoF,CAAAC,QAAA,CAC/F,QAED,CAAQ,CAAC,cACTxE,KAAA,WACE+E,OAAO,CAAEd,YAAa,CACtBM,SAAS,CAAC,iFAAiF,CAAAC,QAAA,EAE1FvB,IAAI,CAAG,QAAQ,CAAG,KAAK,CAAC,OAC3B,EAAQ,CAAC,EACN,CAAC,EACH,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAEA;AACA,cAAe,SAAS,CAAA+J,GAAGA,CAAA,CAAG,CAC5B,KAAM,CAACC,eAAe,CAAEC,kBAAkB,CAAC,CAAG5P,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACyG,OAAO,CAAEC,UAAU,CAAC,CAAG1G,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACyF,KAAK,CAAEoK,QAAQ,CAAC,CAAG7P,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAC8P,WAAW,CAAEC,cAAc,CAAC,CAAG/P,QAAQ,CAAC,WAAW,CAAC,CAC3D,KAAM,CAACgQ,WAAW,CAAEC,cAAc,CAAC,CAAGjQ,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACkQ,aAAa,CAAEC,gBAAgB,CAAC,CAAGnQ,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACoQ,WAAW,CAAEC,cAAc,CAAC,CAAGrQ,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACsQ,UAAU,CAAEC,aAAa,CAAC,CAAGvQ,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACwQ,aAAa,CAAEC,gBAAgB,CAAC,CAAGzQ,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAAC0Q,UAAU,CAAEC,aAAa,CAAC,CAAG3Q,QAAQ,CAAC,KAAK,CAAC,CAEnD,KAAM,CAAA4Q,eAAe,CAAGzQ,WAAW,CAAC,SAAC2E,OAAO,CAAoB,IAAlB,CAAAqC,IAAI,CAAA0J,SAAA,CAAA5G,MAAA,IAAA4G,SAAA,MAAAC,SAAA,CAAAD,SAAA,IAAG,MAAM,CACzD,KAAM,CAAAE,eAAe,CAAG,CACtBpC,EAAE,CAAExJ,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC4L,QAAQ,CAAC,CAAC,CACzBlM,OAAO,CACPqC,IACF,CAAC,CACDgJ,gBAAgB,CAACc,IAAI,EAAI,CAACF,eAAe,CAAE,GAAGE,IAAI,CAACvC,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CAAC,CAChEwC,UAAU,CAAC,IAAM,CACff,gBAAgB,CAACc,IAAI,EAAIA,IAAI,CAACpE,MAAM,CAACsE,CAAC,EAAIA,CAAC,CAACxC,EAAE,GAAKoC,eAAe,CAACpC,EAAE,CAAC,CAAC,CACzE,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAyC,aAAa,CAAGjR,WAAW,CAAC,gBAAmC,IAA5B,CAAAkR,eAAe,CAAAR,SAAA,CAAA5G,MAAA,IAAA4G,SAAA,MAAAC,SAAA,CAAAD,SAAA,IAAG,KAAK,CAC9D,GAAI,CACF,GAAI,CAACQ,eAAe,CAAE3K,UAAU,CAAC,IAAI,CAAC,CAAC,IAClC,CAAAiK,aAAa,CAAC,IAAI,CAAC,CAExB,KAAM,CAAAW,WAAW,CAAG,KAAM,CAAArL,mBAAmB,CAACjB,UAAU,CAAC,CAAC,CAE1D;AACA,KAAM,CAAAuM,OAAO,CAAG,GAAI,CAAAC,GAAG,CAAC,CAAC,CACzB,KAAM,CAAAC,WAAW,CAAGH,WAAW,CAACzE,MAAM,CAAClH,IAAI,EAAI,CAC7C,GAAI,CAACA,IAAI,CAACgJ,EAAE,EAAI4C,OAAO,CAACG,GAAG,CAAC/L,IAAI,CAACgJ,EAAE,CAAC,CAAE,MAAO,MAAK,CAClD4C,OAAO,CAACI,GAAG,CAAChM,IAAI,CAACgJ,EAAE,CAAC,CACpB,MAAO,KAAI,CACb,CAAC,CAAC,CAEFkB,QAAQ,CAAC4B,WAAW,CAAC,CAErB,GAAIJ,eAAe,CAAE,CACnBT,eAAe,CAAC,8BAA8B,CAAE,SAAS,CAAC,CAC5D,CAAC,IAAM,IAAIa,WAAW,CAACxH,MAAM,CAAG,CAAC,CAAE,CACjC2G,eAAe,WAAA1L,MAAA,CAAWuM,WAAW,CAACxH,MAAM,WAAU,SAAS,CAAC,CAClE,CACF,CAAE,MAAOlF,KAAK,CAAE,CACdJ,OAAO,CAACI,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC5C6L,eAAe,WAAA1L,MAAA,CAAWH,KAAK,CAACD,OAAO,EAAI,OAAO,CAAC,CACnD+K,QAAQ,CAAC,EAAE,CAAC,CACd,CAAC,OAAS,CACRnJ,UAAU,CAAC,KAAK,CAAC,CACjBiK,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAAE,CAACC,eAAe,CAAC,CAAC,CAErB3Q,SAAS,CAAC,IAAM,CACd,KAAM,CAAA2R,UAAU,CAAGhL,cAAc,CAACiL,OAAO,CAAC,iBAAiB,CAAC,CAC5D,GAAID,UAAU,GAAK,MAAM,CAAE,CACzBhC,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CACAlJ,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAENzG,SAAS,CAAC,IAAM,CACd,GAAI0P,eAAe,CAAE,CACnByB,aAAa,CAAC,CAAC,CACjB,CACF,CAAC,CAAE,CAACzB,eAAe,CAAEyB,aAAa,CAAC,CAAC,CAEpC,KAAM,CAAAU,aAAa,CAAG,KAAO,CAAAC,QAAQ,EAAK,CACxC,GAAI,CACF,KAAM,CAAAjO,QAAQ,CAAG,KAAM,CAAAmC,mBAAmB,CAACP,OAAO,CAACqM,QAAQ,CAAC,CAC5D,GAAIjO,QAAQ,CAACe,OAAO,CAAE,CACpB,KAAM,CAAAuM,aAAa,CAAC,IAAI,CAAC,CACzBR,eAAe,gBAAA1L,MAAA,CAAgB6M,QAAQ,CAAC/G,YAAY,EAAI,SAAS,CAAC,CAClEqF,cAAc,CAAC,KAAK,CAAC,CACvB,CAAC,IAAM,CACL,KAAM,IAAI,CAAA/K,KAAK,CAACxB,QAAQ,CAACgB,OAAO,EAAI,oBAAoB,CAAC,CAC3D,CACF,CAAE,MAAOC,KAAK,CAAE,CACd6L,eAAe,WAAA1L,MAAA,CAAWH,KAAK,CAACD,OAAO,EAAI,OAAO,CAAC,CACrD,CACF,CAAC,CAED,KAAM,CAAAkN,gBAAgB,CAAG,KAAO,CAAAD,QAAQ,EAAK,CAC3C,GAAI,CACF,KAAM,CAAAjO,QAAQ,CAAG,KAAM,CAAAmC,mBAAmB,CAACL,UAAU,CAACmM,QAAQ,CAAC,CAC/D,GAAIjO,QAAQ,CAACe,OAAO,CAAE,CACpB,KAAM,CAAAuM,aAAa,CAAC,IAAI,CAAC,CACzBR,eAAe,kBAAA1L,MAAA,CAAkB6M,QAAQ,CAAC/G,YAAY,EAAI,SAAS,CAAC,CACpEiF,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,IAAM,CACL,KAAM,IAAI,CAAA3K,KAAK,CAACxB,QAAQ,CAACgB,OAAO,EAAI,uBAAuB,CAAC,CAC9D,CACF,CAAE,MAAOC,KAAK,CAAE,CACd6L,eAAe,WAAA1L,MAAA,CAAWH,KAAK,CAACD,OAAO,EAAI,OAAO,CAAC,CACrD,CACF,CAAC,CAED,KAAM,CAAAmN,gBAAgB,CAAG,KAAO,CAAAnM,MAAM,EAAK,CACzC,GAAI,CAAC0C,MAAM,CAAC0J,OAAO,CAAC,4CAA4C,CAAC,CAAE,OAEnE,GAAI,CACF,KAAM,CAAApO,QAAQ,CAAG,KAAM,CAAAmC,mBAAmB,CAACJ,UAAU,CAACC,MAAM,CAAC,CAC7D,GAAIhC,QAAQ,CAACe,OAAO,CAAE,CACpB,KAAM,CAAAuM,aAAa,CAAC,IAAI,CAAC,CACzBR,eAAe,CAAC,2BAA2B,CAAE,SAAS,CAAC,CACzD,CAAC,IAAM,CACL,KAAM,IAAI,CAAAtL,KAAK,CAACxB,QAAQ,CAACgB,OAAO,EAAI,uBAAuB,CAAC,CAC9D,CACF,CAAE,MAAOC,KAAK,CAAE,CACd6L,eAAe,WAAA1L,MAAA,CAAWH,KAAK,CAACD,OAAO,EAAI,OAAO,CAAC,CACrD,CACF,CAAC,CAED,KAAM,CAAAqN,aAAa,CAAGjS,OAAO,CAAC,IAAM,CAClC,GAAI,CAAAkS,QAAQ,CAAG,CAAC,GAAG3M,KAAK,CAAC,CAEzB;AACA,GAAI6K,UAAU,CAAE,CACd8B,QAAQ,CAAGA,QAAQ,CAACvF,MAAM,CAAClH,IAAI,OAAA0M,kBAAA,CAAAC,aAAA,CAAAC,iBAAA,CAAAC,WAAA,OAC7B,EAAAH,kBAAA,CAAA1M,IAAI,CAACqF,YAAY,UAAAqH,kBAAA,iBAAjBA,kBAAA,CAAmBI,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACpC,UAAU,CAACmC,WAAW,CAAC,CAAC,CAAC,KAAAH,aAAA,CACnE3M,IAAI,CAACK,OAAO,UAAAsM,aAAA,iBAAZA,aAAA,CAAcG,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACpC,UAAU,CAACmC,WAAW,CAAC,CAAC,CAAC,KAAAF,iBAAA,CAC9D5M,IAAI,CAAC6F,WAAW,UAAA+G,iBAAA,iBAAhBA,iBAAA,CAAkBG,QAAQ,CAACpC,UAAU,CAAC,KAAAkC,WAAA,CACtC7M,IAAI,CAACW,KAAK,UAAAkM,WAAA,iBAAVA,WAAA,CAAYC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACpC,UAAU,CAACmC,WAAW,CAAC,CAAC,CAAC,GAC9D,CAAC,CACH,CAEA;AACA,GAAIjC,aAAa,GAAK,KAAK,CAAE,CAC3B4B,QAAQ,CAAGA,QAAQ,CAACvF,MAAM,CAAClH,IAAI,EAAIA,IAAI,CAAC8F,OAAO,GAAK+E,aAAa,CAAC,CACpE,CAEA,MAAO,CAAA4B,QAAQ,CACjB,CAAC,CAAE,CAAC3M,KAAK,CAAE6K,UAAU,CAAEE,aAAa,CAAC,CAAC,CAEtC,KAAM,CAAAmC,YAAY,CAAGA,CAAA,GAAM,CACzB/L,cAAc,CAACgM,UAAU,CAAC,iBAAiB,CAAC,CAC5ChD,kBAAkB,CAAC,KAAK,CAAC,CACzBC,QAAQ,CAAC,EAAE,CAAC,CACd,CAAC,CAED,GAAI,CAACF,eAAe,CAAE,CACpB,mBAAOnN,IAAA,CAAC0D,SAAS,EAACE,OAAO,CAAEwJ,kBAAmB,CAAE,CAAC,CACnD,CAEA,GAAInJ,OAAO,CAAE,CACX,mBACEjE,IAAA,QAAKyE,SAAS,CAAC,2DAA2D,CAAAC,QAAA,cACxExE,KAAA,QAAKuE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B1E,IAAA,CAACP,OAAO,EAACgF,SAAS,CAAC,mDAAmD,CAAE,CAAC,cACzEzE,IAAA,MAAGyE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,gBAAc,CAAG,CAAC,EAC5C,CAAC,CACH,CAAC,CAEV,CAEA,mBACExE,KAAA,QAAKuE,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eAEtC1E,IAAA,WAAQyE,SAAS,CAAC,+CAA+C,CAAAC,QAAA,cAC/D1E,IAAA,QAAKyE,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBxE,KAAA,QAAKuE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDxE,KAAA,QAAKuE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CxE,KAAA,QAAKuE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC1E,IAAA,QAAKyE,SAAS,CAAC,iCAAiC,CAAAC,QAAA,cAC9C1E,IAAA,CAACzB,IAAI,EAACkG,SAAS,CAAC,oBAAoB,CAAE,CAAC,CACpC,CAAC,cACNzE,IAAA,OAAIyE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,YAAU,CAAI,CAAC,EAC7D,CAAC,cAENxE,KAAA,QAAKuE,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BxE,KAAA,WACE+E,OAAO,CAAEA,CAAA,GAAMsI,cAAc,CAAC,WAAW,CAAE,CAC3C9I,SAAS,uDAAA/B,MAAA,CACP4K,WAAW,GAAK,WAAW,CACvB,2BAA2B,CAC3B,iCAAiC,CACpC,CAAA5I,QAAA,eAEH1E,IAAA,CAACT,SAAS,EAACgL,IAAI,CAAE,EAAG,CAAC9F,SAAS,CAAC,aAAa,CAAE,CAAC,YAEjD,EAAQ,CAAC,cACTvE,KAAA,WACE+E,OAAO,CAAEA,CAAA,GAAMsI,cAAc,CAAC,OAAO,CAAE,CACvC9I,SAAS,uDAAA/B,MAAA,CACP4K,WAAW,GAAK,OAAO,CACnB,2BAA2B,CAC3B,iCAAiC,CACpC,CAAA5I,QAAA,eAEH1E,IAAA,CAACV,KAAK,EAACiL,IAAI,CAAE,EAAG,CAAC9F,SAAS,CAAC,aAAa,CAAE,CAAC,QAE7C,EAAQ,CAAC,cACTvE,KAAA,WACE+E,OAAO,CAAEA,CAAA,GAAMsI,cAAc,CAAC,KAAK,CAAE,CACrC9I,SAAS,uDAAA/B,MAAA,CACP4K,WAAW,GAAK,KAAK,CACjB,2BAA2B,CAC3B,iCAAiC,CACpC,CAAA5I,QAAA,eAEH1E,IAAA,CAACnC,MAAM,EAAC0M,IAAI,CAAE,EAAG,CAAC9F,SAAS,CAAC,aAAa,CAAE,CAAC,MAE9C,EAAQ,CAAC,cACTvE,KAAA,WACE+E,OAAO,CAAEA,CAAA,GAAMsI,cAAc,CAAC,UAAU,CAAE,CAC1C9I,SAAS,uDAAA/B,MAAA,CACP4K,WAAW,GAAK,UAAU,CACtB,2BAA2B,CAC3B,iCAAiC,CACpC,CAAA5I,QAAA,eAEH1E,IAAA,CAAClC,QAAQ,EAACyM,IAAI,CAAE,EAAG,CAAC9F,SAAS,CAAC,aAAa,CAAE,CAAC,WAEhD,EAAQ,CAAC,EACN,CAAC,EACH,CAAC,cAENvE,KAAA,QAAKuE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C1E,IAAA,WACEiF,OAAO,CAAEA,CAAA,GAAM2J,aAAa,CAAC,IAAI,CAAE,CACnC1J,QAAQ,CAAEgJ,UAAW,CACrBzJ,SAAS,CAAC,sFAAsF,CAAAC,QAAA,cAEhG1E,IAAA,CAACtB,SAAS,EAAC6L,IAAI,CAAE,EAAG,CAAC9F,SAAS,CAAEyJ,UAAU,CAAG,cAAc,CAAG,EAAG,CAAE,CAAC,CAC9D,CAAC,cACThO,KAAA,WACE+E,OAAO,CAAEA,CAAA,GAAM4I,cAAc,CAAC,IAAI,CAAE,CACpCpJ,SAAS,CAAC,6FAA6F,CAAAC,QAAA,eAEvG1E,IAAA,CAACjC,IAAI,EAACwM,IAAI,CAAE,EAAG,CAAC9F,SAAS,CAAC,aAAa,CAAE,CAAC,WAE5C,EAAQ,CAAC,cACTzE,IAAA,WACEiF,OAAO,CAAEkL,YAAa,CACtB1L,SAAS,CAAC,kEAAkE,CAC5E8D,KAAK,CAAC,QAAQ,CAAA7D,QAAA,cAEd1E,IAAA,CAACb,OAAO,EAACoL,IAAI,CAAE,EAAG,CAAE,CAAC,CACf,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CACA,CAAC,cAGTvK,IAAA,QAAKyE,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CACjDgJ,aAAa,CAACpF,GAAG,CAAC+H,KAAK,eACtBrQ,IAAA,QAEEyE,SAAS,6EAAA/B,MAAA,CACP2N,KAAK,CAAC1L,IAAI,GAAK,SAAS,CAAG,yBAAyB,CACpD0L,KAAK,CAAC1L,IAAI,GAAK,OAAO,CAAG,uBAAuB,CAChD,wBAAwB,CACvB,CAAAD,QAAA,cAEHxE,KAAA,QAAKuE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,EAC/B2L,KAAK,CAAC1L,IAAI,GAAK,SAAS,eAAI3E,IAAA,CAAC3B,WAAW,EAACoG,SAAS,CAAC,MAAM,CAAC8F,IAAI,CAAE,EAAG,CAAE,CAAC,CACtE8F,KAAK,CAAC1L,IAAI,GAAK,OAAO,eAAI3E,IAAA,CAAC5B,WAAW,EAACqG,SAAS,CAAC,MAAM,CAAC8F,IAAI,CAAE,EAAG,CAAE,CAAC,cACrEvK,IAAA,SAAMyE,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAE2L,KAAK,CAAC/N,OAAO,CAAO,CAAC,EACjD,CAAC,EAXD+N,KAAK,CAAClE,EAYR,CACN,CAAC,CACC,CAAC,cAGNjM,KAAA,SAAMuE,SAAS,CAAC,sBAAsB,CAAAC,QAAA,EACnC4I,WAAW,GAAK,WAAW,eAAItN,IAAA,CAACiL,SAAS,EAAChI,KAAK,CAAE0M,aAAc,CAAE,CAAC,CAElErC,WAAW,GAAK,OAAO,eACtBpN,KAAA,QAAKuE,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxCxE,KAAA,QAAKuE,SAAS,CAAC,kFAAkF,CAAAC,QAAA,eAC/FxE,KAAA,QAAAwE,QAAA,eACE1E,IAAA,OAAIyE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,WAAS,CAAI,CAAC,cAC/DxE,KAAA,MAAGuE,SAAS,CAAC,oBAAoB,CAAAC,QAAA,EAAEiL,aAAa,CAAClI,MAAM,CAAC,cAAY,EAAG,CAAC,EACrE,CAAC,cACNvH,KAAA,QAAKuE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C1E,IAAA,UACE2E,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,iBAAiB,CAC7BC,KAAK,CAAEiJ,UAAW,CAClBhJ,QAAQ,CAAGP,CAAC,EAAKwJ,aAAa,CAACxJ,CAAC,CAACQ,MAAM,CAACF,KAAK,CAAE,CAC/CJ,SAAS,CAAC,gHAAgH,CAC3H,CAAC,cACFvE,KAAA,WACE2E,KAAK,CAAEmJ,aAAc,CACrBlJ,QAAQ,CAAGP,CAAC,EAAK0J,gBAAgB,CAAC1J,CAAC,CAACQ,MAAM,CAACF,KAAK,CAAE,CAClDJ,SAAS,CAAC,iGAAiG,CAAAC,QAAA,eAE3G1E,IAAA,WAAQ6E,KAAK,CAAC,KAAK,CAAAH,QAAA,CAAC,aAAW,CAAQ,CAAC,cACxC1E,IAAA,WAAQ6E,KAAK,CAAC,KAAK,CAAAH,QAAA,CAAC,KAAG,CAAQ,CAAC,cAChC1E,IAAA,WAAQ6E,KAAK,CAAC,MAAM,CAAAH,QAAA,CAAC,MAAI,CAAQ,CAAC,cAClC1E,IAAA,WAAQ6E,KAAK,CAAC,MAAM,CAAAH,QAAA,CAAC,MAAI,CAAQ,CAAC,EAC5B,CAAC,EACN,CAAC,EACH,CAAC,cAEN1E,IAAA,QAAKyE,SAAS,CAAC,sEAAsE,CAAAC,QAAA,cACnFxE,KAAA,QAAKuE,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BxE,KAAA,UAAOuE,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACvB1E,IAAA,UAAOyE,SAAS,CAAC,qBAAqB,CAAAC,QAAA,cACpCxE,KAAA,OAAAwE,QAAA,eACE1E,IAAA,OAAIyE,SAAS,CAAC,kFAAkF,CAAAC,QAAA,CAAC,MAAI,CAAI,CAAC,cAC1G1E,IAAA,OAAIyE,SAAS,CAAC,kFAAkF,CAAAC,QAAA,CAAC,SAAO,CAAI,CAAC,cAC7G1E,IAAA,OAAIyE,SAAS,CAAC,kFAAkF,CAAAC,QAAA,CAAC,OAAK,CAAI,CAAC,cAC3G1E,IAAA,OAAIyE,SAAS,CAAC,kFAAkF,CAAAC,QAAA,CAAC,SAAO,CAAI,CAAC,cAC7G1E,IAAA,OAAIyE,SAAS,CAAC,kFAAkF,CAAAC,QAAA,CAAC,QAAM,CAAI,CAAC,cAC5G1E,IAAA,OAAIyE,SAAS,CAAC,kFAAkF,CAAAC,QAAA,CAAC,OAAK,CAAI,CAAC,cAC3G1E,IAAA,OAAIyE,SAAS,CAAC,kFAAkF,CAAAC,QAAA,CAAC,SAAO,CAAI,CAAC,EAC3G,CAAC,CACA,CAAC,cACR1E,IAAA,UAAOyE,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CACxCiL,aAAa,CAACrH,GAAG,CAACnF,IAAI,eACrBjD,KAAA,OAAkBuE,SAAS,CAAC,oCAAoC,CAAAC,QAAA,eAC9DxE,KAAA,OAAIuE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eACzC1E,IAAA,QAAKyE,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAEvB,IAAI,CAACqF,YAAY,CAAM,CAAC,cACpExI,IAAA,QAAKyE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAEvB,IAAI,CAACW,KAAK,CAAM,CAAC,EACvD,CAAC,cACL9D,IAAA,OAAIyE,SAAS,CAAC,WAAW,CAAAC,QAAA,cACvB1E,IAAA,QAAKyE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAEvB,IAAI,CAACK,OAAO,CAAM,CAAC,CACzD,CAAC,cACLxD,IAAA,OAAIyE,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAC9DvB,IAAI,CAAC6F,WAAW,EAAI,GAAG,CACtB,CAAC,cACLhJ,IAAA,OAAIyE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cACzC1E,IAAA,SAAMyE,SAAS,+CAAA/B,MAAA,CACbS,IAAI,CAAC8F,OAAO,GAAK,KAAK,CAAG,yBAAyB,CAClD9F,IAAI,CAAC8F,OAAO,GAAK,MAAM,CAAG,+BAA+B,CACzD,2BAA2B,CAC1B,CAAAvE,QAAA,CACAvB,IAAI,CAAC8F,OAAO,CACT,CAAC,CACL,CAAC,cACLjJ,IAAA,OAAIyE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cACzC1E,IAAA,SAAMyE,SAAS,CAAC,sEAAsE,CAAAC,QAAA,CACnFvB,IAAI,CAACqH,UAAU,EAAI,KAAK,CACrB,CAAC,CACL,CAAC,cACLxK,IAAA,OAAIyE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cACzC1E,IAAA,SAAMyE,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CACnDvB,IAAI,CAACgG,YAAY,KAAAzG,MAAA,CAAOwF,UAAU,CAAC/E,IAAI,CAACgG,YAAY,CAAC,CAACC,cAAc,CAAC,CAAC,EAAK,GAAG,CAC3E,CAAC,CACL,CAAC,cACLpJ,IAAA,OAAIyE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cACzCxE,KAAA,QAAKuE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C1E,IAAA,WACEiF,OAAO,CAAEA,CAAA,GAAMwI,cAAc,CAACtK,IAAI,CAAE,CACpCsB,SAAS,CAAC,qDAAqD,CAC/D8D,KAAK,CAAC,MAAM,CAAA7D,QAAA,cAEZ1E,IAAA,CAAChC,KAAK,EAACuM,IAAI,CAAE,EAAG,CAAE,CAAC,CACb,CAAC,cACTvK,IAAA,WACEiF,OAAO,CAAEA,CAAA,GAAMwK,gBAAgB,CAACtM,IAAI,CAACgJ,EAAE,CAAE,CACzC1H,SAAS,CAAC,mDAAmD,CAC7D8D,KAAK,CAAC,QAAQ,CAAA7D,QAAA,cAEd1E,IAAA,CAAC/B,MAAM,EAACsM,IAAI,CAAE,EAAG,CAAE,CAAC,CACd,CAAC,EACN,CAAC,CACJ,CAAC,GA/CEpH,IAAI,CAACgJ,EAgDV,CACL,CAAC,CACG,CAAC,EACH,CAAC,CAEPwD,aAAa,CAAClI,MAAM,GAAK,CAAC,eACzBvH,KAAA,QAAKuE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC1E,IAAA,CAACV,KAAK,EAACmF,SAAS,CAAC,sCAAsC,CAAE,CAAC,cAC1DzE,IAAA,MAAGyE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,gBAAc,CAAG,CAAC,cAC/C1E,IAAA,MAAGyE,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,mCAAiC,CAAG,CAAC,EAC5E,CACN,EACE,CAAC,CACH,CAAC,EACH,CACN,CAEA4I,WAAW,GAAK,KAAK,eAAItN,IAAA,CAACmF,kBAAkB,EAAClC,KAAK,CAAE0M,aAAc,CAAE,CAAC,CACrErC,WAAW,GAAK,UAAU,eAAItN,IAAA,CAACyK,YAAY,GAAE,CAAC,EAC3C,CAAC,CAGNmD,WAAW,eACV5N,IAAA,CAACoM,QAAQ,EAACE,QAAQ,CAAEgD,aAAc,CAAC/C,QAAQ,CAAEA,CAAA,GAAMsB,cAAc,CAAC,KAAK,CAAE,CAAE,CAC5E,CAEAL,WAAW,eACVxN,IAAA,CAACoM,QAAQ,EAACjJ,IAAI,CAAEqK,WAAY,CAAClB,QAAQ,CAAEkD,gBAAiB,CAACjD,QAAQ,CAAEA,CAAA,GAAMkB,cAAc,CAAC,IAAI,CAAE,CAAE,CACjG,cAEDzN,IAAA,UAAOD,GAAG,MAAA2E,QAAA,uWAeD,CAAC,EACP,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}