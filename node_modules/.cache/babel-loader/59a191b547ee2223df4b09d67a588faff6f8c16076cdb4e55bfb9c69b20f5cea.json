{"ast":null,"code":"import React,{useState,useMemo}from'react';import{Search,Phone,MessageSquare,Mail,PhoneCall,MessageCircle,Send,Clock,TrendingUp,User,MapPin,FileText,X,ChevronRight,History,BarChart3,Filter}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CommunicationsView(_ref){let{leads,jobCounts,communications=[]}=_ref;const[searchTerm,setSearchTerm]=useState('');const[selectedCustomer,setSelectedCustomer]=useState(null);const[activeAction,setActiveAction]=useState(null);const[filterType,setFilterType]=useState('all');const[messageContent,setMessageContent]=useState('');const[emailSubject,setEmailSubject]=useState('');const[emailBody,setEmailBody]=useState('');// Combine leads and job counts into unified customer list\nconst allCustomers=useMemo(()=>{const leadCustomers=leads.map(lead=>({id:\"lead-\".concat(lead.id),type:'lead',name:lead.name,address:lead.address,phone:lead.phone,email:lead.email||'',notes:lead.notes||'',quality:lead.quality,disposition:lead.disposition,lastContact:lead.lastContact||null,source:'Bhotchleads'}));const jobCountCustomers=jobCounts.map(job=>({id:\"job-\".concat(job.id),type:'jobcount',name:job.customerName,address:job.address,phone:job.phone||'',email:job.email||'',notes:job.notes||'',sqFt:job.sqFt,status:job.status,source:'Job Count'}));return[...leadCustomers,...jobCountCustomers];},[leads,jobCounts]);// Filter customers based on search and filter type\nconst filteredCustomers=useMemo(()=>{let filtered=allCustomers;if(filterType!=='all'){filtered=filtered.filter(c=>c.type===filterType);}if(searchTerm.trim()){const term=searchTerm.toLowerCase();filtered=filtered.filter(c=>{var _c$name,_c$address,_c$phone,_c$email;return((_c$name=c.name)===null||_c$name===void 0?void 0:_c$name.toLowerCase().includes(term))||((_c$address=c.address)===null||_c$address===void 0?void 0:_c$address.toLowerCase().includes(term))||((_c$phone=c.phone)===null||_c$phone===void 0?void 0:_c$phone.includes(term))||((_c$email=c.email)===null||_c$email===void 0?void 0:_c$email.toLowerCase().includes(term));});}return filtered.sort((a,b)=>{const aContact=a.lastContact?new Date(a.lastContact):new Date(0);const bContact=b.lastContact?new Date(b.lastContact):new Date(0);return bContact-aContact;});},[allCustomers,searchTerm,filterType]);// Get communication history for selected customer\nconst customerHistory=useMemo(()=>{if(!selectedCustomer)return[];return communications.filter(c=>c.customerId===selectedCustomer.id).sort((a,b)=>new Date(b.timestamp)-new Date(a.timestamp));},[selectedCustomer,communications]);// Calculate stats\nconst stats=useMemo(()=>{const history=selectedCustomer?customerHistory:communications;return{totalCalls:history.filter(c=>c.type==='call').length,totalSMS:history.filter(c=>c.type==='sms').length,totalEmails:history.filter(c=>c.type==='email').length,lastContact:history.length>0?history[0].timestamp:null};},[selectedCustomer,customerHistory,communications]);const handleCustomerSelect=customer=>{setSelectedCustomer(customer);setActiveAction(null);setMessageContent('');setEmailSubject('');setEmailBody('');};const handleActionClick=action=>{if(activeAction===action){setActiveAction(null);}else{setActiveAction(action);if(action==='call'){// Open Google Voice dialer\nconst phoneNumber=selectedCustomer.phone.replace(/\\D/g,'');window.open(\"https://voice.google.com/u/0/calls?a=nc,%2B1\".concat(phoneNumber),'_blank');}}};const handleSendSMS=()=>{if(!messageContent.trim())return;const phoneNumber=selectedCustomer.phone.replace(/\\D/g,'');window.open(\"https://voice.google.com/u/0/messages?itemId=t.%2B1\".concat(phoneNumber),'_blank');setMessageContent('');};const handleSendEmail=()=>{if(!emailSubject.trim()||!emailBody.trim())return;const mailtoLink=\"mailto:\".concat(selectedCustomer.email,\"?subject=\").concat(encodeURIComponent(emailSubject),\"&body=\").concat(encodeURIComponent(emailBody));window.location.href=mailtoLink;setEmailSubject('');setEmailBody('');};const getQualityColor=quality=>{const colors={'Hot':'bg-red-100 text-red-800 border-red-300','Warm':'bg-orange-100 text-orange-800 border-orange-300','Cold':'bg-blue-100 text-blue-800 border-blue-300'};return colors[quality]||'bg-gray-100 text-gray-800 border-gray-300';};return/*#__PURE__*/_jsxs(\"div\",{className:\"h-[calc(100vh-140px)] flex gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-1/3 bg-white rounded-lg shadow-sm border overflow-hidden flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(MessageCircle,{className:\"w-6 h-6 mr-2 text-blue-600\"}),\"Communications Hub\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative mb-3\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search customers by name, address, phone...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFilterType('all'),className:\"flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all \".concat(filterType==='all'?'bg-blue-600 text-white shadow-md':'bg-white text-gray-600 hover:bg-gray-50 border border-gray-200'),children:[/*#__PURE__*/_jsx(Filter,{className:\"w-4 h-4 inline mr-1\"}),\"All (\",allCustomers.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFilterType('lead'),className:\"flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all \".concat(filterType==='lead'?'bg-green-600 text-white shadow-md':'bg-white text-gray-600 hover:bg-gray-50 border border-gray-200'),children:[\"Leads (\",leads.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFilterType('jobcount'),className:\"flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all \".concat(filterType==='jobcount'?'bg-purple-600 text-white shadow-md':'bg-white text-gray-600 hover:bg-gray-50 border border-gray-200'),children:[\"Jobs (\",jobCounts.length,\")\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto\",children:filteredCustomers.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center h-full text-gray-400 p-8\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-16 h-16 mb-4 opacity-50\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium\",children:\"No customers found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Try adjusting your search or filters\"})]}):filteredCustomers.map(customer=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleCustomerSelect(customer),className:\"p-4 border-b hover:bg-blue-50 cursor-pointer transition-all \".concat((selectedCustomer===null||selectedCustomer===void 0?void 0:selectedCustomer.id)===customer.id?'bg-blue-100 border-l-4 border-l-blue-600':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 mr-2 text-gray-500\"}),customer.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full border \".concat(customer.type==='lead'?'bg-green-50 text-green-700 border-green-200':'bg-purple-50 text-purple-700 border-purple-200'),children:customer.source}),customer.quality&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full border \".concat(getQualityColor(customer.quality)),children:customer.quality})]})]}),/*#__PURE__*/_jsx(ChevronRight,{className:\"w-5 h-5 text-gray-400 transition-transform \".concat((selectedCustomer===null||selectedCustomer===void 0?void 0:selectedCustomer.id)===customer.id?'rotate-90':'')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-sm text-gray-600\",children:[customer.phone&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Phone,{className:\"w-3 h-3 mr-2 text-gray-400\"}),customer.phone]}),customer.address&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-3 h-3 mr-2 text-gray-400\"}),customer.address]})]})]},customer.id))})]}),selectedCustomer?/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 bg-white rounded-lg shadow-sm border overflow-hidden flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border-b bg-gradient-to-r from-indigo-50 to-purple-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-1\",children:selectedCustomer.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 flex items-center\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 mr-2\"}),selectedCustomer.address]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedCustomer(null),className:\"p-2 hover:bg-white rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5 text-gray-500\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-4 gap-3 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-3 border border-blue-100 shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(PhoneCall,{className:\"w-5 h-5 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-gray-900\",children:stats.totalCalls})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600 mt-1\",children:\"Calls\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-3 border border-green-100 shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-5 h-5 text-green-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-gray-900\",children:stats.totalSMS})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600 mt-1\",children:\"SMS\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-3 border border-purple-100 shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(Mail,{className:\"w-5 h-5 text-purple-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-gray-900\",children:stats.totalEmails})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600 mt-1\",children:\"Emails\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-3 border border-orange-100 shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"w-5 h-5 text-orange-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-gray-900\",children:customerHistory.length})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600 mt-1\",children:\"Total\"})]})]}),selectedCustomer.notes&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg p-3 border border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(FileText,{className:\"w-4 h-4 mr-2 text-gray-500 mt-0.5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-gray-700 mb-1\",children:\"Notes\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:selectedCustomer.notes})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleActionClick('call'),disabled:!selectedCustomer.phone,className:\"flex-1 py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2 \".concat(activeAction==='call'?'bg-blue-600 text-white shadow-lg scale-105':'bg-white text-gray-700 border-2 border-blue-200 hover:border-blue-400 hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed'),children:[/*#__PURE__*/_jsx(PhoneCall,{className:\"w-5 h-5\"}),\"Call\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleActionClick('sms'),disabled:!selectedCustomer.phone,className:\"flex-1 py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2 \".concat(activeAction==='sms'?'bg-green-600 text-white shadow-lg scale-105':'bg-white text-gray-700 border-2 border-green-200 hover:border-green-400 hover:bg-green-50 disabled:opacity-50 disabled:cursor-not-allowed'),children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-5 h-5\"}),\"SMS\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleActionClick('email'),disabled:!selectedCustomer.email,className:\"flex-1 py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2 \".concat(activeAction==='email'?'bg-purple-600 text-white shadow-lg scale-105':'bg-white text-gray-700 border-2 border-purple-200 hover:border-purple-400 hover:bg-purple-50 disabled:opacity-50 disabled:cursor-not-allowed'),children:[/*#__PURE__*/_jsx(Mail,{className:\"w-5 h-5\"}),\"Email\"]})]})}),activeAction&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b bg-gradient-to-r from-blue-50 to-purple-50\",children:[activeAction==='sms'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-5 h-5 mr-2 text-green-600\"}),\"Send SMS via Google Voice\"]}),/*#__PURE__*/_jsx(\"textarea\",{value:messageContent,onChange:e=>setMessageContent(e.target.value),placeholder:\"Type your message here...\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none\",rows:\"3\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSendSMS,disabled:!messageContent.trim(),className:\"w-full bg-green-600 text-white py-2.5 px-4 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Send,{className:\"w-4 h-4\"}),\"Open Google Voice SMS\"]})]}),activeAction==='email'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(Mail,{className:\"w-5 h-5 mr-2 text-purple-600\"}),\"Send Email\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:emailSubject,onChange:e=>setEmailSubject(e.target.value),placeholder:\"Subject\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"textarea\",{value:emailBody,onChange:e=>setEmailBody(e.target.value),placeholder:\"Email body...\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none\",rows:\"4\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSendEmail,disabled:!emailSubject.trim()||!emailBody.trim(),className:\"w-full bg-purple-600 text-white py-2.5 px-4 rounded-lg font-medium hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Send,{className:\"w-4 h-4\"}),\"Open Email Client\"]})]}),activeAction==='call'&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(PhoneCall,{className:\"w-12 h-12 mx-auto mb-3 text-blue-600 animate-pulse\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Google Voice call window opened\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:[\"Calling \",selectedCustomer.phone]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(History,{className:\"w-5 h-5 mr-2 text-gray-600\"}),\"Communication History\"]}),customerHistory.length>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[customerHistory.length,\" interactions\"]})]}),customerHistory.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center h-64 text-gray-400\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-16 h-16 mb-4 opacity-50\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium\",children:\"No communication history\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Start by making a call, sending an SMS, or email\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:customerHistory.map((comm,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[comm.type==='call'&&/*#__PURE__*/_jsx(PhoneCall,{className:\"w-4 h-4 text-blue-600\"}),comm.type==='sms'&&/*#__PURE__*/_jsx(MessageSquare,{className:\"w-4 h-4 text-green-600\"}),comm.type==='email'&&/*#__PURE__*/_jsx(Mail,{className:\"w-4 h-4 text-purple-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900 capitalize\",children:comm.type})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-xs text-gray-500\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-3 h-3 mr-1\"}),new Date(comm.timestamp).toLocaleString()]})]}),comm.notes&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-2 pl-6\",children:comm.notes}),comm.outcome&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 pl-6\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-1 rounded-full \".concat(comm.outcome==='Completed'?'bg-green-100 text-green-700':comm.outcome==='No Answer'?'bg-yellow-100 text-yellow-700':'bg-gray-100 text-gray-700'),children:comm.outcome})})]},index))})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 bg-white rounded-lg shadow-sm border flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-gray-400 p-8\",children:[/*#__PURE__*/_jsx(MessageCircle,{className:\"w-24 h-24 mx-auto mb-6 opacity-20\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-2\",children:\"Select a Customer\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:\"Choose a customer from the left to view details and communicate\"})]})})]});}","map":{"version":3,"names":["React","useState","useMemo","Search","Phone","MessageSquare","Mail","PhoneCall","MessageCircle","Send","Clock","TrendingUp","User","MapPin","FileText","X","ChevronRight","History","BarChart3","Filter","jsx","_jsx","jsxs","_jsxs","CommunicationsView","_ref","leads","jobCounts","communications","searchTerm","setSearchTerm","selectedCustomer","setSelectedCustomer","activeAction","setActiveAction","filterType","setFilterType","messageContent","setMessageContent","emailSubject","setEmailSubject","emailBody","setEmailBody","allCustomers","leadCustomers","map","lead","id","concat","type","name","address","phone","email","notes","quality","disposition","lastContact","source","jobCountCustomers","job","customerName","sqFt","status","filteredCustomers","filtered","filter","c","trim","term","toLowerCase","_c$name","_c$address","_c$phone","_c$email","includes","sort","a","b","aContact","Date","bContact","customerHistory","customerId","timestamp","stats","history","totalCalls","length","totalSMS","totalEmails","handleCustomerSelect","customer","handleActionClick","action","phoneNumber","replace","window","open","handleSendSMS","handleSendEmail","mailtoLink","encodeURIComponent","location","href","getQualityColor","colors","className","children","placeholder","value","onChange","e","target","onClick","disabled","rows","comm","index","toLocaleString","outcome"],"sources":["c:/Users/PC_User/Desktop/free-crm/bhotch-crm/src/features/communications/CommunicationsView.jsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport { Search, Phone, MessageSquare, Mail, PhoneCall, MessageCircle, Send, Clock, TrendingUp, User, MapPin, FileText, X, ChevronRight, History, BarChart3, Filter } from 'lucide-react';\n\nexport default function CommunicationsView({ leads, jobCounts, communications = [] }) {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCustomer, setSelectedCustomer] = useState(null);\n  const [activeAction, setActiveAction] = useState(null);\n  const [filterType, setFilterType] = useState('all');\n  const [messageContent, setMessageContent] = useState('');\n  const [emailSubject, setEmailSubject] = useState('');\n  const [emailBody, setEmailBody] = useState('');\n\n  // Combine leads and job counts into unified customer list\n  const allCustomers = useMemo(() => {\n    const leadCustomers = leads.map(lead => ({\n      id: `lead-${lead.id}`,\n      type: 'lead',\n      name: lead.name,\n      address: lead.address,\n      phone: lead.phone,\n      email: lead.email || '',\n      notes: lead.notes || '',\n      quality: lead.quality,\n      disposition: lead.disposition,\n      lastContact: lead.lastContact || null,\n      source: 'Bhotchleads'\n    }));\n\n    const jobCountCustomers = jobCounts.map(job => ({\n      id: `job-${job.id}`,\n      type: 'jobcount',\n      name: job.customerName,\n      address: job.address,\n      phone: job.phone || '',\n      email: job.email || '',\n      notes: job.notes || '',\n      sqFt: job.sqFt,\n      status: job.status,\n      source: 'Job Count'\n    }));\n\n    return [...leadCustomers, ...jobCountCustomers];\n  }, [leads, jobCounts]);\n\n  // Filter customers based on search and filter type\n  const filteredCustomers = useMemo(() => {\n    let filtered = allCustomers;\n\n    if (filterType !== 'all') {\n      filtered = filtered.filter(c => c.type === filterType);\n    }\n\n    if (searchTerm.trim()) {\n      const term = searchTerm.toLowerCase();\n      filtered = filtered.filter(c =>\n        c.name?.toLowerCase().includes(term) ||\n        c.address?.toLowerCase().includes(term) ||\n        c.phone?.includes(term) ||\n        c.email?.toLowerCase().includes(term)\n      );\n    }\n\n    return filtered.sort((a, b) => {\n      const aContact = a.lastContact ? new Date(a.lastContact) : new Date(0);\n      const bContact = b.lastContact ? new Date(b.lastContact) : new Date(0);\n      return bContact - aContact;\n    });\n  }, [allCustomers, searchTerm, filterType]);\n\n  // Get communication history for selected customer\n  const customerHistory = useMemo(() => {\n    if (!selectedCustomer) return [];\n    return communications\n      .filter(c => c.customerId === selectedCustomer.id)\n      .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));\n  }, [selectedCustomer, communications]);\n\n  // Calculate stats\n  const stats = useMemo(() => {\n    const history = selectedCustomer ? customerHistory : communications;\n    return {\n      totalCalls: history.filter(c => c.type === 'call').length,\n      totalSMS: history.filter(c => c.type === 'sms').length,\n      totalEmails: history.filter(c => c.type === 'email').length,\n      lastContact: history.length > 0 ? history[0].timestamp : null\n    };\n  }, [selectedCustomer, customerHistory, communications]);\n\n  const handleCustomerSelect = (customer) => {\n    setSelectedCustomer(customer);\n    setActiveAction(null);\n    setMessageContent('');\n    setEmailSubject('');\n    setEmailBody('');\n  };\n\n  const handleActionClick = (action) => {\n    if (activeAction === action) {\n      setActiveAction(null);\n    } else {\n      setActiveAction(action);\n      if (action === 'call') {\n        // Open Google Voice dialer\n        const phoneNumber = selectedCustomer.phone.replace(/\\D/g, '');\n        window.open(`https://voice.google.com/u/0/calls?a=nc,%2B1${phoneNumber}`, '_blank');\n      }\n    }\n  };\n\n  const handleSendSMS = () => {\n    if (!messageContent.trim()) return;\n    const phoneNumber = selectedCustomer.phone.replace(/\\D/g, '');\n    window.open(`https://voice.google.com/u/0/messages?itemId=t.%2B1${phoneNumber}`, '_blank');\n    setMessageContent('');\n  };\n\n  const handleSendEmail = () => {\n    if (!emailSubject.trim() || !emailBody.trim()) return;\n    const mailtoLink = `mailto:${selectedCustomer.email}?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`;\n    window.location.href = mailtoLink;\n    setEmailSubject('');\n    setEmailBody('');\n  };\n\n  const getQualityColor = (quality) => {\n    const colors = {\n      'Hot': 'bg-red-100 text-red-800 border-red-300',\n      'Warm': 'bg-orange-100 text-orange-800 border-orange-300',\n      'Cold': 'bg-blue-100 text-blue-800 border-blue-300'\n    };\n    return colors[quality] || 'bg-gray-100 text-gray-800 border-gray-300';\n  };\n\n  return (\n    <div className=\"h-[calc(100vh-140px)] flex gap-6\">\n      {/* Left Panel - Customer Search */}\n      <div className=\"w-1/3 bg-white rounded-lg shadow-sm border overflow-hidden flex flex-col\">\n        {/* Search Header */}\n        <div className=\"p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-4 flex items-center\">\n            <MessageCircle className=\"w-6 h-6 mr-2 text-blue-600\" />\n            Communications Hub\n          </h2>\n\n          {/* Search Bar */}\n          <div className=\"relative mb-3\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search customers by name, address, phone...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all\"\n            />\n          </div>\n\n          {/* Filter Buttons */}\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => setFilterType('all')}\n              className={`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all ${\n                filterType === 'all'\n                  ? 'bg-blue-600 text-white shadow-md'\n                  : 'bg-white text-gray-600 hover:bg-gray-50 border border-gray-200'\n              }`}\n            >\n              <Filter className=\"w-4 h-4 inline mr-1\" />\n              All ({allCustomers.length})\n            </button>\n            <button\n              onClick={() => setFilterType('lead')}\n              className={`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all ${\n                filterType === 'lead'\n                  ? 'bg-green-600 text-white shadow-md'\n                  : 'bg-white text-gray-600 hover:bg-gray-50 border border-gray-200'\n              }`}\n            >\n              Leads ({leads.length})\n            </button>\n            <button\n              onClick={() => setFilterType('jobcount')}\n              className={`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all ${\n                filterType === 'jobcount'\n                  ? 'bg-purple-600 text-white shadow-md'\n                  : 'bg-white text-gray-600 hover:bg-gray-50 border border-gray-200'\n              }`}\n            >\n              Jobs ({jobCounts.length})\n            </button>\n          </div>\n        </div>\n\n        {/* Customer List */}\n        <div className=\"flex-1 overflow-y-auto\">\n          {filteredCustomers.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center h-full text-gray-400 p-8\">\n              <Search className=\"w-16 h-16 mb-4 opacity-50\" />\n              <p className=\"text-lg font-medium\">No customers found</p>\n              <p className=\"text-sm\">Try adjusting your search or filters</p>\n            </div>\n          ) : (\n            filteredCustomers.map(customer => (\n              <div\n                key={customer.id}\n                onClick={() => handleCustomerSelect(customer)}\n                className={`p-4 border-b hover:bg-blue-50 cursor-pointer transition-all ${\n                  selectedCustomer?.id === customer.id ? 'bg-blue-100 border-l-4 border-l-blue-600' : ''\n                }`}\n              >\n                <div className=\"flex items-start justify-between mb-2\">\n                  <div className=\"flex-1\">\n                    <h3 className=\"font-semibold text-gray-900 flex items-center\">\n                      <User className=\"w-4 h-4 mr-2 text-gray-500\" />\n                      {customer.name}\n                    </h3>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <span className={`text-xs px-2 py-0.5 rounded-full border ${\n                        customer.type === 'lead'\n                          ? 'bg-green-50 text-green-700 border-green-200'\n                          : 'bg-purple-50 text-purple-700 border-purple-200'\n                      }`}>\n                        {customer.source}\n                      </span>\n                      {customer.quality && (\n                        <span className={`text-xs px-2 py-0.5 rounded-full border ${getQualityColor(customer.quality)}`}>\n                          {customer.quality}\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                  <ChevronRight className={`w-5 h-5 text-gray-400 transition-transform ${\n                    selectedCustomer?.id === customer.id ? 'rotate-90' : ''\n                  }`} />\n                </div>\n\n                <div className=\"space-y-1 text-sm text-gray-600\">\n                  {customer.phone && (\n                    <div className=\"flex items-center\">\n                      <Phone className=\"w-3 h-3 mr-2 text-gray-400\" />\n                      {customer.phone}\n                    </div>\n                  )}\n                  {customer.address && (\n                    <div className=\"flex items-center\">\n                      <MapPin className=\"w-3 h-3 mr-2 text-gray-400\" />\n                      {customer.address}\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n\n      {/* Right Panel - Customer Details & Communication */}\n      {selectedCustomer ? (\n        <div className=\"flex-1 bg-white rounded-lg shadow-sm border overflow-hidden flex flex-col\">\n          {/* Customer Header */}\n          <div className=\"p-6 border-b bg-gradient-to-r from-indigo-50 to-purple-50\">\n            <div className=\"flex items-start justify-between mb-4\">\n              <div className=\"flex-1\">\n                <h2 className=\"text-2xl font-bold text-gray-900 mb-1\">{selectedCustomer.name}</h2>\n                <p className=\"text-gray-600 flex items-center\">\n                  <MapPin className=\"w-4 h-4 mr-2\" />\n                  {selectedCustomer.address}\n                </p>\n              </div>\n              <button\n                onClick={() => setSelectedCustomer(null)}\n                className=\"p-2 hover:bg-white rounded-lg transition-colors\"\n              >\n                <X className=\"w-5 h-5 text-gray-500\" />\n              </button>\n            </div>\n\n            {/* Stats Cards */}\n            <div className=\"grid grid-cols-4 gap-3 mb-4\">\n              <div className=\"bg-white rounded-lg p-3 border border-blue-100 shadow-sm\">\n                <div className=\"flex items-center justify-between\">\n                  <PhoneCall className=\"w-5 h-5 text-blue-600\" />\n                  <span className=\"text-2xl font-bold text-gray-900\">{stats.totalCalls}</span>\n                </div>\n                <p className=\"text-xs text-gray-600 mt-1\">Calls</p>\n              </div>\n              <div className=\"bg-white rounded-lg p-3 border border-green-100 shadow-sm\">\n                <div className=\"flex items-center justify-between\">\n                  <MessageSquare className=\"w-5 h-5 text-green-600\" />\n                  <span className=\"text-2xl font-bold text-gray-900\">{stats.totalSMS}</span>\n                </div>\n                <p className=\"text-xs text-gray-600 mt-1\">SMS</p>\n              </div>\n              <div className=\"bg-white rounded-lg p-3 border border-purple-100 shadow-sm\">\n                <div className=\"flex items-center justify-between\">\n                  <Mail className=\"w-5 h-5 text-purple-600\" />\n                  <span className=\"text-2xl font-bold text-gray-900\">{stats.totalEmails}</span>\n                </div>\n                <p className=\"text-xs text-gray-600 mt-1\">Emails</p>\n              </div>\n              <div className=\"bg-white rounded-lg p-3 border border-orange-100 shadow-sm\">\n                <div className=\"flex items-center justify-between\">\n                  <TrendingUp className=\"w-5 h-5 text-orange-600\" />\n                  <span className=\"text-2xl font-bold text-gray-900\">{customerHistory.length}</span>\n                </div>\n                <p className=\"text-xs text-gray-600 mt-1\">Total</p>\n              </div>\n            </div>\n\n            {/* Notes Section */}\n            {selectedCustomer.notes && (\n              <div className=\"bg-white rounded-lg p-3 border border-gray-200\">\n                <div className=\"flex items-start\">\n                  <FileText className=\"w-4 h-4 mr-2 text-gray-500 mt-0.5\" />\n                  <div className=\"flex-1\">\n                    <p className=\"text-xs font-semibold text-gray-700 mb-1\">Notes</p>\n                    <p className=\"text-sm text-gray-600\">{selectedCustomer.notes}</p>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"p-4 border-b bg-gray-50\">\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => handleActionClick('call')}\n                disabled={!selectedCustomer.phone}\n                className={`flex-1 py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${\n                  activeAction === 'call'\n                    ? 'bg-blue-600 text-white shadow-lg scale-105'\n                    : 'bg-white text-gray-700 border-2 border-blue-200 hover:border-blue-400 hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed'\n                }`}\n              >\n                <PhoneCall className=\"w-5 h-5\" />\n                Call\n              </button>\n              <button\n                onClick={() => handleActionClick('sms')}\n                disabled={!selectedCustomer.phone}\n                className={`flex-1 py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${\n                  activeAction === 'sms'\n                    ? 'bg-green-600 text-white shadow-lg scale-105'\n                    : 'bg-white text-gray-700 border-2 border-green-200 hover:border-green-400 hover:bg-green-50 disabled:opacity-50 disabled:cursor-not-allowed'\n                }`}\n              >\n                <MessageSquare className=\"w-5 h-5\" />\n                SMS\n              </button>\n              <button\n                onClick={() => handleActionClick('email')}\n                disabled={!selectedCustomer.email}\n                className={`flex-1 py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${\n                  activeAction === 'email'\n                    ? 'bg-purple-600 text-white shadow-lg scale-105'\n                    : 'bg-white text-gray-700 border-2 border-purple-200 hover:border-purple-400 hover:bg-purple-50 disabled:opacity-50 disabled:cursor-not-allowed'\n                }`}\n              >\n                <Mail className=\"w-5 h-5\" />\n                Email\n              </button>\n            </div>\n          </div>\n\n          {/* Communication Interface */}\n          {activeAction && (\n            <div className=\"p-4 border-b bg-gradient-to-r from-blue-50 to-purple-50\">\n              {activeAction === 'sms' && (\n                <div className=\"space-y-3\">\n                  <h3 className=\"font-semibold text-gray-900 flex items-center\">\n                    <MessageSquare className=\"w-5 h-5 mr-2 text-green-600\" />\n                    Send SMS via Google Voice\n                  </h3>\n                  <textarea\n                    value={messageContent}\n                    onChange={(e) => setMessageContent(e.target.value)}\n                    placeholder=\"Type your message here...\"\n                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none\"\n                    rows=\"3\"\n                  />\n                  <button\n                    onClick={handleSendSMS}\n                    disabled={!messageContent.trim()}\n                    className=\"w-full bg-green-600 text-white py-2.5 px-4 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2\"\n                  >\n                    <Send className=\"w-4 h-4\" />\n                    Open Google Voice SMS\n                  </button>\n                </div>\n              )}\n\n              {activeAction === 'email' && (\n                <div className=\"space-y-3\">\n                  <h3 className=\"font-semibold text-gray-900 flex items-center\">\n                    <Mail className=\"w-5 h-5 mr-2 text-purple-600\" />\n                    Send Email\n                  </h3>\n                  <input\n                    type=\"text\"\n                    value={emailSubject}\n                    onChange={(e) => setEmailSubject(e.target.value)}\n                    placeholder=\"Subject\"\n                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500\"\n                  />\n                  <textarea\n                    value={emailBody}\n                    onChange={(e) => setEmailBody(e.target.value)}\n                    placeholder=\"Email body...\"\n                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none\"\n                    rows=\"4\"\n                  />\n                  <button\n                    onClick={handleSendEmail}\n                    disabled={!emailSubject.trim() || !emailBody.trim()}\n                    className=\"w-full bg-purple-600 text-white py-2.5 px-4 rounded-lg font-medium hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2\"\n                  >\n                    <Send className=\"w-4 h-4\" />\n                    Open Email Client\n                  </button>\n                </div>\n              )}\n\n              {activeAction === 'call' && (\n                <div className=\"text-center py-4\">\n                  <PhoneCall className=\"w-12 h-12 mx-auto mb-3 text-blue-600 animate-pulse\" />\n                  <p className=\"text-gray-600\">Google Voice call window opened</p>\n                  <p className=\"text-sm text-gray-500 mt-1\">Calling {selectedCustomer.phone}</p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Communication History */}\n          <div className=\"flex-1 overflow-y-auto p-4\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"font-semibold text-gray-900 flex items-center\">\n                <History className=\"w-5 h-5 mr-2 text-gray-600\" />\n                Communication History\n              </h3>\n              {customerHistory.length > 0 && (\n                <span className=\"text-sm text-gray-500\">{customerHistory.length} interactions</span>\n              )}\n            </div>\n\n            {customerHistory.length === 0 ? (\n              <div className=\"flex flex-col items-center justify-center h-64 text-gray-400\">\n                <BarChart3 className=\"w-16 h-16 mb-4 opacity-50\" />\n                <p className=\"text-lg font-medium\">No communication history</p>\n                <p className=\"text-sm\">Start by making a call, sending an SMS, or email</p>\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                {customerHistory.map((comm, index) => (\n                  <div\n                    key={index}\n                    className=\"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"\n                  >\n                    <div className=\"flex items-start justify-between mb-2\">\n                      <div className=\"flex items-center gap-2\">\n                        {comm.type === 'call' && <PhoneCall className=\"w-4 h-4 text-blue-600\" />}\n                        {comm.type === 'sms' && <MessageSquare className=\"w-4 h-4 text-green-600\" />}\n                        {comm.type === 'email' && <Mail className=\"w-4 h-4 text-purple-600\" />}\n                        <span className=\"font-medium text-gray-900 capitalize\">{comm.type}</span>\n                      </div>\n                      <div className=\"flex items-center text-xs text-gray-500\">\n                        <Clock className=\"w-3 h-3 mr-1\" />\n                        {new Date(comm.timestamp).toLocaleString()}\n                      </div>\n                    </div>\n                    {comm.notes && (\n                      <p className=\"text-sm text-gray-600 mt-2 pl-6\">{comm.notes}</p>\n                    )}\n                    {comm.outcome && (\n                      <div className=\"mt-2 pl-6\">\n                        <span className={`text-xs px-2 py-1 rounded-full ${\n                          comm.outcome === 'Completed' ? 'bg-green-100 text-green-700' :\n                          comm.outcome === 'No Answer' ? 'bg-yellow-100 text-yellow-700' :\n                          'bg-gray-100 text-gray-700'\n                        }`}>\n                          {comm.outcome}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      ) : (\n        <div className=\"flex-1 bg-white rounded-lg shadow-sm border flex items-center justify-center\">\n          <div className=\"text-center text-gray-400 p-8\">\n            <MessageCircle className=\"w-24 h-24 mx-auto mb-6 opacity-20\" />\n            <h3 className=\"text-2xl font-bold mb-2\">Select a Customer</h3>\n            <p className=\"text-lg\">Choose a customer from the left to view details and communicate</p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}