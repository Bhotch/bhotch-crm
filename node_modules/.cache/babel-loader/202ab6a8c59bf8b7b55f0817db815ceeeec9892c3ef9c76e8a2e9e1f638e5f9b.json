{"ast":null,"code":"import _objectSpread from\"C:/Users/PC_User/Desktop/free-crm/bhotch-crm/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,useMemo,useCallback}from'react';import{Loader2,AlertCircle,Map,MapPin,Navigation,Layers,Search}from'lucide-react';import{loadGoogleMaps}from'../../services/googleMapsService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function GoogleMapComponent(_ref){let{leads,onLeadClick,showDemoData,mapType,showTraffic,searchAddress,onSearchComplete}=_ref;const mapRef=useRef(null);const markersRef=useRef([]);const infoWindowRef=useRef(null);const trafficLayerRef=useRef(null);const[map,setMap]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[geocodedLeads,setGeocodedLeads]=useState([]);const[geocodingProgress,setGeocodingProgress]=useState(0);// Demo data for when no real leads exist\nconst demoLeads=useMemo(()=>[{id:'demo1',customerName:'John Smith',phoneNumber:'555-0123',address:'123 Main St, Ogden, UT',quality:'Hot',latitude:41.2230,longitude:-111.9738},{id:'demo2',customerName:'Sarah Johnson',phoneNumber:'555-0456',address:'456 Oak Ave, Salt Lake City, UT',quality:'Warm',latitude:40.7608,longitude:-111.8910},{id:'demo3',customerName:'Mike Wilson',phoneNumber:'555-0789',address:'789 Pine St, Provo, UT',quality:'Cold',latitude:40.2338,longitude:-111.6585},{id:'demo4',customerName:'Emily Davis',phoneNumber:'555-0321',address:'321 Elm Dr, West Valley, UT',quality:'Hot',latitude:40.6916,longitude:-112.0011},{id:'demo5',customerName:'Chris Brown',phoneNumber:'555-0654',address:'654 Cedar Ln, Layton, UT',quality:'Warm',latitude:41.0602,longitude:-111.9711}],[]);// Use demo data if showDemoData is true, otherwise use all leads (with and without coords)\nconst dataToShow=showDemoData?demoLeads:leads;// Separate leads with valid addresses for geocoding\nconst leadsWithAddresses=dataToShow.filter(lead=>lead.address&&lead.address.trim()!=='');const leadsWithoutAddresses=dataToShow.filter(lead=>!lead.address||lead.address.trim()==='');const getMarkerColor=useCallback(quality=>{switch(quality){case'Hot':return'#dc2626';case'Warm':return'#f59e0b';case'Cold':return'#3b82f6';default:return'#6b7280';}},[]);const createMarkerIcon=useCallback(quality=>{const color=getMarkerColor(quality);return{url:'data:image/svg+xml;charset=UTF-8,'+encodeURIComponent(\"<svg width=\\\"36\\\" height=\\\"36\\\" viewBox=\\\"0 0 36 36\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n          <path d=\\\"M18 2c-7.7 0-14 6.3-14 14 0 10.5 14 18 14 18s14-7.5 14-18c0-7.7-6.3-14-14-14z\\\" fill=\\\"\".concat(color,\"\\\" stroke=\\\"#ffffff\\\" stroke-width=\\\"2\\\"/>\\n          <circle cx=\\\"18\\\" cy=\\\"16\\\" r=\\\"6\\\" fill=\\\"#ffffff\\\"/>\\n          <circle cx=\\\"18\\\" cy=\\\"16\\\" r=\\\"3\\\" fill=\\\"\").concat(color,\"\\\"/>\\n        </svg>\")),scaledSize:new window.google.maps.Size(36,36),anchor:new window.google.maps.Point(18,36)};},[getMarkerColor]);useEffect(()=>{const initializeMap=async()=>{try{const google=await loadGoogleMaps();if(!mapRef.current)return;const mapStyles=[{featureType:\"poi.business\",stylers:[{visibility:\"off\"}]},{featureType:\"poi.park\",elementType:\"labels.text\",stylers:[{visibility:\"off\"}]}];const mapInstance=new google.maps.Map(mapRef.current,{center:{lat:40.7608,lng:-111.8910},// Salt Lake City center\nzoom:9,styles:mapStyles,mapTypeId:mapType,mapTypeControl:true,streetViewControl:true,fullscreenControl:true,zoomControl:true});// Initialize traffic layer\ntrafficLayerRef.current=new google.maps.TrafficLayer();if(showTraffic){trafficLayerRef.current.setMap(mapInstance);}infoWindowRef.current=new google.maps.InfoWindow();setMap(mapInstance);}catch(err){setError(err.message);}finally{setLoading(false);}};initializeMap();},[mapType,showTraffic]);// Update traffic layer visibility\nuseEffect(()=>{if(trafficLayerRef.current&&map){trafficLayerRef.current.setMap(showTraffic?map:null);}},[showTraffic,map]);// Handle address search when searchAddress changes\nuseEffect(()=>{if(!map||!window.google||!searchAddress)return;const geocoder=new window.google.maps.Geocoder();geocoder.geocode({address:searchAddress},(results,status)=>{if(status==='OK'&&results[0]){const location=results[0].geometry.location;map.setCenter(location);map.setZoom(15);// Add a marker for the searched address\nnew window.google.maps.Marker({position:location,map,title:searchAddress,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:8,fillColor:'#4F46E5',fillOpacity:1,strokeColor:'#ffffff',strokeWeight:2}});}// Clear the search address after processing\nif(onSearchComplete)onSearchComplete();});},[map,searchAddress,onSearchComplete]);useEffect(()=>{window.viewLeadDetails=leadId=>{const lead=dataToShow.find(l=>l.id===leadId);if(lead&&onLeadClick)onLeadClick(lead);};return()=>{window.viewLeadDetails=null;};},[dataToShow,onLeadClick]);// Geocode leads with addresses\nuseEffect(()=>{if(!map||!window.google||leadsWithAddresses.length===0)return;const geocoder=new window.google.maps.Geocoder();const geocodeLeads=async()=>{setGeocodingProgress(0);const geocoded=[];for(let i=0;i<leadsWithAddresses.length;i++){const lead=leadsWithAddresses[i];try{await new Promise(resolve=>{geocoder.geocode({address:lead.address},(results,status)=>{if(status==='OK'&&results[0]){const location=results[0].geometry.location;geocoded.push(_objectSpread(_objectSpread({},lead),{},{geocoded_lat:location.lat(),geocoded_lng:location.lng()}));}setGeocodingProgress((i+1)/leadsWithAddresses.length*100);// Add a small delay to avoid hitting rate limits\nsetTimeout(resolve,100);});});}catch(error){console.warn('Geocoding failed for lead:',lead.customerName,error);}}setGeocodedLeads(geocoded);};geocodeLeads();},[map,leadsWithAddresses]);// Create markers for geocoded leads\nuseEffect(()=>{if(!map||!window.google||geocodedLeads.length===0)return;// Clear existing markers\nmarkersRef.current.forEach(marker=>marker.setMap(null));markersRef.current=[];const bounds=new window.google.maps.LatLngBounds();geocodedLeads.forEach(lead=>{const position={lat:lead.geocoded_lat,lng:lead.geocoded_lng};const marker=new window.google.maps.Marker({position,map,title:lead.customerName,icon:createMarkerIcon(lead.quality),animation:window.google.maps.Animation.DROP});marker.addListener('click',()=>{const content=\"\\n          <div style=\\\"padding: 12px; min-width: 200px;\\\">\\n            <h3 style=\\\"margin: 0 0 8px 0; color: #1f2937; font-size: 16px; font-weight: 600;\\\">\\n              \".concat(lead.customerName||'Unknown',\"\\n            </h3>\\n            <div style=\\\"margin-bottom: 8px;\\\">\\n              <strong style=\\\"color: #374151;\\\">Phone:</strong>\\n              <a href=\\\"tel:\").concat(lead.phoneNumber,\"\\\" style=\\\"color: #3b82f6; text-decoration: none;\\\">\\n                \").concat(lead.phoneNumber||'N/A',\"\\n              </a>\\n            </div>\\n            <div style=\\\"margin-bottom: 8px;\\\">\\n              <strong style=\\\"color: #374151;\\\">Quality:</strong>\\n              <span style=\\\"background: \").concat(getMarkerColor(lead.quality),\"20; color: \").concat(getMarkerColor(lead.quality),\"; padding: 2px 6px; border-radius: 4px; font-size: 12px;\\\">\\n                \").concat(lead.quality,\"\\n              </span>\\n            </div>\\n            \").concat(lead.address?\"<div style=\\\"margin-bottom: 12px; color: #6b7280; font-size: 14px;\\\">\".concat(lead.address,\"</div>\"):'',\"\\n            <button onclick=\\\"window.viewLeadDetails('\").concat(lead.id,\"')\\\"\\n                    style=\\\"background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500;\\\">\\n              View Details\\n            </button>\\n          </div>\\n        \");infoWindowRef.current.setContent(content);infoWindowRef.current.open(map,marker);});markersRef.current.push(marker);bounds.extend(position);});if(geocodedLeads.length>0){map.fitBounds(bounds);// Ensure reasonable zoom level\nwindow.google.maps.event.addListenerOnce(map,'bounds_changed',()=>{if(map.getZoom()>15)map.setZoom(15);});}},[map,geocodedLeads,createMarkerIcon,getMarkerColor,onLeadClick]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"h-[70vh] w-full rounded-lg border border-gray-300 flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"animate-spin h-10 w-10 text-blue-600 mx-auto mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-lg\",children:\"Loading Interactive Map...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm mt-1\",children:\"Connecting to Google Maps\"})]})});}// Show geocoding progress if in progress\nif(map&&geocodingProgress>0&&geocodingProgress<100){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"h-[70vh] w-full rounded-lg border border-gray-300 flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"animate-spin h-10 w-10 text-blue-600 mx-auto mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-lg\",children:\"Geocoding Customer Addresses...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-64 bg-gray-200 rounded-full h-2 mx-auto mt-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-600 h-2 rounded-full transition-all\",style:{width:\"\".concat(geocodingProgress,\"%\")}})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-sm mt-2\",children:[Math.round(geocodingProgress),\"% Complete\"]})]})})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"h-[70vh] w-full rounded-lg border border-red-300 flex items-center justify-center bg-red-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center max-w-md\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-12 w-12 text-red-600 mx-auto mb-3\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-red-800 mb-2\",children:\"Map Loading Failed\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 mb-3\",children:error}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Please check your Google Maps API key configuration and internet connection.\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{ref:mapRef,className:\"h-[70vh] w-full rounded-lg overflow-hidden border border-gray-300 shadow-sm\"}),!showDemoData&&leadsWithoutAddresses.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-sm font-semibold text-yellow-800 mb-3 flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-4 h-4 mr-2\"}),\"Leads Without Address Data (\",leadsWithoutAddresses.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-3\",children:leadsWithoutAddresses.slice(0,4).map(lead=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-3 rounded border border-yellow-200 hover:shadow-sm transition-shadow cursor-pointer\",onClick:()=>onLeadClick&&onLeadClick(lead),children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:lead.customerName||'Unknown'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:lead.phoneNumber||'No phone'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"No address provided\"})]},lead.id))}),leadsWithoutAddresses.length>4&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 text-sm text-yellow-700\",children:[\"And \",leadsWithoutAddresses.length-4,\" more leads without addresses...\"]})]})]});}function MapView(_ref2){let{leads,onLeadClick,searchAddress,onSearchComplete}=_ref2;const[showDemoData,setShowDemoData]=useState(false);const[mapType,setMapType]=useState('roadmap');const[showTraffic,setShowTraffic]=useState(false);const leadsWithAddresses=useMemo(()=>leads.filter(lead=>lead.address&&lead.address.trim()!==''),[leads]);const hasRealData=leadsWithAddresses.length>0;const qualityStats=useMemo(()=>{const dataToAnalyze=showDemoData?[{quality:'Hot'},{quality:'Hot'},{quality:'Warm'},{quality:'Warm'},{quality:'Cold'}]:leads;return{hot:dataToAnalyze.filter(l=>l.quality==='Hot').length,warm:dataToAnalyze.filter(l=>l.quality==='Warm').length,cold:dataToAnalyze.filter(l=>l.quality==='Cold').length,total:dataToAnalyze.length,mapped:leadsWithAddresses.length};},[leads,leadsWithAddresses,showDemoData]);return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-3xl font-bold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-8 h-8 mr-3 text-blue-600\"}),\"Customer Locations\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"Interactive map showing customer locations with lead quality indicators\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-gray-100 rounded-lg p-1\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowDemoData(false),className:\"px-3 py-1 text-sm font-medium rounded-md transition-colors \".concat(!showDemoData?'bg-white text-gray-900 shadow-sm':'text-gray-600 hover:text-gray-900'),children:[\"Real Data (\",leads.length,\")\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDemoData(true),className:\"px-3 py-1 text-sm font-medium rounded-md transition-colors \".concat(showDemoData?'bg-white text-gray-900 shadow-sm':'text-gray-600 hover:text-gray-900'),children:\"Demo Data (5)\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:mapType,onChange:e=>setMapType(e.target.value),className:\"text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"roadmap\",children:\"Road Map\"}),/*#__PURE__*/_jsx(\"option\",{value:\"satellite\",children:\"Satellite\"}),/*#__PURE__*/_jsx(\"option\",{value:\"hybrid\",children:\"Hybrid\"}),/*#__PURE__*/_jsx(\"option\",{value:\"terrain\",children:\"Terrain\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowTraffic(!showTraffic),className:\"flex items-center px-3 py-2 text-sm font-medium rounded-lg border transition-colors \".concat(showTraffic?'bg-blue-50 border-blue-200 text-blue-700':'bg-white border-gray-300 text-gray-700 hover:bg-gray-50'),children:[/*#__PURE__*/_jsx(Navigation,{className:\"w-4 h-4 mr-2\"}),\"Traffic\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-4 border-l-4 border-red-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-red-500 rounded-full\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Hot Leads\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:qualityStats.hot})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-4 border-l-4 border-yellow-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-yellow-500 rounded-full\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Warm Leads\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:qualityStats.warm})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-4 border-l-4 border-blue-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-blue-500 rounded-full\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Cold Leads\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:qualityStats.cold})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-4 border-l-4 border-gray-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 text-gray-600\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Total Mapped\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:showDemoData?5:qualityStats.mapped})]})]})})]}),!hasRealData&&!showDemoData?/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-lg p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Map,{className:\"mx-auto h-20 w-20 text-gray-400 mb-6\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 mb-3\",children:\"No Location Data Available\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6 max-w-md mx-auto\",children:\"Your leads don't have geocoded coordinates yet. Add addresses to your leads or use demo data to see the map in action.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-3 justify-center\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowDemoData(true),className:\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(Map,{className:\"w-4 h-4 mr-2\"}),\"View Demo Data\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-4 h-4 mr-2\"}),\"Learn About Geocoding\"]})]})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-gray-50 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Interactive Map\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-red-500 rounded-full mr-1\"}),\"Hot (\",qualityStats.hot,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-yellow-500 rounded-full mr-1\"}),\"Warm (\",qualityStats.warm,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-blue-500 rounded-full mr-1\"}),\"Cold (\",qualityStats.cold,\")\"]})]})]}),showDemoData&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-blue-600 bg-blue-50 px-3 py-1 rounded-full\",children:[/*#__PURE__*/_jsx(Layers,{className:\"w-4 h-4 mr-1\"}),\"Demo Mode\"]})]})}),/*#__PURE__*/_jsx(GoogleMapComponent,{leads:leads,onLeadClick:onLeadClick,showDemoData:showDemoData,mapType:mapType,showTraffic:showTraffic,searchAddress:searchAddress,onSearchComplete:onSearchComplete})]})]});}export default MapView;","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","useCallback","Loader2","AlertCircle","Map","MapPin","Navigation","Layers","Search","loadGoogleMaps","jsx","_jsx","jsxs","_jsxs","GoogleMapComponent","_ref","leads","onLeadClick","showDemoData","mapType","showTraffic","searchAddress","onSearchComplete","mapRef","markersRef","infoWindowRef","trafficLayerRef","map","setMap","loading","setLoading","error","setError","geocodedLeads","setGeocodedLeads","geocodingProgress","setGeocodingProgress","demoLeads","id","customerName","phoneNumber","address","quality","latitude","longitude","dataToShow","leadsWithAddresses","filter","lead","trim","leadsWithoutAddresses","getMarkerColor","createMarkerIcon","color","url","encodeURIComponent","concat","scaledSize","window","google","maps","Size","anchor","Point","initializeMap","current","mapStyles","featureType","stylers","visibility","elementType","mapInstance","center","lat","lng","zoom","styles","mapTypeId","mapTypeControl","streetViewControl","fullscreenControl","zoomControl","TrafficLayer","InfoWindow","err","message","geocoder","Geocoder","geocode","results","status","location","geometry","setCenter","setZoom","Marker","position","title","icon","path","SymbolPath","CIRCLE","scale","fillColor","fillOpacity","strokeColor","strokeWeight","viewLeadDetails","leadId","find","l","length","geocodeLeads","geocoded","i","Promise","resolve","push","_objectSpread","geocoded_lat","geocoded_lng","setTimeout","console","warn","forEach","marker","bounds","LatLngBounds","animation","Animation","DROP","addListener","content","setContent","open","extend","fitBounds","event","addListenerOnce","getZoom","className","children","style","width","Math","round","ref","slice","onClick","MapView","_ref2","setShowDemoData","setMapType","setShowTraffic","hasRealData","qualityStats","dataToAnalyze","hot","warm","cold","total","mapped","value","onChange","e","target"],"sources":["C:/Users/PC_User/Desktop/free-crm/bhotch-crm/src/features/map/MapView.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo, useCallback } from 'react';\r\nimport { Loader2, AlertCircle, Map, MapPin, Navigation, Layers, Search } from 'lucide-react';\r\nimport { loadGoogleMaps } from '../../services/googleMapsService';\r\n\r\nfunction GoogleMapComponent({ leads, onLeadClick, showDemoData, mapType, showTraffic, searchAddress, onSearchComplete }) {\r\n  const mapRef = useRef(null);\r\n  const markersRef = useRef([]);\r\n  const infoWindowRef = useRef(null);\r\n  const trafficLayerRef = useRef(null);\r\n  const [map, setMap] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [geocodedLeads, setGeocodedLeads] = useState([]);\r\n  const [geocodingProgress, setGeocodingProgress] = useState(0);\r\n\r\n  // Demo data for when no real leads exist\r\n  const demoLeads = useMemo(() => [\r\n    { id: 'demo1', customerName: 'John Smith', phoneNumber: '555-0123', address: '123 Main St, Ogden, UT', quality: 'Hot', latitude: 41.2230, longitude: -111.9738 },\r\n    { id: 'demo2', customerName: 'Sarah Johnson', phoneNumber: '555-0456', address: '456 Oak Ave, Salt Lake City, UT', quality: 'Warm', latitude: 40.7608, longitude: -111.8910 },\r\n    { id: 'demo3', customerName: 'Mike Wilson', phoneNumber: '555-0789', address: '789 Pine St, Provo, UT', quality: 'Cold', latitude: 40.2338, longitude: -111.6585 },\r\n    { id: 'demo4', customerName: 'Emily Davis', phoneNumber: '555-0321', address: '321 Elm Dr, West Valley, UT', quality: 'Hot', latitude: 40.6916, longitude: -112.0011 },\r\n    { id: 'demo5', customerName: 'Chris Brown', phoneNumber: '555-0654', address: '654 Cedar Ln, Layton, UT', quality: 'Warm', latitude: 41.0602, longitude: -111.9711 }\r\n  ], []);\r\n\r\n  // Use demo data if showDemoData is true, otherwise use all leads (with and without coords)\r\n  const dataToShow = showDemoData ? demoLeads : leads;\r\n\r\n  // Separate leads with valid addresses for geocoding\r\n  const leadsWithAddresses = dataToShow.filter(lead => lead.address && lead.address.trim() !== '');\r\n  const leadsWithoutAddresses = dataToShow.filter(lead => !lead.address || lead.address.trim() === '');\r\n\r\n  const getMarkerColor = useCallback((quality) => {\r\n    switch (quality) {\r\n      case 'Hot': return '#dc2626';\r\n      case 'Warm': return '#f59e0b';\r\n      case 'Cold': return '#3b82f6';\r\n      default: return '#6b7280';\r\n    }\r\n  }, []);\r\n\r\n  const createMarkerIcon = useCallback((quality) => {\r\n    const color = getMarkerColor(quality);\r\n    return {\r\n      url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(\r\n        `<svg width=\"36\" height=\"36\" viewBox=\"0 0 36 36\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path d=\"M18 2c-7.7 0-14 6.3-14 14 0 10.5 14 18 14 18s14-7.5 14-18c0-7.7-6.3-14-14-14z\" fill=\"${color}\" stroke=\"#ffffff\" stroke-width=\"2\"/>\r\n          <circle cx=\"18\" cy=\"16\" r=\"6\" fill=\"#ffffff\"/>\r\n          <circle cx=\"18\" cy=\"16\" r=\"3\" fill=\"${color}\"/>\r\n        </svg>`\r\n      ),\r\n      scaledSize: new window.google.maps.Size(36, 36),\r\n      anchor: new window.google.maps.Point(18, 36)\r\n    };\r\n  }, [getMarkerColor]);\r\n\r\n  useEffect(() => {\r\n    const initializeMap = async () => {\r\n      try {\r\n        const google = await loadGoogleMaps();\r\n        if (!mapRef.current) return;\r\n\r\n        const mapStyles = [\r\n          { featureType: \"poi.business\", stylers: [{ visibility: \"off\" }] },\r\n          { featureType: \"poi.park\", elementType: \"labels.text\", stylers: [{ visibility: \"off\" }] }\r\n        ];\r\n\r\n        const mapInstance = new google.maps.Map(mapRef.current, {\r\n          center: { lat: 40.7608, lng: -111.8910 }, // Salt Lake City center\r\n          zoom: 9,\r\n          styles: mapStyles,\r\n          mapTypeId: mapType,\r\n          mapTypeControl: true,\r\n          streetViewControl: true,\r\n          fullscreenControl: true,\r\n          zoomControl: true\r\n        });\r\n\r\n        // Initialize traffic layer\r\n        trafficLayerRef.current = new google.maps.TrafficLayer();\r\n        if (showTraffic) {\r\n          trafficLayerRef.current.setMap(mapInstance);\r\n        }\r\n\r\n        infoWindowRef.current = new google.maps.InfoWindow();\r\n        setMap(mapInstance);\r\n      } catch (err) {\r\n        setError(err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    initializeMap();\r\n  }, [mapType, showTraffic]);\r\n\r\n  // Update traffic layer visibility\r\n  useEffect(() => {\r\n    if (trafficLayerRef.current && map) {\r\n      trafficLayerRef.current.setMap(showTraffic ? map : null);\r\n    }\r\n  }, [showTraffic, map]);\r\n\r\n  // Handle address search when searchAddress changes\r\n  useEffect(() => {\r\n    if (!map || !window.google || !searchAddress) return;\r\n\r\n    const geocoder = new window.google.maps.Geocoder();\r\n    geocoder.geocode({ address: searchAddress }, (results, status) => {\r\n      if (status === 'OK' && results[0]) {\r\n        const location = results[0].geometry.location;\r\n        map.setCenter(location);\r\n        map.setZoom(15);\r\n\r\n        // Add a marker for the searched address\r\n        new window.google.maps.Marker({\r\n          position: location,\r\n          map,\r\n          title: searchAddress,\r\n          icon: {\r\n            path: window.google.maps.SymbolPath.CIRCLE,\r\n            scale: 8,\r\n            fillColor: '#4F46E5',\r\n            fillOpacity: 1,\r\n            strokeColor: '#ffffff',\r\n            strokeWeight: 2\r\n          }\r\n        });\r\n      }\r\n      // Clear the search address after processing\r\n      if (onSearchComplete) onSearchComplete();\r\n    });\r\n  }, [map, searchAddress, onSearchComplete]);\r\n\r\n  useEffect(() => {\r\n    window.viewLeadDetails = (leadId) => {\r\n      const lead = dataToShow.find(l => l.id === leadId);\r\n      if (lead && onLeadClick) onLeadClick(lead);\r\n    };\r\n    return () => { window.viewLeadDetails = null; };\r\n  }, [dataToShow, onLeadClick]);\r\n\r\n  // Geocode leads with addresses\r\n  useEffect(() => {\r\n    if (!map || !window.google || leadsWithAddresses.length === 0) return;\r\n\r\n    const geocoder = new window.google.maps.Geocoder();\r\n    const geocodeLeads = async () => {\r\n      setGeocodingProgress(0);\r\n      const geocoded = [];\r\n\r\n      for (let i = 0; i < leadsWithAddresses.length; i++) {\r\n        const lead = leadsWithAddresses[i];\r\n\r\n        try {\r\n          await new Promise((resolve) => {\r\n            geocoder.geocode({ address: lead.address }, (results, status) => {\r\n              if (status === 'OK' && results[0]) {\r\n                const location = results[0].geometry.location;\r\n                geocoded.push({\r\n                  ...lead,\r\n                  geocoded_lat: location.lat(),\r\n                  geocoded_lng: location.lng()\r\n                });\r\n              }\r\n              setGeocodingProgress(((i + 1) / leadsWithAddresses.length) * 100);\r\n              // Add a small delay to avoid hitting rate limits\r\n              setTimeout(resolve, 100);\r\n            });\r\n          });\r\n        } catch (error) {\r\n          console.warn('Geocoding failed for lead:', lead.customerName, error);\r\n        }\r\n      }\r\n\r\n      setGeocodedLeads(geocoded);\r\n    };\r\n\r\n    geocodeLeads();\r\n  }, [map, leadsWithAddresses]);\r\n\r\n  // Create markers for geocoded leads\r\n  useEffect(() => {\r\n    if (!map || !window.google || geocodedLeads.length === 0) return;\r\n\r\n    // Clear existing markers\r\n    markersRef.current.forEach(marker => marker.setMap(null));\r\n    markersRef.current = [];\r\n\r\n    const bounds = new window.google.maps.LatLngBounds();\r\n\r\n    geocodedLeads.forEach(lead => {\r\n      const position = { lat: lead.geocoded_lat, lng: lead.geocoded_lng };\r\n\r\n      const marker = new window.google.maps.Marker({\r\n        position,\r\n        map,\r\n        title: lead.customerName,\r\n        icon: createMarkerIcon(lead.quality),\r\n        animation: window.google.maps.Animation.DROP\r\n      });\r\n\r\n      marker.addListener('click', () => {\r\n        const content = `\r\n          <div style=\"padding: 12px; min-width: 200px;\">\r\n            <h3 style=\"margin: 0 0 8px 0; color: #1f2937; font-size: 16px; font-weight: 600;\">\r\n              ${lead.customerName || 'Unknown'}\r\n            </h3>\r\n            <div style=\"margin-bottom: 8px;\">\r\n              <strong style=\"color: #374151;\">Phone:</strong>\r\n              <a href=\"tel:${lead.phoneNumber}\" style=\"color: #3b82f6; text-decoration: none;\">\r\n                ${lead.phoneNumber || 'N/A'}\r\n              </a>\r\n            </div>\r\n            <div style=\"margin-bottom: 8px;\">\r\n              <strong style=\"color: #374151;\">Quality:</strong>\r\n              <span style=\"background: ${getMarkerColor(lead.quality)}20; color: ${getMarkerColor(lead.quality)}; padding: 2px 6px; border-radius: 4px; font-size: 12px;\">\r\n                ${lead.quality}\r\n              </span>\r\n            </div>\r\n            ${lead.address ? `<div style=\"margin-bottom: 12px; color: #6b7280; font-size: 14px;\">${lead.address}</div>` : ''}\r\n            <button onclick=\"window.viewLeadDetails('${lead.id}')\"\r\n                    style=\"background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500;\">\r\n              View Details\r\n            </button>\r\n          </div>\r\n        `;\r\n        infoWindowRef.current.setContent(content);\r\n        infoWindowRef.current.open(map, marker);\r\n      });\r\n\r\n      markersRef.current.push(marker);\r\n      bounds.extend(position);\r\n    });\r\n\r\n    if (geocodedLeads.length > 0) {\r\n      map.fitBounds(bounds);\r\n      // Ensure reasonable zoom level\r\n      window.google.maps.event.addListenerOnce(map, 'bounds_changed', () => {\r\n        if (map.getZoom() > 15) map.setZoom(15);\r\n      });\r\n    }\r\n  }, [map, geocodedLeads, createMarkerIcon, getMarkerColor, onLeadClick]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"h-[70vh] w-full rounded-lg border border-gray-300 flex items-center justify-center bg-gray-50\">\r\n        <div className=\"text-center\">\r\n          <Loader2 className=\"animate-spin h-10 w-10 text-blue-600 mx-auto mb-3\" />\r\n          <p className=\"text-gray-600 text-lg\">Loading Interactive Map...</p>\r\n          <p className=\"text-gray-500 text-sm mt-1\">Connecting to Google Maps</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show geocoding progress if in progress\r\n  if (map && geocodingProgress > 0 && geocodingProgress < 100) {\r\n    return (\r\n      <div>\r\n        <div className=\"h-[70vh] w-full rounded-lg border border-gray-300 flex items-center justify-center bg-gray-50\">\r\n          <div className=\"text-center\">\r\n            <Loader2 className=\"animate-spin h-10 w-10 text-blue-600 mx-auto mb-3\" />\r\n            <p className=\"text-gray-600 text-lg\">Geocoding Customer Addresses...</p>\r\n            <div className=\"w-64 bg-gray-200 rounded-full h-2 mx-auto mt-3\">\r\n              <div className=\"bg-blue-600 h-2 rounded-full transition-all\" style={{width: `${geocodingProgress}%`}}></div>\r\n            </div>\r\n            <p className=\"text-gray-500 text-sm mt-2\">{Math.round(geocodingProgress)}% Complete</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"h-[70vh] w-full rounded-lg border border-red-300 flex items-center justify-center bg-red-50\">\r\n        <div className=\"text-center max-w-md\">\r\n          <AlertCircle className=\"h-12 w-12 text-red-600 mx-auto mb-3\" />\r\n          <h3 className=\"text-lg font-semibold text-red-800 mb-2\">Map Loading Failed</h3>\r\n          <p className=\"text-red-600 mb-3\">{error}</p>\r\n          <p className=\"text-sm text-gray-600\">\r\n            Please check your Google Maps API key configuration and internet connection.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div ref={mapRef} className=\"h-[70vh] w-full rounded-lg overflow-hidden border border-gray-300 shadow-sm\" />\r\n\r\n      {/* Show leads without addresses if any exist */}\r\n      {!showDemoData && leadsWithoutAddresses.length > 0 && (\r\n        <div className=\"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\r\n          <h4 className=\"text-sm font-semibold text-yellow-800 mb-3 flex items-center\">\r\n            <AlertCircle className=\"w-4 h-4 mr-2\" />\r\n            Leads Without Address Data ({leadsWithoutAddresses.length})\r\n          </h4>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n            {leadsWithoutAddresses.slice(0, 4).map(lead => (\r\n              <div key={lead.id} className=\"bg-white p-3 rounded border border-yellow-200 hover:shadow-sm transition-shadow cursor-pointer\"\r\n                   onClick={() => onLeadClick && onLeadClick(lead)}>\r\n                <div className=\"font-medium text-gray-900\">{lead.customerName || 'Unknown'}</div>\r\n                <div className=\"text-sm text-gray-600\">{lead.phoneNumber || 'No phone'}</div>\r\n                <div className=\"text-xs text-gray-500\">No address provided</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          {leadsWithoutAddresses.length > 4 && (\r\n            <div className=\"mt-3 text-sm text-yellow-700\">\r\n              And {leadsWithoutAddresses.length - 4} more leads without addresses...\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nfunction MapView({ leads, onLeadClick, searchAddress, onSearchComplete }) {\r\n  const [showDemoData, setShowDemoData] = useState(false);\r\n  const [mapType, setMapType] = useState('roadmap');\r\n  const [showTraffic, setShowTraffic] = useState(false);\r\n\r\n  const leadsWithAddresses = useMemo(() => leads.filter(lead => lead.address && lead.address.trim() !== ''), [leads]);\r\n  const hasRealData = leadsWithAddresses.length > 0;\r\n\r\n  const qualityStats = useMemo(() => {\r\n    const dataToAnalyze = showDemoData ? [\r\n      { quality: 'Hot' }, { quality: 'Hot' }, { quality: 'Warm' }, { quality: 'Warm' }, { quality: 'Cold' }\r\n    ] : leads;\r\n\r\n    return {\r\n      hot: dataToAnalyze.filter(l => l.quality === 'Hot').length,\r\n      warm: dataToAnalyze.filter(l => l.quality === 'Warm').length,\r\n      cold: dataToAnalyze.filter(l => l.quality === 'Cold').length,\r\n      total: dataToAnalyze.length,\r\n      mapped: leadsWithAddresses.length\r\n    };\r\n  }, [leads, leadsWithAddresses, showDemoData]);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header with enhanced controls */}\r\n      <div className=\"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4\">\r\n        <div>\r\n          <h2 className=\"text-3xl font-bold text-gray-900 flex items-center\">\r\n            <MapPin className=\"w-8 h-8 mr-3 text-blue-600\" />\r\n            Customer Locations\r\n          </h2>\r\n          <p className=\"text-gray-600 mt-1\">\r\n            Interactive map showing customer locations with lead quality indicators\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex flex-wrap items-center gap-3\">\r\n          {/* Data Toggle */}\r\n          <div className=\"flex items-center bg-gray-100 rounded-lg p-1\">\r\n            <button\r\n              onClick={() => setShowDemoData(false)}\r\n              className={`px-3 py-1 text-sm font-medium rounded-md transition-colors ${\r\n                !showDemoData ? 'bg-white text-gray-900 shadow-sm' : 'text-gray-600 hover:text-gray-900'\r\n              }`}\r\n            >\r\n              Real Data ({leads.length})\r\n            </button>\r\n            <button\r\n              onClick={() => setShowDemoData(true)}\r\n              className={`px-3 py-1 text-sm font-medium rounded-md transition-colors ${\r\n                showDemoData ? 'bg-white text-gray-900 shadow-sm' : 'text-gray-600 hover:text-gray-900'\r\n              }`}\r\n            >\r\n              Demo Data (5)\r\n            </button>\r\n          </div>\r\n\r\n          {/* Map Type Selector */}\r\n          <select\r\n            value={mapType}\r\n            onChange={(e) => setMapType(e.target.value)}\r\n            className=\"text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n          >\r\n            <option value=\"roadmap\">Road Map</option>\r\n            <option value=\"satellite\">Satellite</option>\r\n            <option value=\"hybrid\">Hybrid</option>\r\n            <option value=\"terrain\">Terrain</option>\r\n          </select>\r\n\r\n          {/* Traffic Toggle */}\r\n          <button\r\n            onClick={() => setShowTraffic(!showTraffic)}\r\n            className={`flex items-center px-3 py-2 text-sm font-medium rounded-lg border transition-colors ${\r\n              showTraffic\r\n                ? 'bg-blue-50 border-blue-200 text-blue-700'\r\n                : 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50'\r\n            }`}\r\n          >\r\n            <Navigation className=\"w-4 h-4 mr-2\" />\r\n            Traffic\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Statistics Cards */}\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n        <div className=\"bg-white rounded-lg shadow p-4 border-l-4 border-red-500\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"flex-shrink-0\">\r\n              <div className=\"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center\">\r\n                <div className=\"w-3 h-3 bg-red-500 rounded-full\"></div>\r\n              </div>\r\n            </div>\r\n            <div className=\"ml-3\">\r\n              <p className=\"text-sm font-medium text-gray-500\">Hot Leads</p>\r\n              <p className=\"text-2xl font-semibold text-gray-900\">{qualityStats.hot}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow p-4 border-l-4 border-yellow-500\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"flex-shrink-0\">\r\n              <div className=\"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center\">\r\n                <div className=\"w-3 h-3 bg-yellow-500 rounded-full\"></div>\r\n              </div>\r\n            </div>\r\n            <div className=\"ml-3\">\r\n              <p className=\"text-sm font-medium text-gray-500\">Warm Leads</p>\r\n              <p className=\"text-2xl font-semibold text-gray-900\">{qualityStats.warm}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow p-4 border-l-4 border-blue-500\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"flex-shrink-0\">\r\n              <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\r\n                <div className=\"w-3 h-3 bg-blue-500 rounded-full\"></div>\r\n              </div>\r\n            </div>\r\n            <div className=\"ml-3\">\r\n              <p className=\"text-sm font-medium text-gray-500\">Cold Leads</p>\r\n              <p className=\"text-2xl font-semibold text-gray-900\">{qualityStats.cold}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow p-4 border-l-4 border-gray-500\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"flex-shrink-0\">\r\n              <div className=\"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center\">\r\n                <MapPin className=\"w-4 h-4 text-gray-600\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"ml-3\">\r\n              <p className=\"text-sm font-medium text-gray-500\">Total Mapped</p>\r\n              <p className=\"text-2xl font-semibold text-gray-900\">{showDemoData ? 5 : qualityStats.mapped}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Map Container */}\r\n      {!hasRealData && !showDemoData ? (\r\n        <div className=\"bg-white rounded-lg shadow-lg p-8\">\r\n          <div className=\"text-center py-12\">\r\n            <Map className=\"mx-auto h-20 w-20 text-gray-400 mb-6\" />\r\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-3\">No Location Data Available</h3>\r\n            <p className=\"text-gray-600 mb-6 max-w-md mx-auto\">\r\n              Your leads don't have geocoded coordinates yet. Add addresses to your leads or use demo data to see the map in action.\r\n            </p>\r\n            <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\r\n              <button\r\n                onClick={() => setShowDemoData(true)}\r\n                className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n              >\r\n                <Map className=\"w-4 h-4 mr-2\" />\r\n                View Demo Data\r\n              </button>\r\n              <button className=\"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors\">\r\n                <Search className=\"w-4 h-4 mr-2\" />\r\n                Learn About Geocoding\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"bg-white rounded-lg shadow-lg overflow-hidden\">\r\n          <div className=\"p-4 bg-gray-50 border-b border-gray-200\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center space-x-4\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">Interactive Map</h3>\r\n                <div className=\"flex items-center space-x-3 text-sm text-gray-600\">\r\n                  <div className=\"flex items-center\">\r\n                    <div className=\"w-3 h-3 bg-red-500 rounded-full mr-1\"></div>\r\n                    Hot ({qualityStats.hot})\r\n                  </div>\r\n                  <div className=\"flex items-center\">\r\n                    <div className=\"w-3 h-3 bg-yellow-500 rounded-full mr-1\"></div>\r\n                    Warm ({qualityStats.warm})\r\n                  </div>\r\n                  <div className=\"flex items-center\">\r\n                    <div className=\"w-3 h-3 bg-blue-500 rounded-full mr-1\"></div>\r\n                    Cold ({qualityStats.cold})\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              {showDemoData && (\r\n                <div className=\"flex items-center text-sm text-blue-600 bg-blue-50 px-3 py-1 rounded-full\">\r\n                  <Layers className=\"w-4 h-4 mr-1\" />\r\n                  Demo Mode\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <GoogleMapComponent\r\n            leads={leads}\r\n            onLeadClick={onLeadClick}\r\n            showDemoData={showDemoData}\r\n            mapType={mapType}\r\n            showTraffic={showTraffic}\r\n            searchAddress={searchAddress}\r\n            onSearchComplete={onSearchComplete}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MapView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}