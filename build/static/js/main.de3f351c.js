/*! For license information please see main.de3f351c.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},153:(e,t,n)=>{"use strict";var r=n(43),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,p(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,_={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)k.call(t,a)&&!N.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:n,type:e,key:i,ref:o,props:s,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===s?"."+C(l,0):s,w(i)?(a="",null!=e&&(a=e.replace(j,"$&/")+"/"),I(i,t,a,"",function(e){return e})):null!=i&&(E(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(j,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+C(o=e[c],c);l+=I(o,t,a,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,a,u=s+C(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],a=0;return I(e,r,"","",function(e){return t.call(n,e,a++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=p({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=_.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!N.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<a&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!p)if(null!==r(c))p=!0,R(k);else{var t=r(u);null!==t&&O(w,t.startTime-e)}}function k(e,n){p=!1,g&&(g=!1,v(E),E=-1),m=!0;var s=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var i=h.callback;if("function"===typeof i){h.callback=null,f=h.priorityLevel;var o=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&a(c),x(n)}else a(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(w,d.startTime-n),l=!1}return l}finally{h=null,f=s,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,N=!1,S=null,E=-1,j=5,C=-1;function I(){return!(t.unstable_now()-C<j)}function T(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?_():(N=!1,S=null)}}else N=!1}if("function"===typeof b)_=function(){b(T)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=T,_=function(){P.postMessage(null)}}else _=function(){y(T,0)};function R(e){S=e,N||(N=!0,_())}function O(e,n){E=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,R(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(E),E=-1):g=!0,O(w,s-i))):(e.sortIndex=o,n(c,e),p||m||(p=!0,R(k))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{"use strict";e.exports=n(153)},730:(e,t,n)=>{"use strict";var r=n(43),a=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(e,t,n,r,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(m,e)||!d.call(f,e)&&(h.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),j=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=r.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case k:return"Portal";case S:return"Profiler";case N:return"StrictMode";case I:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case j:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function se(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,_e=null,Ne=null;function Se(e){if(e=ba(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=wa(t),ke(e.stateNode,e.type,t))}}function Ee(e){_e?Ne?Ne.push(e):Ne=[e]:_e=e}function je(){if(_e){var e=_e,t=Ne;if(Ne=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var Te=!1;function Ae(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ce(e,t,n)}finally{Te=!1,(null!==_e||null!==Ne)&&(Ie(),je())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Re=!1}function De(e,t,n,r,a,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,ze=null,Ue={onError:function(e){Le=!0,Me=e}};function Be(e,t,n,r,a,s,i,o,l){Le=!1,Me=null,De.apply(Ue,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(qe(e)!==e)throw Error(s(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Ve(a),e;if(i===r)return Ve(a),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Je=a.unstable_scheduleCallback,Qe=a.unstable_cancelCallback,Ge=a.unstable_shouldYield,$e=a.unstable_requestPaint,Ye=a.unstable_now,Xe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~a;0!==o?r=dt(o):0!==(s&=i)&&(r=dt(s))}else 0!==(i=n&~a)?r=dt(i):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,_t,Nt,St,Et=!1,jt=[],Ct=null,It=null,Tt=null,At=new Map,Pt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Mt(e){var t=va(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void St(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Et=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==It&&Ft(It)&&(It=null),null!==Tt&&Ft(Tt)&&(Tt=null),At.forEach(zt),Pt.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ut)))}function qt(e){function t(t){return Bt(t,e)}if(0<jt.length){Bt(jt[0],e);for(var n=1;n<jt.length;n++){var r=jt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==It&&Bt(It,e),null!==Tt&&Bt(Tt,e),At.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var Ht=x.ReactCurrentBatchConfig,Vt=!0;function Kt(e,t,n,r){var a=bt,s=Ht.transition;Ht.transition=null;try{bt=1,Jt(e,t,n,r)}finally{bt=a,Ht.transition=s}}function Wt(e,t,n,r){var a=bt,s=Ht.transition;Ht.transition=null;try{bt=4,Jt(e,t,n,r)}finally{bt=a,Ht.transition=s}}function Jt(e,t,n,r){if(Vt){var a=Gt(e,t,n,r);if(null===a)Vr(e,t,r,Qt,n),Dt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,a),!0;case"dragenter":return It=Lt(It,e,t,n,r,a),!0;case"mouseover":return Tt=Lt(Tt,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return At.set(s,Lt(At.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==a;){var s=ba(a);if(null!==s&&wt(s),null===(s=Gt(e,t,n,r))&&Vr(e,t,r,Qt,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Qt=null;function Gt(e,t,n,r){if(Qt=null,null!==(e=va(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,a="value"in Yt?Yt.value:Yt.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[s-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,s){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=M({},cn,{view:0,detail:0}),hn=an(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=an(fn),pn=an(M({},fn,{dataTransfer:0})),gn=an(M({},dn,{relatedTarget:0})),yn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(vn),xn=an(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return Nn}var En=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),jn=an(En),Cn=an(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Tn=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(An),Rn=[9,13,27,32],On=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Dn,Mn=u&&(!On||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ee(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Jn=null;function Qn(e){Fr(e,0)}function Gn(e){if(J(xa(e)))return e}function $n(e,t){if("change"===e)return t}var Yn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Jn=Wn=null)}function nr(e){if("value"===e.propertyName&&Gn(Jn)){var t=[];Kn(t,Jn,e,we(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Jn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Jn)}function sr(e,t){if("click"===e)return Gn(t)}function ir(e,t){if("input"===e||"change"===e)return Gn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!or(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=void 0===r.end?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=ur(n,s);var i=ur(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Nr={};function Sr(e){if(_r[e])return _r[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return _r[e]=n[t];return e}u&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Er=Sr("animationend"),jr=Sr("animationiteration"),Cr=Sr("animationstart"),Ir=Sr("transitionend"),Tr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Tr.set(e,t),l(t,[e])}for(var Rr=0;Rr<Ar.length;Rr++){var Or=Ar[Rr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Er,"onAnimationEnd"),Pr(jr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,o,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Mr(a,o,c),s=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Mr(a,o,c),s=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[pa];void 0===n&&(n=t[pa]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Br]){e[Br]=!0,i.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Ur("selectionchange",!1,t))}}function Hr(e,t,n,r){switch($t(t)){case 1:var a=Kt;break;case 4:a=Wt;break;default:a=Jt}n=a.bind(null,t,n,e),a=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,a){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=va(o)))return;if(5===(l=i.tag)||6===l){r=s=i;continue e}o=o.parentNode}}r=r.return}Ae(function(){var r=s,a=we(n),i=[];e:{var o=Tr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=jn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Er:case jr:case Cr:l=yn;break;case Ir:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,m=r;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=Pe(m,h))&&u.push(Kr(m,p,f)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,a),i.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!va(c)&&!c[ma])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?va(c):null)&&(c!==(d=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,p="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,p="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:xa(l),f=null==c?o:xa(c),(o=new u(p,m+"leave",l,n,a)).target=d,o.relatedTarget=f,p=null,va(a)===r&&((u=new u(h,m+"enter",c,n,a)).target=f,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,m=0,f=u=l;f;f=Jr(f))m++;for(f=0,p=h;p;p=Jr(p))f++;for(;0<m-f;)u=Jr(u),m--;for(;0<f-m;)h=Jr(h),f--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Jr(u),h=Jr(h)}u=null}else u=null;null!==l&&Qr(i,o,l,u,!1),null!==c&&null!==d&&Qr(i,d,c,u,!0)}if("select"===(l=(o=r?xa(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=$n;else if(Vn(o))if(Yn)g=ir;else{g=ar;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Kn(i,g,n,a):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?xa(r):window,e){case"focusin":(Vn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(i,n,a);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":xr(i,n,a)}var v;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(v=en()):(Xt="value"in(Yt=a)?Yt.value:Yt.textContent,qn=!0)),0<(y=Wr(r,b)).length&&(b=new xn(b,e,null,n,a),i.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!On&&Un(e,t)?(e=en(),Zt=Xt=Yt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=v))}Fr(i,t)})}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Pe(e,n))&&r.unshift(Kr(e,s,a)),null!=(s=Pe(e,t))&&r.push(Kr(e,s,a))),e=e.return}return r}function Jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,a){for(var s=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Pe(n,s))&&i.unshift(Kr(n,l,o)):a||null!=(l=Pe(n,s))&&i.push(Kr(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Gr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Gr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(oa)}:ra;function oa(e){setTimeout(function(){throw e})}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);qt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,fa="__reactProps$"+da,ma="__reactContainer$"+da,pa="__reactEvents$"+da,ga="__reactListeners$"+da,ya="__reactHandles$"+da;function va(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ma]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[ha])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[ha]||e[ma])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wa(e){return e[fa]||null}var ka=[],_a=-1;function Na(e){return{current:e}}function Sa(e){0>_a||(e.current=ka[_a],ka[_a]=null,_a--)}function Ea(e,t){_a++,ka[_a]=e.current,e.current=t}var ja={},Ca=Na(ja),Ia=Na(!1),Ta=ja;function Aa(e,t){var n=e.type.contextTypes;if(!n)return ja;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in n)s[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ra(){Sa(Ia),Sa(Ca)}function Oa(e,t,n){if(Ca.current!==ja)throw Error(s(168));Ea(Ca,t),Ea(Ia,n)}function Da(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(s(108,H(e)||"Unknown",a));return M({},n,r)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ja,Ta=Ca.current,Ea(Ca,e),Ea(Ia,Ia.current),!0}function Ma(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Da(e,t,Ta),r.__reactInternalMemoizedMergedChildContext=e,Sa(Ia),Sa(Ca),Ea(Ca,e)):Sa(Ia),Ea(Ia,n)}var Fa=null,za=!1,Ua=!1;function Ba(e){null===Fa?Fa=[e]:Fa.push(e)}function qa(){if(!Ua&&null!==Fa){Ua=!0;var e=0,t=bt;try{var n=Fa;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fa=null,za=!1}catch(a){throw null!==Fa&&(Fa=Fa.slice(e+1)),Je(Ze,qa),a}finally{bt=t,Ua=!1}}return null}var Ha=[],Va=0,Ka=null,Wa=0,Ja=[],Qa=0,Ga=null,$a=1,Ya="";function Xa(e,t){Ha[Va++]=Wa,Ha[Va++]=Ka,Ka=e,Wa=t}function Za(e,t,n){Ja[Qa++]=$a,Ja[Qa++]=Ya,Ja[Qa++]=Ga,Ga=e;var r=$a;e=Ya;var a=32-it(r)-1;r&=~(1<<a),n+=1;var s=32-it(t)+a;if(30<s){var i=a-a%5;s=(r&(1<<i)-1).toString(32),r>>=i,a-=i,$a=1<<32-it(t)+a|n<<a|r,Ya=s+e}else $a=1<<s|n<<a|r,Ya=e}function es(e){null!==e.return&&(Xa(e,1),Za(e,1,0))}function ts(e){for(;e===Ka;)Ka=Ha[--Va],Ha[Va]=null,Wa=Ha[--Va],Ha[Va]=null;for(;e===Ga;)Ga=Ja[--Qa],Ja[Qa]=null,Ya=Ja[--Qa],Ja[Qa]=null,$a=Ja[--Qa],Ja[Qa]=null}var ns=null,rs=null,as=!1,ss=null;function is(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ga?{id:$a,overflow:Ya}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ca(n.nextSibling);var r=ns;t&&os(e,t)?is(r,n):(e.flags=-4097&e.flags|2,as=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!as)return us(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)is(e,t),t=ca(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ca(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ca(e.nextSibling)}function fs(){rs=ns=null,as=!1}function ms(e){null===ss?ss=[e]:ss.push(e)}var ps=x.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&vs(s)===t.type)?((r=a(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case k:return(t=Fc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?c(e,t,n,r):null;case k:return n.key===a?u(e,t,n,r):null;case P:return f(e,t,(a=n._init)(n._payload),r)}if(te(n)||D(n))return null!==a?null:d(e,t,n,r,null);ys(e,n)}return null}function m(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case P:return m(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,a,null);ys(t,r)}return null}function p(a,s,o,l){for(var c=null,u=null,d=s,p=s=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var y=f(a,d,o[p],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(a,d),s=i(y,s,p),null===u?c=y:u.sibling=y,u=y,d=g}if(p===o.length)return n(a,d),as&&Xa(a,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(a,o[p],l))&&(s=i(d,s,p),null===u?c=d:u.sibling=d,u=d);return as&&Xa(a,p),c}for(d=r(a,d);p<o.length;p++)null!==(g=m(d,a,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),s=i(g,s,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),as&&Xa(a,p),c}function g(a,o,l,c){var u=D(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,p=o,g=o=0,y=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(y=p,p=null):y=p.sibling;var b=f(a,p,v.value,c);if(null===b){null===p&&(p=y);break}e&&p&&null===b.alternate&&t(a,p),o=i(b,o,g),null===d?u=b:d.sibling=b,d=b,p=y}if(v.done)return n(a,p),as&&Xa(a,g),u;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=h(a,v.value,c))&&(o=i(v,o,g),null===d?u=v:d.sibling=v,d=v);return as&&Xa(a,g),u}for(p=r(a,p);!v.done;g++,v=l.next())null!==(v=m(p,a,g,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),o=i(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(a,e)}),as&&Xa(a,g),u}return function e(r,s,i,l){if("object"===typeof i&&null!==i&&i.type===_&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,u=s;null!==u;){if(u.key===c){if((c=i.type)===_){if(7===u.tag){n(r,u.sibling),(s=a(u,i.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&vs(c)===u.type){n(r,u.sibling),(s=a(u,i.props)).ref=gs(r,u,i),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===_?((s=Dc(i.props.children,r.mode,l,i.key)).return=r,r=s):((l=Oc(i.type,i.key,i.props,null,r.mode,l)).ref=gs(r,s,i),l.return=r,r=l)}return o(r);case k:e:{for(u=i.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){n(r,s.sibling),(s=a(s,i.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(i,r.mode,l)).return=r,r=s}return o(r);case P:return e(r,s,(u=i._init)(i._payload),l)}if(te(i))return p(r,s,i,l);if(D(i))return g(r,s,i,l);ys(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(n(r,s.sibling),(s=a(s,i)).return=r,r=s):(n(r,s),(s=Mc(i,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var xs=bs(!0),ws=bs(!1),ks=Na(null),_s=null,Ns=null,Ss=null;function Es(){Ss=Ns=_s=null}function js(e){var t=ks.current;Sa(ks),e._currentValue=t}function Cs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){_s=e,Ss=Ns=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},null===Ns){if(null===_s)throw Error(s(308));Ns=e,_s.dependencies={lanes:0,firstContext:e}}else Ns=Ns.next=e;return t}var As=null;function Ps(e){null===As?As=[e]:As.push(e)}function Rs(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ps(t)):(n.next=a.next,a.next=n),t.interleaved=n,Os(e,r)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ds=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Os(e,n)}return null===(a=r.interleaved)?(t.next=t,Ps(r)):(t.next=a.next,a.next=t),r.interleaved=t,Os(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?a=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qs(e,t,n,r){var a=e.updateQueue;Ds=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=a.baseState;for(i=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(h=t,f=n,p.tag){case 1:if("function"===typeof(m=p.payload)){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=p.payload)?m.call(f,d,h):m)||void 0===h)break e;d=M({},d,h);break e;case 2:Ds=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Ll|=i,e.lanes=i,e.memoizedState=d}}function Hs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(s(191,a));a.call(r)}}}var Vs={},Ks=Na(Vs),Ws=Na(Vs),Js=Na(Vs);function Qs(e){if(e===Vs)throw Error(s(174));return e}function Gs(e,t){switch(Ea(Js,t),Ea(Ws,e),Ea(Ks,Vs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sa(Ks),Ea(Ks,t)}function $s(){Sa(Ks),Sa(Ws),Sa(Js)}function Ys(e){Qs(Js.current);var t=Qs(Ks.current),n=le(t,e.type);t!==n&&(Ea(Ws,e),Ea(Ks,n))}function Xs(e){Ws.current===e&&(Sa(Ks),Sa(Ws))}var Zs=Na(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=x.ReactCurrentDispatcher,ai=x.ReactCurrentBatchConfig,si=0,ii=null,oi=null,li=null,ci=!1,ui=!1,di=0,hi=0;function fi(){throw Error(s(321))}function mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function pi(e,t,n,r,a,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Xi:Zi,e=n(r,a),ui){i=0;do{if(ui=!1,di=0,25<=i)throw Error(s(301));i+=1,li=oi=null,t.updateQueue=null,ri.current=eo,e=n(r,a)}while(ui)}if(ri.current=Yi,t=null!==oi&&null!==oi.next,si=0,li=oi=ii=null,ci=!1,t)throw Error(s(300));return e}function gi(){var e=0!==di;return di=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function vi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function bi(e,t){return"function"===typeof t?t(e):t}function xi(e){var t=vi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oi,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((si&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ii.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==i);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,ii.lanes|=i,Ll|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wi(e){var t=vi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);or(i,t.memoizedState)||(bo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ki(){}function _i(e,t){var n=ii,r=vi(),a=t(),i=!or(r.memoizedState,a);if(i&&(r.memoizedState=a,bo=!0),r=r.queue,Di(Ei.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Ti(9,Si.bind(null,n,r,a,t),void 0,null),null===Il)throw Error(s(349));0!==(30&si)||Ni(n,t,a)}return a}function Ni(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Si(e,t,n,r){t.value=n,t.getSnapshot=r,ji(t)&&Ci(e)}function Ei(e,t,n){return n(function(){ji(t)&&Ci(e)})}function ji(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ci(e){var t=Os(e,1);null!==t&&nc(t,e,1,-1)}function Ii(e){var t=yi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ji.bind(null,ii,e),[t.memoizedState,e]}function Ti(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ai(){return vi().memoizedState}function Pi(e,t,n,r){var a=yi();ii.flags|=e,a.memoizedState=Ti(1|t,n,void 0,void 0===r?null:r)}function Ri(e,t,n,r){var a=vi();r=void 0===r?null:r;var s=void 0;if(null!==oi){var i=oi.memoizedState;if(s=i.destroy,null!==r&&mi(r,i.deps))return void(a.memoizedState=Ti(t,n,s,r))}ii.flags|=e,a.memoizedState=Ti(1|t,n,s,r)}function Oi(e,t){return Pi(8390656,8,e,t)}function Di(e,t){return Ri(2048,8,e,t)}function Li(e,t){return Ri(4,2,e,t)}function Mi(e,t){return Ri(4,4,e,t)}function Fi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ri(4,4,Fi.bind(null,t,e),n)}function Ui(){}function Bi(e,t){var n=vi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qi(e,t){var n=vi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hi(e,t,n){return 0===(21&si)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=pt(),ii.lanes|=n,Ll|=n,e.baseState=!0),t)}function Vi(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ai.transition;ai.transition={};try{e(!1),t()}finally{bt=n,ai.transition=r}}function Ki(){return vi().memoizedState}function Wi(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qi(e))Gi(t,n);else if(null!==(n=Rs(e,t,n,r))){nc(n,e,r,ec()),$i(n,t,r)}}function Ji(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qi(e))Gi(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(a.hasEagerState=!0,a.eagerState=o,or(o,i)){var l=t.interleaved;return null===l?(a.next=a,Ps(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Rs(e,t,a,r))&&(nc(n,e,r,a=ec()),$i(n,t,r))}}function Qi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Gi(e,t){ui=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $i(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Yi={readContext:Ts,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},Xi={readContext:Ts,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:Oi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pi(4194308,4,Fi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pi(4,2,e,t)},useMemo:function(e,t){var n=yi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wi.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:Ii,useDebugValue:Ui,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=Ii(!1),t=e[0];return e=Vi.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ii,a=yi();if(as){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Il)throw Error(s(349));0!==(30&si)||Ni(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Oi(Ei.bind(null,r,i,e),[e]),r.flags|=2048,Ti(9,Si.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=yi(),t=Il.identifierPrefix;if(as){var n=Ya;t=":"+t+"R"+(n=($a&~(1<<32-it($a)-1)).toString(32)+n),0<(n=di++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Ts,useCallback:Bi,useContext:Ts,useEffect:Di,useImperativeHandle:zi,useInsertionEffect:Li,useLayoutEffect:Mi,useMemo:qi,useReducer:xi,useRef:Ai,useState:function(){return xi(bi)},useDebugValue:Ui,useDeferredValue:function(e){return Hi(vi(),oi.memoizedState,e)},useTransition:function(){return[xi(bi)[0],vi().memoizedState]},useMutableSource:ki,useSyncExternalStore:_i,useId:Ki,unstable_isNewReconciler:!1},eo={readContext:Ts,useCallback:Bi,useContext:Ts,useEffect:Di,useImperativeHandle:zi,useInsertionEffect:Li,useLayoutEffect:Mi,useMemo:qi,useReducer:wi,useRef:Ai,useState:function(){return wi(bi)},useDebugValue:Ui,useDeferredValue:function(e){var t=vi();return null===oi?t.memoizedState=e:Hi(t,oi.memoizedState,e)},useTransition:function(){return[wi(bi)[0],vi().memoizedState]},useMutableSource:ki,useSyncExternalStore:_i,useId:Ki,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),s=Fs(r,a);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,a))&&(nc(t,e,a,r),Us(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),s=Fs(r,a);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,a))&&(nc(t,e,a,r),Us(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=Fs(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=zs(e,a,r))&&(nc(t,e,r,n),Us(t,e,r))}};function ao(e,t,n,r,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,s))}function so(e,t,n){var r=!1,a=ja,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(a=Pa(t)?Ta:Ca.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Aa(e,a):ja),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function io(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Ts(s):(s=Pa(t)?Ta:Ca.current,a.context=Aa(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ro.enqueueReplaceState(a,a.state,null),qs(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var a=n}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,Kl=r),uo(0,t)},n}function mo(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function po(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var vo=x.ReactCurrentOwner,bo=!1;function xo(e,t,n,r){t.child=null===e?ws(t,null,n,r):xs(t,e.child,n,r)}function wo(e,t,n,r,a){n=n.render;var s=t.ref;return Is(t,a),r=pi(e,t,n,r,s,a),n=gi(),null===e||bo?(as&&n&&es(t),t.flags|=1,xo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vo(e,t,a))}function ko(e,t,n,r,a){if(null===e){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,_o(e,t,s,r,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Vo(e,t,a)}return t.flags|=1,(e=Rc(s,r)).ref=t.ref,e.return=t,t.child=e}function _o(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=s,0===(e.lanes&a))return t.lanes=e.lanes,Vo(e,t,a);0!==(131072&e.flags)&&(bo=!0)}}return Eo(e,t,n,r,a)}function No(e,t,n){var r=t.pendingProps,a=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ea(Rl,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ea(Rl,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ea(Rl,Pl),Pl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ea(Rl,Pl),Pl|=r;return xo(e,t,a,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eo(e,t,n,r,a){var s=Pa(n)?Ta:Ca.current;return s=Aa(t,s),Is(t,a),n=pi(e,t,n,r,s,a),r=gi(),null===e||bo?(as&&r&&es(t),t.flags|=1,xo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vo(e,t,a))}function jo(e,t,n,r,a){if(Pa(n)){var s=!0;La(t)}else s=!1;if(Is(t,a),null===t.stateNode)Ho(e,t),so(t,n,r),oo(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ts(c):c=Aa(t,c=Pa(n)?Ta:Ca.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==c)&&io(t,i,r,c),Ds=!1;var h=t.memoizedState;i.state=h,qs(t,r,i,a),l=t.memoizedState,o!==r||h!==l||Ia.current||Ds?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Ds||ao(t,n,o,r,h,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ms(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,d=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ts(l):l=Aa(t,l=Pa(n)?Ta:Ca.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||h!==l)&&io(t,i,r,l),Ds=!1,h=t.memoizedState,i.state=h,qs(t,r,i,a);var m=t.memoizedState;o!==d||h!==m||Ia.current||Ds?("function"===typeof f&&(no(t,n,f,r),m=t.memoizedState),(c=Ds||ao(t,n,c,r,h,m,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Co(e,t,n,r,s,a)}function Co(e,t,n,r,a,s){So(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&Ma(t,n,!1),Vo(e,t,s);r=t.stateNode,vo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=xs(t,e.child,null,s),t.child=xs(t,null,o,s)):xo(e,t,o,s),t.memoizedState=r.state,a&&Ma(t,n,!0),t.child}function Io(e){var t=e.stateNode;t.pendingContext?Oa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oa(0,t.context,!1),Gs(e,t.containerInfo)}function To(e,t,n,r,a){return fs(),ms(a),t.flags|=256,xo(e,t,n,r),t.child}var Ao,Po,Ro,Oo,Do={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,n){var r,a=t.pendingProps,i=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ea(Zs,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,a,0,null),e=Dc(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Do,e):Fo(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Lc({mode:"visible",children:r.children},a,0,null),(i=Dc(i,a,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&xs(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Do,i);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=co(i=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Il)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Os(e,a),nc(r,e,a,-1))}return pc(),zo(e,t,o,r=co(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=jc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,rs=ca(a.nextSibling),ns=t,as=!0,ss=null,null!==e&&(Ja[Qa++]=$a,Ja[Qa++]=Ya,Ja[Qa++]=Ga,$a=e.id,Ya=e.overflow,Ga=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,i,n);if(o){o=a.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Rc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Rc(r,o):(o=Dc(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Do,a}return e=(o=e.child).sibling,a=Rc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Fo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&ms(r),xs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Cs(e.return,t,n)}function Bo(e,t,n,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function qo(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(xo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ea(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Bo(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ei(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Bo(t,!0,n,null,s);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ko(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Jo(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Pa(t.type)&&Ra(),Wo(t),null;case 3:return r=t.stateNode,$s(),Sa(Ia),Sa(Ca),ni(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),Po(e,t),Wo(t),null;case 5:Xs(t);var a=Qs(Js.current);if(n=t.type,null!==e&&null!=t.stateNode)Ro(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wo(t),null}if(e=Qs(Ks.current),ds(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ha]=t,r[fa]=i,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(a=0;a<Dr.length;a++)zr(Dr[a],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":$(r,i),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},zr("invalid",r);break;case"textarea":ae(r,i),zr("invalid",r)}for(var l in ve(n,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":W(r),Z(r,i,!0);break;case"textarea":W(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Zr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ha]=t,e[fa]=r,Ao(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),a=r;break;case"iframe":case"object":case"embed":zr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Dr.length;a++)zr(Dr[a],e);a=r;break;case"source":zr("error",e),a=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),a=r;break;case"details":zr("toggle",e),a=r;break;case"input":$(e,r),a=G(e,r),zr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=M({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),zr("invalid",e)}for(i in ve(n,a),c=a)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ge(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=u&&"onScroll"===i&&zr("scroll",e):null!=u&&b(e,i,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Oo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Js.current),Qs(Ks.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(i=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return Wo(t),null;case 13:if(Sa(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,i=!1;else if(i=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[ha]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ol&&(Ol=3):pc())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return $s(),Po(e,t),null===e&&qr(t.stateNode.containerInfo),Wo(t),null;case 10:return js(t.type._context),Wo(t),null;case 19:if(Sa(Zs),null===(i=t.memoizedState))return Wo(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Ko(i,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Ko(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ea(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==i.tail&&Ye()>ql&&(t.flags|=128,r=!0,Ko(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ko(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!as)return Wo(t),null}else 2*Ye()-i.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ko(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ye(),t.sibling=null,n=Zs.current,Ea(Zs,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qo(e,t){switch(ts(t),t.tag){case 1:return Pa(t.type)&&Ra(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $s(),Sa(Ia),Sa(Ca),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(Sa(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sa(Zs),null;case 4:return $s(),null;case 10:return js(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ao=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Ro=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Qs(Ks.current);var s,i=null;switch(n){case"input":a=G(e,a),r=G(e,r),i=[];break;case"select":a=M({},a,{value:void 0}),r=M({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Oo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Go=!1,$o=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Nc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Nc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,n,s)}a=a.next}while(a!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[fa],delete t[pa],delete t[ga],delete t[ya])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:$o||Zo(n,t);case 6:var r=ul,a=dl;ul=null,hl(e,t,n),dl=a,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),qt(e)):la(ul,n.stateNode));break;case 4:r=ul,a=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=a;break;case 0:case 11:case 14:case 15:if(!$o&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(n,t,i),a=a.next}while(a!==r)}hl(e,t,n);break;case 1:if(!$o&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Nc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?($o=(r=$o)||null!==n.memoizedState,hl(e,t,n),$o=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yo),t.forEach(function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(i,o,a),ul=null,dl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){Nc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Nc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Nc(e,e.return,g)}}break;case 1:pl(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(pl(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){Nc(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Y(a,i),be(l,o);var u=be(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):b(a,d,h,u)}switch(l){case"input":X(a,i);break;case"textarea":se(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?ne(a,!!i.multiple,m,!1):f!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[fa]=i}catch(g){Nc(e,e.return,g)}}break;case 6:if(pl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Nc(e,e.return,g)}}break;case 3:if(pl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){Nc(e,e.return,g)}break;case 4:default:pl(t,e),yl(e);break;case 13:pl(t,e),yl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Bl=Ye())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($o=(u=$o)||d,pl(t,e),$o=u):pl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xo=e,d=e.child;null!==d;){for(h=Xo=d;null!==Xo;){switch(m=(f=Xo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Nc(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==m?(m.return=f,Xo=m):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,u?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(g){Nc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Nc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){Nc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Xo;){var a=Xo,s=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Go;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||$o;o=Go;var c=$o;if(Go=i,($o=l)&&!c)for(Xo=a;null!==Xo;)l=(i=Xo).child,22===i.tag&&null!==i.memoizedState?kl(a):null!==l?(l.return=i,Xo=l):kl(a);for(;null!==s;)Xo=s,bl(s,t,n),s=s.sibling;Xo=a,Go=o,$o=c}xl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Xo=s):xl(e)}}function xl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$o||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$o)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Hs(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(s(163))}$o||512&t.flags&&al(t)}catch(f){Nc(t,t.return,f)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function kl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Nc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){Nc(t,a,l)}}var s=t.return;try{al(t)}catch(l){Nc(t,s,l)}break;case 5:var i=t.return;try{al(t)}catch(l){Nc(t,i,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var _l,Nl=Math.ceil,Sl=x.ReactCurrentDispatcher,El=x.ReactCurrentOwner,jl=x.ReactCurrentBatchConfig,Cl=0,Il=null,Tl=null,Al=0,Pl=0,Rl=Na(0),Ol=0,Dl=null,Ll=0,Ml=0,Fl=0,zl=null,Ul=null,Bl=0,ql=1/0,Hl=null,Vl=!1,Kl=null,Wl=null,Jl=!1,Ql=null,Gl=0,$l=0,Yl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Cl)?Ye():-1!==Xl?Xl:Xl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Al?Al&-Al:null!==ps.transition?(0===Zl&&(Zl=pt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$l)throw $l=0,Yl=null,Error(s(185));yt(e,n,r),0!==(2&Cl)&&e===Il||(e===Il&&(0===(2&Cl)&&(Ml|=n),4===Ol&&oc(e,Al)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(ql=Ye()+500,za&&qa()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=a[i];-1===l?0!==(o&n)&&0===(o&r)||(a[i]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Il?Al:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){za=!0,Ba(e)}(lc.bind(null,e)):Ba(lc.bind(null,e)),ia(function(){0===(6&Cl)&&qa()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Xl=-1,Zl=0,0!==(6&Cl))throw Error(s(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=Cl;Cl|=2;var i=mc();for(Il===e&&Al===t||(Hl=null,ql=Ye()+500,hc(e,t));;)try{vc();break}catch(l){fc(e,l)}Es(),Sl.current=i,Cl=a,null!==Tl?t=0:(Il=null,Al=0,t=Ol)}if(0!==t){if(2===t&&(0!==(a=mt(e))&&(r=a,t=sc(e,a))),1===t)throw n=Dl,hc(e,0),oc(e,r),rc(e,Ye()),n;if(6===t)oc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!or(s(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(i=mt(e))&&(r=i,t=sc(e,i))),1===t))throw n=Dl,hc(e,0),oc(e,r),rc(e,Ye()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Ul,Hl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Bl+500-Ye())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(wc.bind(null,e,Ul,Hl),t);break}wc(e,Ul,Hl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-it(r);i=1<<o,(o=t[o])>a&&(a=o),r&=~i}if(r=a,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nl(r/1960))-r)){e.timeoutHandle=ra(wc.bind(null,e,Ul,Hl),r);break}wc(e,Ul,Hl);break;default:throw Error(s(329))}}}return rc(e,Ye()),e.callbackNode===n?ac.bind(null,e):null}function sc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&ic(t)),e}function ic(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Fl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(s(327));kc();var t=ht(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Dl,hc(e,0),oc(e,t),rc(e,Ye()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,Hl),rc(e,Ye()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(ql=Ye()+500,za&&qa())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&Cl)&&kc();var t=Cl;Cl|=1;var n=jl.transition,r=bt;try{if(jl.transition=null,bt=1,e)return e()}finally{bt=r,jl.transition=n,0===(6&(Cl=t))&&qa()}}function dc(){Pl=Rl.current,Sa(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Tl)for(n=Tl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ra();break;case 3:$s(),Sa(Ia),Sa(Ca),ni();break;case 5:Xs(r);break;case 4:$s();break;case 13:case 19:Sa(Zs);break;case 10:js(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Il=e,Tl=e=Rc(e.current,null),Al=Pl=t,Ol=0,Dl=null,Fl=Ml=Ll=0,Ul=zl=null,null!==As){for(t=0;t<As.length;t++)if(null!==(r=(n=As[t]).interleaved)){n.interleaved=null;var a=r.next,s=n.pending;if(null!==s){var i=s.next;s.next=a,r.next=i}n.pending=r}As=null}return e}function fc(e,t){for(;;){var n=Tl;try{if(Es(),ri.current=Yi,ci){for(var r=ii.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ci=!1}if(si=0,li=oi=ii=null,ui=!1,di=0,El.current=null,null===n||null===n.return){Ol=1,Dl=t,Tl=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,yo(m,o,l,0,t),1&m.mode&&po(i,u,t),c=u;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){po(i,u,t),pc();break e}c=Error(s(426))}else if(as&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),ms(lo(c,l));break e}}i=c=lo(c,l),4!==Ol&&(Ol=2),null===zl?zl=[i]:zl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Bs(i,fo(0,c,t));break e;case 1:l=c;var v=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Bs(i,mo(i,l,t));break e}}i=i.return}while(null!==i)}xc(n)}catch(x){t=x,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function mc(){var e=Sl.current;return Sl.current=Yi,null===e?Yi:e}function pc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Il||0===(268435455&Ll)&&0===(268435455&Ml)||oc(Il,Al)}function gc(e,t){var n=Cl;Cl|=2;var r=mc();for(Il===e&&Al===t||(Hl=null,hc(e,t));;)try{yc();break}catch(a){fc(e,a)}if(Es(),Cl=n,Sl.current=r,null!==Tl)throw Error(s(261));return Il=null,Al=0,Ol}function yc(){for(;null!==Tl;)bc(Tl)}function vc(){for(;null!==Tl&&!Ge();)bc(Tl)}function bc(e){var t=_l(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?xc(e):Tl=t,El.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Jo(n,t,Pl)))return void(Tl=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Ol=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Ol&&(Ol=5)}function wc(e,t,n){var r=bt,a=jl.transition;try{jl.transition=null,bt=1,function(e,t,n,r){do{kc()}while(null!==Ql);if(0!==(6&Cl))throw Error(s(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}(e,i),e===Il&&(Tl=Il=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Ic(tt,function(){return kc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=jl.transition,jl.transition=null;var o=bt;bt=1;var l=Cl;Cl|=4,El.current=null,function(e,t){if(ea=Vt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===a&&(l=o),f===i&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Vt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,y=p.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}p=tl,tl=!1}(e,n),gl(n,e),mr(ta),Vt=!!ea,ta=ea=null,e.current=n,vl(n,e,a),$e(),Cl=l,bt=o,jl.transition=i}else e.current=n;if(Jl&&(Jl=!1,Ql=e,Gl=a),i=e.pendingLanes,0===i&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Vl)throw Vl=!1,e=Kl,Kl=null,e;0!==(1&Gl)&&0!==e.tag&&kc(),i=e.pendingLanes,0!==(1&i)?e===Yl?$l++:($l=0,Yl=e):$l=0,qa()}(e,t,n,r)}finally{jl.transition=a,bt=r}return null}function kc(){if(null!==Ql){var e=xt(Gl),t=jl.transition,n=bt;try{if(jl.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Gl=0,0!==(6&Cl))throw Error(s(331));var a=Cl;for(Cl|=4,Xo=e.current;null!==Xo;){var i=Xo,o=i.child;if(0!==(16&Xo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xo=u;null!==Xo;){var d=Xo;switch(d.tag){case 0:case 11:case 15:nl(8,d,i)}var h=d.child;if(null!==h)h.return=d,Xo=h;else for(;null!==Xo;){var f=(d=Xo).sibling,m=d.return;if(sl(d),d===u){Xo=null;break}if(null!==f){f.return=m,Xo=f;break}Xo=m}}}var p=i.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(i=Xo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,Xo=v;break e}Xo=i.return}}var b=e.current;for(Xo=b;null!==Xo;){var x=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Xo=x;else e:for(o=b;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){Nc(l,l.return,k)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(Cl=a,qa(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(k){}r=!0}return r}finally{bt=n,jl.transition=t}}return!1}function _c(e,t,n){e=zs(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Nc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=zs(t,e=mo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Al&n)===n&&(4===Ol||3===Ol&&(130023424&Al)===Al&&500>Ye()-Bl?hc(e,0):Fl|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Os(e,t))&&(yt(e,t,n),rc(e,n))}function jc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ec(e,n)}function Ic(e,t){return Je(e,t)}function Tc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Tc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,a,i){var o=2;if(r=e,"function"===typeof e)Pc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case _:return Dc(n.children,a,i,t);case N:o=8,a|=8;break;case S:return(e=Ac(12,n,t,2|a)).elementType=S,e.lanes=i,e;case I:return(e=Ac(13,n,t,a)).elementType=I,e.lanes=i,e;case T:return(e=Ac(19,n,t,a)).elementType=T,e.lanes=i,e;case R:return Lc(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case j:o=9;break e;case C:o=11;break e;case A:o=14;break e;case P:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ac(o,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Dc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,a,s,i,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ac(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function Bc(e){if(!e)return ja;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pa(n))return Da(e,n,t)}return t}function qc(e,t,n,r,a,s,i,o,l){return(e=Uc(n,r,!0,e,0,s,0,o,l)).context=Bc(null),n=e.current,(s=Fs(r=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,zs(n,s,a),e.current.lanes=a,yt(e,a,r),rc(e,r),e}function Hc(e,t,n,r){var a=t.current,s=ec(),i=tc(a);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zs(a,t,i))&&(nc(e,a,i,s),Us(e,a,i)),i}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ia.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Io(t),fs();break;case 5:Ys(t);break;case 1:Pa(t.type)&&La(t);break;case 4:Gs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ea(ks,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ea(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mo(e,t,n):(Ea(Zs,1&Zs.current),null!==(e=Vo(e,t,n))?e.sibling:null);Ea(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ea(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,No(e,t,n)}return Vo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,as&&0!==(1048576&t.flags)&&Za(t,Wa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ho(e,t),e=t.pendingProps;var a=Aa(t,Ca.current);Is(t,n),a=pi(null,t,r,e,a,n);var i=gi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pa(r)?(i=!0,La(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ls(t),a.updater=ro,t.stateNode=a,a._reactInternals=t,oo(t,r,e,n),t=Co(null,t,r,!0,i,n)):(t.tag=0,as&&i&&es(t),xo(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=to(r,e),a){case 0:t=Eo(null,t,r,e,n);break e;case 1:t=jo(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=ko(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Eo(e,t,r,a=t.elementType===r?a:to(r,a),n);case 1:return r=t.type,a=t.pendingProps,jo(e,t,r,a=t.elementType===r?a:to(r,a),n);case 3:e:{if(Io(t),null===e)throw Error(s(387));r=t.pendingProps,a=(i=t.memoizedState).element,Ms(e,t),qs(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=To(e,t,r,n,a=lo(Error(s(423)),t));break e}if(r!==a){t=To(e,t,r,n,a=lo(Error(s(424)),t));break e}for(rs=ca(t.stateNode.containerInfo.firstChild),ns=t,as=!0,ss=null,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===a){t=Vo(e,t,n);break e}xo(e,t,r,n)}t=t.child}return t;case 5:return Ys(t),null===e&&cs(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,na(r,a)?o=null:null!==i&&na(r,i)&&(t.flags|=32),So(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Mo(e,t,n);case 4:return Gs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xs(t,null,r,n):xo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,wo(e,t,r,a=t.elementType===r?a:to(r,a),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Ea(ks,r._currentValue),r._currentValue=o,null!==i)if(or(i.value,o)){if(i.children===a.children&&!Ia.current){t=Vo(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Fs(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Cs(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Cs(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}xo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Is(t,n),r=r(a=Ts(a)),t.flags|=1,xo(e,t,r,n),t.child;case 14:return a=to(r=t.type,t.pendingProps),ko(e,t,r,a=to(r.type,a),n);case 15:return _o(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:to(r,a),Ho(e,t),t.tag=1,Pa(r)?(e=!0,La(t)):e=!1,Is(t,n),so(t,r,a),oo(t,r,a,n),Co(null,t,r,!0,e,n);case 19:return qo(e,t,n);case 22:return No(e,t,n)}throw Error(s(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Gc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,a){var s=n._reactRootContainer;if(s){var i=s;if("function"===typeof a){var o=a;a=function(){var e=Vc(i);o.call(e)}}Hc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var s=r;r=function(){var e=Vc(i);s.call(e)}}var i=qc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[ma]=i.current,qr(8===e.nodeType?e.parentNode:e),uc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var o=r;r=function(){var e=Vc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[ma]=l.current,qr(8===e.nodeType?e.parentNode:e),uc(function(){Hc(t,l,n,r)}),l}(n,t,e,a,r);return Vc(i)}Gc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hc(e,t,null,null)},Gc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Hc(null,e,null,null)}),t[ma]=null}},Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Ye()),0===(6&Cl)&&(ql=Ye()+500,qa()))}break;case 13:uc(function(){var t=Os(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Wc(e,1)}},kt=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Os(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},Nt=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=wa(r);if(!a)throw Error(s(90));J(r),X(r,a)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ie=uc;var eu={usingClientEntryPoint:!1,Events:[ba,xa,wa,Ee,je,cc]},tu={findFiberByHostInstance:va,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{at=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(s(299));var n=!1,r="",a=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,a),e[ma]=t.current,qr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",o=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,a,0,i,o),e[ma]=t.current,qr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Gc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ma]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},809:function(e,t,n){e.exports=function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)},t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function r(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)!r&&a in t||((r=r||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,s=Object.keys,i=Array.isArray;function o(e,t){return"object"!=typeof t||s(t).forEach(function(n){e[n]=t[n]}),e}"undefined"==typeof Promise||a.Promise||(a.Promise=Promise);var l=Object.getPrototypeOf,c={}.hasOwnProperty;function u(e,t){return c.call(e,t)}function d(e,t){"function"==typeof t&&(t=t(l(e))),("undefined"==typeof Reflect?s:Reflect.ownKeys)(t).forEach(function(n){f(e,n,t[n])})}var h=Object.defineProperty;function f(e,t,n,r){h(e,t,o(n&&u(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function m(e){return{from:function(t){return e.prototype=Object.create(t.prototype),f(e.prototype,"constructor",e),{extend:d.bind(null,e.prototype)}}}}var p=Object.getOwnPropertyDescriptor,g=[].slice;function y(e,t,n){return g.call(e,t,n)}function v(e,t){return t(e)}function b(e){if(!e)throw new Error("Assertion Failed")}function x(e){a.setImmediate?setImmediate(e):setTimeout(e,0)}function w(e,t){if("string"==typeof t&&u(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,a=t.length;r<a;++r){var s=w(e,t[r]);n.push(s)}return n}var i=t.indexOf(".");if(-1!==i){var o=e[t.substr(0,i)];return null==o?void 0:w(o,t.substr(i+1))}}function k(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof n&&"length"in n);for(var r=0,a=t.length;r<a;++r)k(e,t[r],n[r])}else{var s,o,l=t.indexOf(".");-1!==l?(s=t.substr(0,l),""===(o=t.substr(l+1))?void 0===n?i(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n:k(l=(l=e[s])&&u(e,s)?l:e[s]={},o,n)):void 0===n?i(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function _(e){var t,n={};for(t in e)u(e,t)&&(n[t]=e[t]);return n}var N=[].concat;function S(e){return N.apply([],e)}var E="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(S([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return a[e]}),j=new Set(E.map(function(e){return a[e]})),C=null;function I(e){return C=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var n=C.get(t);if(n)return n;if(i(t)){n=[],C.set(t,n);for(var r=0,a=t.length;r<a;++r)n.push(e(t[r]))}else if(j.has(t.constructor))n=t;else{var s,o=l(t);for(s in n=o===Object.prototype?{}:Object.create(o),C.set(t,n),t)u(t,s)&&(n[s]=e(t[s]))}return n}(e),C=null,e}var T={}.toString;function A(e){return T.call(e).slice(8,-1)}var P="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",R="symbol"==typeof P?function(e){var t;return null!=e&&(t=e[P])&&t.apply(e)}:function(){return null};function O(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var D={};function L(e){var t,n,r,a;if(1===arguments.length){if(i(e))return e.slice();if(this===D&&"string"==typeof e)return[e];if(a=R(e)){for(n=[];!(r=a.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var M="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},F=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(le=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),z={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function U(e,t){this.name=e,this.message=t}function B(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function q(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=B(e,t)}function H(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=B(e,this.failures)}m(U).from(Error).extend({toString:function(){return this.name+": "+this.message}}),m(q).from(U),m(H).from(U);var V=F.reduce(function(e,t){return e[t]=t+"Error",e},{}),K=U,W=F.reduce(function(e,t){var n=t+"Error";function r(e,r){this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=z[t]||n,this.inner=null)}return m(r).from(K),e[t]=r,e},{});W.Syntax=SyntaxError,W.Type=TypeError,W.Range=RangeError;var J=le.reduce(function(e,t){return e[t+"Error"]=W[t],e},{}),Q=F.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=W[t]),e},{});function G(){}function $(e){return e}function Y(e,t){return null==e||e===$?t:function(n){return t(e(n))}}function X(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Z(e,t){return e===G?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?X(r,this.onsuccess):r),a&&(this.onerror=this.onerror?X(a,this.onerror):a),void 0!==s?s:n}}function ee(e,t){return e===G?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?X(n,this.onsuccess):n),r&&(this.onerror=this.onerror?X(r,this.onerror):r)}}function te(e,t){return e===G?t:function(n){var r=e.apply(this,arguments);o(n,r);var a=this.onsuccess,s=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?X(a,this.onsuccess):a),s&&(this.onerror=this.onerror?X(s,this.onerror):s),void 0===r?void 0===n?void 0:n:o(r,n)}}function ne(e,t){return e===G?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function re(e,t){return e===G?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,a=arguments.length,s=new Array(a);a--;)s[a]=arguments[a];return n.then(function(){return t.apply(r,s)})}return t.apply(this,arguments)}}Q.ModifyError=q,Q.DexieError=U,Q.BulkError=H;var ae="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function se(e){ae=e}var ie={},oe=100,le=(E="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,l(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,l(t),e]}(),E[0]),ce=(F=E[1],E=E[2],F=F&&F.then,le&&le.constructor),ue=!!E,de=function(e,t){be.push([e,t]),fe&&(queueMicrotask(Ie),fe=!1)},he=!0,fe=!0,me=[],pe=[],ge=$,ye={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:G,pgp:!1,env:{},finalize:G},ve=ye,be=[],xe=0,we=[];function ke(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=ve;if("function"!=typeof e){if(e!==ie)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Se(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,n){try{n(function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Te();n&&"function"==typeof n.then?e(t,function(e,t){n instanceof ke?n._then(e,t):n.then(e,t)}):(t._state=!0,t._value=n,Ee(t)),r&&Ae()}},Se.bind(null,t))}catch(n){Se(t,n)}}(this,e)}var _e={get:function(){var e=ve,t=ze;function n(n,r){var a=this,s=!e.global&&(e!==ve||t!==ze),i=s&&!He(),o=new ke(function(t,o){je(a,new Ne(Ge(n,e,s,i),Ge(r,e,s,i),t,o,e))});return this._consoleTask&&(o._consoleTask=this._consoleTask),o}return n.prototype=ie,n},set:function(e){f(this,"then",e&&e.prototype===ie?_e:{get:function(){return e},set:_e.set})}};function Ne(e,t,n,r,a){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=a}function Se(e,t){var n,r;pe.push(t),null===e._state&&(n=e._lib&&Te(),t=ge(t),e._state=!1,e._value=t,r=e,me.some(function(e){return e._value===r._value})||me.push(r),Ee(e),n&&Ae())}function Ee(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)je(e,t[n]);var a=e._PSD;--a.ref||a.finalize(),0===xe&&(++xe,de(function(){0==--xe&&Pe()},[]))}function je(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++xe,de(Ce,[n,e,t])}else e._listeners.push(t)}function Ce(e,t,n){try{var r,a=t._value;!t._state&&pe.length&&(pe=[]),r=ae&&t._consoleTask?t._consoleTask.run(function(){return e(a)}):e(a),t._state||-1!==pe.indexOf(a)||function(e){for(var t=me.length;t;)if(me[--t]._value===e._value)return me.splice(t,1)}(t),n.resolve(r)}catch(e){n.reject(e)}finally{0==--xe&&Pe(),--n.psd.ref||n.psd.finalize()}}function Ie(){Qe(ye,function(){Te()&&Ae()})}function Te(){var e=he;return fe=he=!1,e}function Ae(){var e,t,n;do{for(;0<be.length;)for(e=be,be=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(0<be.length);fe=he=!0}function Pe(){var e=me;me=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=we.slice(0),n=t.length;n;)t[--n]()}function Re(e){return new ke(ie,!1,e)}function Oe(e,t){var n=ve;return function(){var r=Te(),a=ve;try{return We(n,!0),e.apply(this,arguments)}catch(r){t&&t(r)}finally{We(a,!1),r&&Ae()}}}d(ke.prototype,{then:_e,_then:function(e,t){je(this,new Ne(null,null,e,t,ve))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,n=arguments[1];return"function"==typeof t?this.then(null,function(e){return(e instanceof t?n:Re)(e)}):this.then(null,function(e){return(e&&e.name===t?n:Re)(e)})},finally:function(e){return this.then(function(t){return ke.resolve(e()).then(function(){return t})},function(t){return ke.resolve(e()).then(function(){return Re(t)})})},timeout:function(e,t){var n=this;return e<1/0?new ke(function(r,a){var s=setTimeout(function(){return a(new W.Timeout(t))},e);n.then(r,a).finally(clearTimeout.bind(null,s))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(ke.prototype,Symbol.toStringTag,"Dexie.Promise"),ye.env=Je(),d(ke,{all:function(){var e=L.apply(null,arguments).map(Ve);return new ke(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(a,s){return ke.resolve(a).then(function(n){e[s]=n,--r||t(e)},n)})})},resolve:function(e){return e instanceof ke?e:e&&"function"==typeof e.then?new ke(function(t,n){e.then(t,n)}):new ke(ie,!0,e)},reject:Re,race:function(){var e=L.apply(null,arguments).map(Ve);return new ke(function(t,n){e.map(function(e){return ke.resolve(e).then(t,n)})})},PSD:{get:function(){return ve},set:function(e){return ve=e}},totalEchoes:{get:function(){return ze}},newPSD:Be,usePSD:Qe,scheduler:{get:function(){return de},set:function(e){de=e}},rejectionMapper:{get:function(){return ge},set:function(e){ge=e}},follow:function(e,t){return new ke(function(n,r){return Be(function(t,n){var r=ve;r.unhandleds=[],r.onunhandled=n,r.finalize=X(function(){var e,r=this;e=function(){0===r.unhandleds.length?t():n(r.unhandleds[0])},we.push(function t(){e(),we.splice(we.indexOf(t),1)}),++xe,de(function(){0==--xe&&Pe()},[])},r.finalize),e()},t,n,r)})}}),ce&&(ce.allSettled&&f(ke,"allSettled",function(){var e=L.apply(null,arguments).map(Ve);return new ke(function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach(function(e,a){return ke.resolve(e).then(function(e){return r[a]={status:"fulfilled",value:e}},function(e){return r[a]={status:"rejected",reason:e}}).then(function(){return--n||t(r)})})})}),ce.any&&"undefined"!=typeof AggregateError&&f(ke,"any",function(){var e=L.apply(null,arguments).map(Ve);return new ke(function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,a=new Array(r);e.forEach(function(e,s){return ke.resolve(e).then(function(e){return t(e)},function(e){a[s]=e,--r||n(new AggregateError(a))})})})}),ce.withResolvers&&(ke.withResolvers=ce.withResolvers));var De={awaits:0,echoes:0,id:0},Le=0,Me=[],Fe=0,ze=0,Ue=0;function Be(e,t,n,r){var a=ve,s=Object.create(a);return s.parent=a,s.ref=0,s.global=!1,s.id=++Ue,ye.env,s.env=ue?{Promise:ke,PromiseProp:{value:ke,configurable:!0,writable:!0},all:ke.all,race:ke.race,allSettled:ke.allSettled,any:ke.any,resolve:ke.resolve,reject:ke.reject}:{},t&&o(s,t),++a.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Qe(s,e,n,r),0===s.ref&&s.finalize(),r}function qe(){return De.id||(De.id=++Le),++De.awaits,De.echoes+=oe,De.id}function He(){return!!De.awaits&&(0==--De.awaits&&(De.id=0),De.echoes=De.awaits*oe,!0)}function Ve(e){return De.echoes&&e&&e.constructor===ce?(qe(),e.then(function(e){return He(),e},function(e){return He(),Ye(e)})):e}function Ke(){var e=Me[Me.length-1];Me.pop(),We(e,!1)}function We(e,t){var n,r=ve;(t?!De.echoes||Fe++&&e===ve:!Fe||--Fe&&e===ve)||queueMicrotask(t?function(e){++ze,De.echoes&&0!=--De.echoes||(De.echoes=De.awaits=De.id=0),Me.push(ve),We(e,!0)}.bind(null,e):Ke),e!==ve&&(ve=e,r===ye&&(ye.env=Je()),ue&&(n=ye.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(a,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function Je(){var e=a.Promise;return ue?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Qe(e,t,n,r,a){var s=ve;try{return We(e,!0),t(n,r,a)}finally{We(s,!1)}}function Ge(e,t,n,r){return"function"!=typeof e?e:function(){var a=ve;n&&qe(),We(t,!0);try{return e.apply(this,arguments)}finally{We(a,!1),r&&queueMicrotask(He)}}}function $e(e){Promise===ce&&0===De.echoes?0===Fe?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+F).indexOf("[native code]")&&(qe=He=G);var Ye=ke.reject,Xe=String.fromCharCode(65535),Ze="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",et="String expected.",tt=[],nt="__dbnames",rt="readonly",at="readwrite";function st(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var it={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ot(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=I(t))[e],t}}function lt(){throw W.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ct(e,t){try{var n=ut(e),r=ut(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,a=n<r?n:r,s=0;s<a;++s)if(e[s]!==t[s])return e[s]<t[s]?-1:1;return n===r?0:n<r?-1:1}(dt(e),dt(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,a=n<r?n:r,s=0;s<a;++s){var i=ct(e[s],t[s]);if(0!==i)return i}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function ut(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=A(e))?"binary":e}function dt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function ht(e,t,n){var r=e.schema.yProps;return r?(t&&0<n.numFailures&&(t=t.filter(function(e,t){return!n.failures[t]})),Promise.all(r.map(function(n){return n=n.updatesTable,t?e.db.table(n).where("k").anyOf(t).delete():e.db.table(n).clear()})).then(function(){return n})):n}var ft=(mt.prototype._trans=function(e,t,n){var r=this._tx||ve.trans,a=this.name,s=ae&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function i(e,n,r){if(!r.schema[a])throw new W.NotFound("Table "+a+" not part of transaction");return t(r.idbtrans,r)}var o=Te();try{var l=r&&r.db._novip===this.db._novip?r===ve.trans?r._promise(e,i,n):Be(function(){return r._promise(e,i,n)},{trans:r,transless:ve.transless||ve}):function t(n,r,a,s){if(n.idbdb&&(n._state.openComplete||ve.letThrough||n._vip)){var i=n._createTransaction(r,a,n._dbSchema);try{i.create(),n._state.PR1398_maxLoop=3}catch(e){return e.name===V.InvalidState&&n.isOpen()&&0<--n._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return t(n,r,a,s)})):Ye(e)}return i._promise(r,function(e,t){return Be(function(){return ve.trans=i,s(e,t,i)})}).then(function(e){if("readwrite"===r)try{i.idbtrans.commit()}catch(e){}return"readonly"===r?e:i._completion.then(function(){return e})})}if(n._state.openComplete)return Ye(new W.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return Ye(new W.DatabaseClosed);n.open().catch(G)}return n._state.dbReadyPromise.then(function(){return t(n,r,a,s)})}(this.db,e,[this.name],i);return s&&(l._consoleTask=s,l=l.catch(function(e){return console.trace(e),Ye(e)})),l}finally{o&&Ae()}},mt.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?Ye(new W.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return n.core.get({trans:t,key:e}).then(function(e){return n.hook.reading.fire(e)})}).then(t)},mt.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(i(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=s(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return 0<=e.keyPath.indexOf(t)})){for(var n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(n&&this.db._maxKey!==Xe){var r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map(function(t){return e[t]}))}!n&&ae&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var a=this.schema.idxByName;function o(e,t){return 0===ct(e,t)}var l=t.reduce(function(t,n){var r=t[0],s=t[1],l=(t=a[n],e[n]);return[r||t,r||!t?st(s,t&&t.multi?function(e){return e=w(e,n),i(e)&&e.some(function(e){return o(l,e)})}:function(e){return o(l,w(e,n))}):s]},[null,null]);return r=l[0],l=l[1],r?this.where(r.name).equals(e[r.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")},mt.prototype.filter=function(e){return this.toCollection().and(e)},mt.prototype.count=function(e){return this.toCollection().count(e)},mt.prototype.offset=function(e){return this.toCollection().offset(e)},mt.prototype.limit=function(e){return this.toCollection().limit(e)},mt.prototype.each=function(e){return this.toCollection().each(e)},mt.prototype.toArray=function(e){return this.toCollection().toArray(e)},mt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},mt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,i(e)?"[".concat(e.join("+"),"]"):e))},mt.prototype.reverse=function(){return this.toCollection().reverse()},mt.prototype.mapToClass=function(t){var n,r=this.db,a=this.name;function s(){return null!==n&&n.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof lt&&(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(s,n=t),Object.defineProperty(s.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),s.prototype.table=function(){return a},t=s);for(var i=new Set,o=t.prototype;o;o=l(o))Object.getOwnPropertyNames(o).forEach(function(e){return i.add(e)});function c(e){if(!e)return e;var n,r=Object.create(t.prototype);for(n in e)if(!i.has(n))try{r[n]=e[n]}catch(e){}return r}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=c,this.hook("reading",c),t},mt.prototype.defineClass=function(){return this.mapToClass(function(e){o(this,e)})},mt.prototype.add=function(e,t){var n=this,r=this.schema.primKey,a=r.auto,s=r.keyPath,i=e;return s&&a&&(i=ot(s)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[i]})}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):e.lastResult}).then(function(t){if(s)try{k(e,s,t)}catch(t){}return t})},mt.prototype.update=function(e,t){return"object"!=typeof e||i(e)?this.where(":id").equals(e).modify(t):void 0===(e=w(e,this.schema.primKey.keyPath))?Ye(new W.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},mt.prototype.put=function(e,t){var n=this,r=this.schema.primKey,a=r.auto,s=r.keyPath,i=e;return s&&a&&(i=ot(s)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"put",values:[i],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):e.lastResult}).then(function(t){if(s)try{k(e,s,t)}catch(t){}return t})},mt.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]}).then(function(n){return ht(t,[e],n)}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):void 0})})},mt.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:it}).then(function(t){return ht(e,null,t)})}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):void 0})},mt.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},mt.prototype.bulkAdd=function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,s=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=(o=r.schema.primKey).auto;if((o=o.keyPath)&&a)throw new W.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var i=e.length,o=o&&n?e.map(ot(o)):e;return r.core.mutate({trans:t,type:"add",keys:a,values:o,wantResults:s}).then(function(e){var t=e.numFailures,n=e.results,a=e.lastResult;if(e=e.failures,0===t)return s?n:a;throw new H("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(i," operations failed"),e)})})},mt.prototype.bulkPut=function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,s=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=(o=r.schema.primKey).auto;if((o=o.keyPath)&&a)throw new W.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var i=e.length,o=o&&n?e.map(ot(o)):e;return r.core.mutate({trans:t,type:"put",keys:a,values:o,wantResults:s}).then(function(e){var t=e.numFailures,n=e.results,a=e.lastResult;if(e=e.failures,0===t)return s?n:a;throw new H("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(i," operations failed"),e)})})},mt.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(e){return e.key}),a=e.map(function(e){return e.changes}),s=[];return this._trans("readwrite",function(i){return n.getMany({trans:i,keys:r,cache:"clone"}).then(function(o){var l=[],c=[];e.forEach(function(e,n){var r=e.key,a=e.changes,i=o[n];if(i){for(var u=0,d=Object.keys(a);u<d.length;u++){var h=d[u],f=a[h];if(h===t.schema.primKey.keyPath){if(0!==ct(f,r))throw new W.Constraint("Cannot update primary key in bulkUpdate()")}else k(i,h,f)}s.push(n),l.push(r),c.push(i)}});var u=l.length;return n.mutate({trans:i,type:"put",keys:l,values:c,updates:{keys:r,changeSpecs:a}}).then(function(e){var n=e.numFailures,r=e.failures;if(0===n)return u;for(var a=0,i=Object.keys(r);a<i.length;a++){var o,l=i[a],c=s[Number(l)];null!=c&&(o=r[l],delete r[l],r[c]=o)}throw new H("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(u," operations failed"),r)})})})},mt.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:e}).then(function(n){return ht(t,e,n)})}).then(function(e){var r=e.numFailures,a=e.lastResult;if(e=e.failures,0===r)return a;throw new H("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),e)})},mt);function mt(){}function pt(e){function t(t,r){if(r){for(var a=arguments.length,s=new Array(a-1);--a;)s[a-1]=arguments[a];return n[t].subscribe.apply(null,s),e}if("string"==typeof t)return n[t]}var n={};t.addEventType=o;for(var r=1,a=arguments.length;r<a;++r)o(arguments[r]);return t;function o(e,r,a){if("object"!=typeof e){var l;r=r||ne;var c={subscribers:[],fire:a=a||G,subscribe:function(e){-1===c.subscribers.indexOf(e)&&(c.subscribers.push(e),c.fire=r(c.fire,e))},unsubscribe:function(e){c.subscribers=c.subscribers.filter(function(t){return t!==e}),c.fire=c.subscribers.reduce(r,a)}};return n[e]=t[e]=c}s(l=e).forEach(function(e){var t=l[e];if(i(t))o(e,l[e][0],l[e][1]);else{if("asap"!==t)throw new W.InvalidArgument("Invalid event config");var n=o(e,$,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){x(function(){e.apply(null,t)})})})}})}}function gt(e,t){return m(t).from({prototype:e}),t}function yt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function vt(e,t){e.filter=st(e.filter,t)}function bt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return st(r(),t())}:t,e.justLimit=n&&!r}function xt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new W.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function wt(e,t,n){var r=xt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function kt(e,t,n,r){var a=e.replayFilter?st(e.filter,e.replayFilter()):e.filter;if(e.or){var s={},i=function(e,n,r){var i,o;a&&!a(n,r,function(e){return n.stop(e)},function(e){return n.fail(e)})||("[object ArrayBuffer]"===(o=""+(i=n.primaryKey))&&(o=""+new Uint8Array(i)),u(s,o)||(s[o]=!0,t(e,n,r)))};return Promise.all([e.or._iterate(i,n),_t(wt(e,r,n),e.algorithm,i,!e.keysOnly&&e.valueMapper)])}return _t(wt(e,r,n),st(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function _t(e,t,n,r){var a=Oe(r?function(e,t,a){return n(r(e),t,a)}:n);return e.then(function(e){if(e)return e.start(function(){var n=function(){return e.continue()};t&&!t(e,function(e){return n=e},function(t){e.stop(t),n=G},function(t){e.fail(t),n=G})||a(e.value,e,function(e){return n=e}),n()})})}var Nt=(St.prototype.execute=function(e){var t=this["@@propmod"];if(void 0!==t.add){var n=t.add;if(i(n))return r(r([],i(e)?e:[],!0),n,!0).sort();if("number"==typeof n)return(Number(e)||0)+n;if("bigint"==typeof n)try{return BigInt(e)+n}catch(e){return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(void 0!==t.remove){var a=t.remove;if(i(a))return i(e)?e.filter(function(e){return!a.includes(e)}).sort():[];if("number"==typeof a)return Number(e)-a;if("bigint"==typeof a)try{return BigInt(e)-a}catch(e){return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}return(n=null===(n=t.replacePrefix)||void 0===n?void 0:n[0])&&"string"==typeof e&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},St);function St(e){this["@@propmod"]=e}var Et=(jt.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Ye.bind(null,n.error)):n.table._trans("readonly",e).then(t)},jt.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Ye.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},jt.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=st(t.algorithm,e)},jt.prototype._iterate=function(e,t){return kt(this._ctx,e,t,this._ctx.table.core)},jt.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&o(n,e),t._ctx=n,t},jt.prototype.raw=function(){return this._ctx.valueMapper=null,this},jt.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return kt(t,e,n,t.table.core)})},jt.prototype.count=function(e){var t=this;return this._read(function(e){var n=t._ctx,r=n.table.core;if(yt(n,!0))return r.count({trans:e,query:{index:xt(n,r.schema),range:n.range}}).then(function(e){return Math.min(e,n.limit)});var a=0;return kt(n,function(){return++a,!1},e,r).then(function(){return a})}).then(e)},jt.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],a=n.length-1;function s(e,t){return t?s(e[n[t]],t-1):e[r]}var i="next"===this._ctx.dir?1:-1;function o(e,t){return ct(s(e,a),s(t,a))*i}return this.toArray(function(e){return e.sort(o)}).then(t)},jt.prototype.toArray=function(e){var t=this;return this._read(function(e){var n=t._ctx;if("next"===n.dir&&yt(n,!0)&&0<n.limit){var r=n.valueMapper,a=xt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:a,range:n.range}}).then(function(e){return e=e.result,r?e.map(r):e})}var s=[];return kt(n,function(e){return s.push(e)},e,n.table.core).then(function(){return s})},e)},jt.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,yt(t)?bt(t,function(){var t=e;return function(e,n){return 0===t||(1===t?--t:n(function(){e.advance(t),t=0}),!1)}}):bt(t,function(){var t=e;return function(){return--t<0}})),this},jt.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),bt(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),0<=t}},!0),this},jt.prototype.until=function(e,t){return vt(this._ctx,function(n,r,a){return!e(n.value)||(r(a),t)}),this},jt.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},jt.prototype.last=function(e){return this.reverse().first(e)},jt.prototype.filter=function(e){var t;return vt(this._ctx,function(t){return e(t.value)}),(t=this._ctx).isMatch=st(t.isMatch,e),this},jt.prototype.and=function(e){return this.filter(e)},jt.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},jt.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},jt.prototype.desc=function(){return this.reverse()},jt.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},jt.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},jt.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},jt.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},jt.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&yt(t,!0)&&0<t.limit)return this._read(function(e){var n=xt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},jt.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},jt.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},jt.prototype.lastKey=function(e){return this.reverse().firstKey(e)},jt.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return vt(this._ctx,function(e){var n=e.primaryKey.toString();return e=u(t,n),t[n]=!0,!e}),this},jt.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var a,i,o;o="function"==typeof e?e:(a=s(e),i=a.length,function(t){for(var n=!1,r=0;r<i;++r){var s=a[r],o=e[s],l=w(t,s);o instanceof Nt?(k(t,s,o.execute(l)),n=!0):l!==o&&(k(t,s,o),n=!0)}return n});var l,c=n.table.core,u=(l=c.schema.primaryKey).outbound,d=l.extractKey,h=200;function f(e,t){var n=t.failures;t=t.numFailures,p+=e-t;for(var r=0,a=s(n);r<a.length;r++){var i=a[r];m.push(n[i])}}(l=t.db._options.modifyChunkSize)&&(h="object"==typeof l?l[c.name]||l["*"]||200:l);var m=[],p=0,g=[],y=e===Ct;return t.clone().primaryKeys().then(function(t){function a(i){var l=Math.min(h,t.length-i),m=t.slice(i,i+l);return(y?Promise.resolve([]):c.getMany({trans:r,keys:m,cache:"immutable"})).then(function(p){var g=[],v=[],b=u?[]:null,x=y?m:[];if(!y)for(var w=0;w<l;++w){var k=p[w],_={value:I(k),primKey:t[i+w]};!1!==o.call(_,_.value,_)&&(null==_.value?x.push(t[i+w]):u||0===ct(d(k),d(_.value))?(v.push(_.value),u&&b.push(t[i+w])):(x.push(t[i+w]),g.push(_.value)))}return Promise.resolve(0<g.length&&c.mutate({trans:r,type:"add",values:g}).then(function(e){for(var t in e.failures)x.splice(parseInt(t),1);f(g.length,e)})).then(function(){return(0<v.length||s&&"object"==typeof e)&&c.mutate({trans:r,type:"put",keys:b,values:v,criteria:s,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<i}).then(function(e){return f(v.length,e)})}).then(function(){return(0<x.length||s&&y)&&c.mutate({trans:r,type:"delete",keys:x,criteria:s,isAdditionalChunk:0<i}).then(function(e){return ht(n.table,x,e)}).then(function(e){return f(x.length,e)})}).then(function(){return t.length>i+l&&a(i+h)})})}var s=yt(n)&&n.limit===1/0&&("function"!=typeof e||y)&&{index:n.index,range:n.range};return a(0).then(function(){if(0<m.length)throw new q("Error modifying one or more objects",m,p,g);return t.length})})})},jt.prototype.delete=function(){var e=this._ctx,t=e.range;return!yt(e)||e.table.schema.yProps||!e.isPrimKey&&3!==t.type?this.modify(Ct):this._write(function(n){var r=e.table.core.schema.primaryKey,a=t;return e.table.core.count({trans:n,query:{index:r,range:a}}).then(function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:a}).then(function(e){var n=e.failures;if(e=e.numFailures)throw new q("Could not delete some values",Object.keys(n).map(function(e){return n[e]}),t-e);return t-e})})})},jt);function jt(){}var Ct=function(e,t){return t.value=null};function It(e,t){return e<t?-1:e===t?0:1}function Tt(e,t){return t<e?-1:e===t?0:1}function At(e,t,n){return(e=e instanceof Lt?new e.Collection(e):e)._ctx.error=new(n||TypeError)(t),e}function Pt(e){return new e.Collection(e,function(){return Dt("")}).limit(0)}function Rt(e,t,n,r){var a,s,i,o,l,c,u,d=n.length;if(!n.every(function(e){return"string"==typeof e}))return At(e,et);function h(e){a="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},s="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},i="next"===e?It:Tt;var t=n.map(function(e){return{lower:s(e),upper:a(e)}}).sort(function(e,t){return i(e.lower,t.lower)});o=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),u="next"===(c=e)?"":r}h("next"),(e=new e.Collection(e,function(){return Ot(o[0],l[d-1]+r)}))._ondirectionchange=function(e){h(e)};var f=0;return e._addAlgorithm(function(e,n,r){var a=e.key;if("string"!=typeof a)return!1;var h=s(a);if(t(h,l,f))return!0;for(var m=null,p=f;p<d;++p){var g=function(e,t,n,r,a,s){for(var i=Math.min(e.length,r.length),o=-1,l=0;l<i;++l){var c=t[l];if(c!==r[l])return a(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):a(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):0<=o?e.substr(0,o)+t[o]+n.substr(o+1):null;a(e[l],c)<0&&(o=l)}return i<r.length&&"next"===s?e+n.substr(e.length):i<e.length&&"prev"===s?e.substr(0,n.length):o<0?null:e.substr(0,o)+r[o]+n.substr(o+1)}(a,h,o[p],l[p],i,c);null===g&&null===m?f=p+1:(null===m||0<i(m,g))&&(m=g)}return n(null!==m?function(){e.continue(m+u)}:r),!1}),e}function Ot(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Dt(e){return{type:1,lower:e,upper:e}}var Lt=(Object.defineProperty(Mt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Mt.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Pt(this):new this.Collection(this,function(){return Ot(e,t,!n,!r)})}catch(e){return At(this,Ze)}},Mt.prototype.equals=function(e){return null==e?At(this,Ze):new this.Collection(this,function(){return Dt(e)})},Mt.prototype.above=function(e){return null==e?At(this,Ze):new this.Collection(this,function(){return Ot(e,void 0,!0)})},Mt.prototype.aboveOrEqual=function(e){return null==e?At(this,Ze):new this.Collection(this,function(){return Ot(e,void 0,!1)})},Mt.prototype.below=function(e){return null==e?At(this,Ze):new this.Collection(this,function(){return Ot(void 0,e,!1,!0)})},Mt.prototype.belowOrEqual=function(e){return null==e?At(this,Ze):new this.Collection(this,function(){return Ot(void 0,e)})},Mt.prototype.startsWith=function(e){return"string"!=typeof e?At(this,et):this.between(e,e+Xe,!0,!0)},Mt.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Rt(this,function(e,t){return 0===e.indexOf(t[0])},[e],Xe)},Mt.prototype.equalsIgnoreCase=function(e){return Rt(this,function(e,t){return e===t[0]},[e],"")},Mt.prototype.anyOfIgnoreCase=function(){var e=L.apply(D,arguments);return 0===e.length?Pt(this):Rt(this,function(e,t){return-1!==t.indexOf(e)},e,"")},Mt.prototype.startsWithAnyOfIgnoreCase=function(){var e=L.apply(D,arguments);return 0===e.length?Pt(this):Rt(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,Xe)},Mt.prototype.anyOf=function(){var e=this,t=L.apply(D,arguments),n=this._cmp;try{t.sort(n)}catch(r){return At(this,Ze)}if(0===t.length)return Pt(this);var r=new this.Collection(this,function(){return Ot(t[0],t[t.length-1])});r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var a=0;return r._addAlgorithm(function(e,r,s){for(var i=e.key;0<n(i,t[a]);)if(++a===t.length)return r(s),!1;return 0===n(i,t[a])||(r(function(){e.continue(t[a])}),!1)}),r},Mt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Mt.prototype.noneOf=function(){var e=L.apply(D,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return At(this,Ze)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Mt.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,a=this._ascending,s=this._descending,i=this._min,o=this._max;if(0===e.length)return Pt(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&a(e[0],e[1])<=0}))return At(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",W.InvalidArgument);var l,c=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers,d=a;function h(e,t){return d(e[0],t[0])}try{(l=e.reduce(function(e,t){for(var n=0,a=e.length;n<a;++n){var s=e[n];if(r(t[0],s[1])<0&&0<r(t[1],s[0])){s[0]=i(s[0],t[0]),s[1]=o(s[1],t[1]);break}}return n===a&&e.push(t),e},[])).sort(h)}catch(e){return At(this,Ze)}var f=0,m=u?function(e){return 0<a(e,l[f][1])}:function(e){return 0<=a(e,l[f][1])},p=c?function(e){return 0<s(e,l[f][0])}:function(e){return 0<=s(e,l[f][0])},g=m;return(e=new this.Collection(this,function(){return Ot(l[0][0],l[l.length-1][1],!c,!u)}))._ondirectionchange=function(e){d="next"===e?(g=m,a):(g=p,s),l.sort(h)},e._addAlgorithm(function(e,t,r){for(var s,i=e.key;g(i);)if(++f===l.length)return t(r),!1;return!m(s=i)&&!p(s)||(0===n._cmp(i,l[f][1])||0===n._cmp(i,l[f][0])||t(function(){d===a?e.continue(l[f][0]):e.continue(l[f][1])}),!1)}),e},Mt.prototype.startsWithAnyOf=function(){var e=L.apply(D,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?Pt(this):this.inAnyRange(e.map(function(e){return[e,e+Xe]})):At(this,"startsWithAnyOf() only works with strings")},Mt);function Mt(){}function Ft(e){return Oe(function(t){return zt(t),e(t.target.error),!1})}function zt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ut="storagemutated",Bt="x-storagemutated-1",qt=pt(null,Ut),Ht=(Vt.prototype._lock=function(){return b(!ve.global),++this._reculock,1!==this._reculock||ve.global||(ve.lockOwnerFor=this),this},Vt.prototype._unlock=function(){if(b(!ve.global),0==--this._reculock)for(ve.global||(ve.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Qe(e[1],e[0])}catch(e){}}return this},Vt.prototype._locked=function(){return this._reculock&&ve.lockOwnerFor!==this},Vt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new W.DatabaseClosed(r);case"MissingAPIError":throw new W.MissingAPI(r.message,r);default:throw new W.OpenFailed(r)}if(!this.active)throw new W.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Oe(function(n){zt(n),t._reject(e.error)}),e.onabort=Oe(function(n){zt(n),t.active&&t._reject(new W.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=Oe(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&qt.storagemutated.fire(e.mutatedParts)}),this},Vt.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Ye(new W.ReadOnly("Transaction is readonly"));if(!this.active)return Ye(new W.TransactionInactive);if(this._locked())return new ke(function(a,s){r._blockedFuncs.push([function(){r._promise(e,t,n).then(a,s)},ve])});if(n)return Be(function(){var e=new ke(function(e,n){r._lock();var a=t(e,n,r);a&&a.then&&a.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var a=new ke(function(e,n){var a=t(e,n,r);a&&a.then&&a.then(e,n)});return a._lib=!0,a},Vt.prototype._root=function(){return this.parent?this.parent._root():this},Vt.prototype.waitFor=function(e){var t,n=this._root(),r=ke.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=e)}());var a=n._waitingFor;return new ke(function(e,t){r.then(function(t){return n._waitingQueue.push(Oe(e.bind(null,t)))},function(e){return n._waitingQueue.push(Oe(t.bind(null,e)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},Vt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new W.Abort))},Vt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(u(t,e))return t[e];var n=this.schema[e];if(!n)throw new W.NotFound("Table "+e+" not part of transaction");return(n=new this.db.Table(e,n,this)).core=this.db.core.table(e),t[e]=n},Vt);function Vt(){}function Kt(e,t,n,r,a,s,i,o){return{name:e,keyPath:t,unique:n,multi:r,auto:a,compound:s,src:(n&&!i?"&":"")+(r?"*":"")+(a?"++":"")+Wt(t),type:o}}function Wt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Jt(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(e){return[e.name,e]},n.reduce(function(e,t,n){return(n=r(t,n))&&(e[n[0]]=n[1]),e},{}))};var r}var Qt=function(e){try{return e.only([[]]),Qt=function(){return[[]]},[[]]}catch(e){return Qt=function(){return Xe},Xe}};function Gt(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return w(e,t)}:function(t){return w(t,e)};var t}function $t(e){return[].slice.call(e)}var Yt=0;function Xt(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function Zt(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,a=e.lowerOpen;return e=e.upperOpen,void 0===n?void 0===r?null:t.upperBound(r,!!e):void 0===r?t.lowerBound(n,!!a):t.bound(n,r,!!a,!!e)}function a(e){var t,n=e.name;return{name:n,schema:e,mutate:function(e){var t=e.trans,a=e.type,s=e.keys,i=e.values,o=e.range;return new Promise(function(e,l){e=Oe(e);var c=t.objectStore(n),u=null==c.keyPath,d="put"===a||"add"===a;if(!d&&"delete"!==a&&"deleteRange"!==a)throw new Error("Invalid operation type: "+a);var h,f=(s||i||{length:1}).length;if(s&&i&&s.length!==i.length)throw new Error("Given keys array must have same length as given values array.");if(0===f)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function m(e){++y,zt(e)}var p=[],g=[],y=0;if("deleteRange"===a){if(4===o.type)return e({numFailures:y,failures:g,results:[],lastResult:void 0});3===o.type?p.push(h=c.clear()):p.push(h=c.delete(r(o)))}else{var v=(u=d?u?[i,s]:[i,null]:[s,null])[0],b=u[1];if(d)for(var x=0;x<f;++x)p.push(h=b&&void 0!==b[x]?c[a](v[x],b[x]):c[a](v[x])),h.onerror=m;else for(x=0;x<f;++x)p.push(h=c[a](v[x])),h.onerror=m}function w(t){t=t.target.result,p.forEach(function(e,t){return null!=e.error&&(g[t]=e.error)}),e({numFailures:y,failures:g,results:"delete"===a?s:p.map(function(e){return e.result}),lastResult:t})}h.onerror=function(e){m(e),w(e)},h.onsuccess=w})},getMany:function(e){var t=e.trans,r=e.keys;return new Promise(function(e,a){e=Oe(e);for(var s,i=t.objectStore(n),o=r.length,l=new Array(o),c=0,u=0,d=function(t){t=t.target,l[t._pos]=t.result,++u===c&&e(l)},h=Ft(a),f=0;f<o;++f)null!=r[f]&&((s=i.get(r[f]))._pos=f,s.onsuccess=d,s.onerror=h,++c);0===c&&e(l)})},get:function(e){var t=e.trans,r=e.key;return new Promise(function(e,a){e=Oe(e);var s=t.objectStore(n).get(r);s.onsuccess=function(t){return e(t.target.result)},s.onerror=Ft(a)})},query:(t=u,function(e){return new Promise(function(a,s){a=Oe(a);var i,o,l,c=e.trans,u=e.values,d=e.limit,h=e.query,f=d===1/0?void 0:d,m=h.index;if(h=h.range,c=c.objectStore(n),m=m.isPrimaryKey?c:c.index(m.name),h=r(h),0===d)return a({result:[]});t?((f=u?m.getAll(h,f):m.getAllKeys(h,f)).onsuccess=function(e){return a({result:e.target.result})},f.onerror=Ft(s)):(i=0,o=!u&&"openKeyCursor"in m?m.openKeyCursor(h):m.openCursor(h),l=[],o.onsuccess=function(e){var t=o.result;return t?(l.push(u?t.value:t.primaryKey),++i===d?a({result:l}):void t.continue()):a({result:l})},o.onerror=Ft(s))})}),openCursor:function(e){var t=e.trans,a=e.values,s=e.query,i=e.reverse,o=e.unique;return new Promise(function(e,l){e=Oe(e);var c=s.index,u=s.range,d=t.objectStore(n),h=(d=c.isPrimaryKey?d:d.index(c.name),c=i?o?"prevunique":"prev":o?"nextunique":"next",!a&&"openKeyCursor"in d?d.openKeyCursor(r(u),c):d.openCursor(r(u),c));h.onerror=Ft(l),h.onsuccess=Oe(function(n){var r,a,s,i,o=h.result;o?(o.___id=++Yt,o.done=!1,r=o.continue.bind(o),a=(a=o.continuePrimaryKey)&&a.bind(o),s=o.advance.bind(o),i=function(){throw new Error("Cursor not stopped")},o.trans=t,o.stop=o.continue=o.continuePrimaryKey=o.advance=function(){throw new Error("Cursor not started")},o.fail=Oe(l),o.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},o.start=function(e){function t(){if(h.result)try{e()}catch(e){o.fail(e)}else o.done=!0,o.start=function(){throw new Error("Cursor behind last entry")},o.stop()}var n=new Promise(function(e,t){e=Oe(e),h.onerror=Ft(t),o.fail=t,o.stop=function(t){o.stop=o.continue=o.continuePrimaryKey=o.advance=i,e(t)}});return h.onsuccess=Oe(function(e){h.onsuccess=t,t()}),o.continue=r,o.continuePrimaryKey=a,o.advance=s,t(),n},e(o)):e(null)},l)})},count:function(e){var t=e.query,a=e.trans,s=t.index,i=t.range;return new Promise(function(e,t){var o=a.objectStore(n),l=s.isPrimaryKey?o:o.index(s.name);(l=(o=r(i))?l.count(o):l.count()).onsuccess=Oe(function(t){return e(t.target.result)}),l.onerror=Ft(t)})}}}var s,o,l,c=(o=n,l=$t((s=e).objectStoreNames),{schema:{name:s.name,tables:l.map(function(e){return o.objectStore(e)}).map(function(e){var t=e.keyPath,n=e.autoIncrement,r=i(t),a={};return n={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Gt(t)},indexes:$t(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,n=e.unique,r=e.multiEntry;return e=e.keyPath,r={name:t,compound:i(e),keyPath:e,unique:n,multiEntry:r,extractKey:Gt(e)},a[Xt(e)]=r}),getIndexByKeyPath:function(e){return a[Xt(e)]}},a[":id"]=n.primaryKey,null!=t&&(a[Xt(t)]=n.primaryKey),n})},hasGetAll:0<l.length&&"getAll"in o.objectStore(l[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),u=(n=c.schema,c.hasGetAll),d=(c=n.tables.map(a),{});return c.forEach(function(e){return d[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!d[e])throw new Error("Table '".concat(e,"' not found"));return d[e]},MIN_KEY:-1/0,MAX_KEY:Qt(t),schema:n}}function en(e,n,r,a){var s=r.IDBKeyRange;return r.indexedDB,{dbcore:(a=Zt(n,s,a),e.dbcore.reduce(function(e,n){return n=n.create,t(t({},e),n(e))},a))}}function tn(e,t){var n=t.db;t=en(e._middlewares,n,e._deps,t),e.core=t.dbcore,e.tables.forEach(function(t){var n=t.name;e.core.schema.tables.some(function(e){return e.name===n})&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))})}function nn(e,t,n,r){n.forEach(function(n){var a=r[n];t.forEach(function(t){var r=function e(t,n){return p(t,n)||(t=l(t))&&e(t,n)}(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?f(t,n,{get:function(){return this.table(n)},set:function(e){h(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,a))})})}function rn(e,t){t.forEach(function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]})}function an(e,t){return e._cfg.version-t._cfg.version}function sn(e,t,n,r){var a=e._dbSchema;n.objectStoreNames.contains("$meta")&&!a.$meta&&(a.$meta=Jt("$meta",mn("")[0],[]),e._storeNames.push("$meta"));var i=e._createTransaction("readwrite",e._storeNames,a);i.create(n),i._completion.catch(r);var o=i._reject.bind(i),l=ve.transless||ve;Be(function(){return ve.trans=i,ve.transless=l,0!==t?(tn(e,n),c=t,((r=i).storeNames.includes("$meta")?r.table("$meta").get("version").then(function(e){return null!=e?e:c}):ke.resolve(c)).then(function(t){return a=t,o=i,l=n,c=[],t=(r=e)._versions,u=r._dbSchema=hn(0,r.idbdb,l),0!==(t=t.filter(function(e){return e._cfg.version>=a})).length?(t.forEach(function(e){c.push(function(){var t=u,n=e._cfg.dbschema;fn(r,t,l),fn(r,n,l),u=r._dbSchema=n;var i=ln(t,n);i.add.forEach(function(e){cn(l,e[0],e[1].primKey,e[1].indexes)}),i.change.forEach(function(e){if(e.recreate)throw new W.Upgrade("Not yet support for changing primary key");var t=l.objectStore(e.name);e.add.forEach(function(e){return dn(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),dn(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var c=e._cfg.contentUpgrade;if(c&&e._cfg.version>a){tn(r,l),o._memoizedTables={};var d=_(n);i.del.forEach(function(e){d[e]=t[e]}),rn(r,[r.Transaction.prototype]),nn(r,[r.Transaction.prototype],s(d),d),o.schema=d;var h,f=M(c);return f&&qe(),i=ke.follow(function(){var e;(h=c(o))&&f&&(e=He.bind(null,null),h.then(e,e))}),h&&"function"==typeof h.then?ke.resolve(h):i.then(function(){return h})}}),c.push(function(t){var n,a,s=e._cfg.dbschema;n=s,a=t,[].slice.call(a.db.objectStoreNames).forEach(function(e){return null==n[e]&&a.db.deleteObjectStore(e)}),rn(r,[r.Transaction.prototype]),nn(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),o.schema=r._dbSchema}),c.push(function(t){r.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(r.idbdb.version/10)===e._cfg.version?(r.idbdb.deleteObjectStore("$meta"),delete r._dbSchema.$meta,r._storeNames=r._storeNames.filter(function(e){return"$meta"!==e})):t.objectStore("$meta").put(e._cfg.version,"version"))})}),function e(){return c.length?ke.resolve(c.shift()(o.idbtrans)).then(e):ke.resolve()}().then(function(){un(u,l)})):ke.resolve();var r,a,o,l,c,u}).catch(o)):(s(a).forEach(function(e){cn(n,e,a[e].primKey,a[e].indexes)}),tn(e,n),void ke.follow(function(){return e.on.populate.fire(i)}).catch(o));var r,c})}function on(e,t){un(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=hn(0,e.idbdb,t);fn(e,e._dbSchema,t);for(var r=0,a=ln(n,e._dbSchema).change;r<a.length;r++){var s=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=t.objectStore(e.name);e.add.forEach(function(t){ae&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),dn(n,t)})}(a[r]);if("object"==typeof s)return s.value}}function ln(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var a=e[n],s=t[n];if(a){var i={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||a.primKey.auto!==s.primKey.auto)i.recreate=!0,r.change.push(i);else{var o=a.idxByName,l=s.idxByName,c=void 0;for(c in o)l[c]||i.del.push(c);for(c in l){var u=o[c],d=l[c];u?u.src!==d.src&&i.change.push(d):i.add.push(d)}(0<i.del.length||0<i.add.length||0<i.change.length)&&r.change.push(i)}}else r.add.push([n,s])}return r}function cn(e,t,n,r){var a=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){return dn(a,e)}),a}function un(e,t){s(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(ae&&console.debug("Dexie: Creating missing table",n),cn(t,n,e[n].primKey,e[n].indexes))})}function dn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function hn(e,t,n){var r={};return y(t.objectStoreNames,0).forEach(function(e){for(var t=n.objectStore(e),a=Kt(Wt(o=t.keyPath),o||"",!0,!1,!!t.autoIncrement,o&&"string"!=typeof o,!0),s=[],i=0;i<t.indexNames.length;++i){var o=(l=t.index(t.indexNames[i])).keyPath,l=Kt(l.name,o,!!l.unique,!!l.multiEntry,!1,o&&"string"!=typeof o,!1);s.push(l)}r[e]=Jt(e,a,s)}),r}function fn(e,t,n){for(var r=n.db.objectStoreNames,s=0;s<r.length;++s){var i=r[s],o=n.objectStore(i);e._hasGetAll="getAll"in o;for(var l=0;l<o.indexNames.length;++l){var c=o.indexNames[l],u=o.index(c).keyPath,d="string"==typeof u?u:"["+y(u).join("+")+"]";!t[i]||(u=t[i].idxByName[d])&&(u.name=c,delete t[i].idxByName[d],t[i].idxByName[c]=u)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function mn(e){return e.split(",").map(function(e,t){var n=null===(r=(a=e.split(":"))[1])||void 0===r?void 0:r.trim(),r=(e=a[0].trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Kt(r,a||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),i(a),0===t,n)})}var pn=(gn.prototype._createTableSchema=Jt,gn.prototype._parseIndexSyntax=mn,gn.prototype._parseStoresSpec=function(e,t){var n=this;s(e).forEach(function(r){if(null!==e[r]){var a=n._parseIndexSyntax(e[r]),s=a.shift();if(!s)throw new W.Schema("Invalid schema for table "+r+": "+e[r]);if(s.unique=!0,s.multi)throw new W.Schema("Primary key cannot be multiEntry*");a.forEach(function(e){if(e.auto)throw new W.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new W.Schema("Index must have a name and cannot be an empty string")}),a=n._createTableSchema(r,s,a),t[r]=a}})},gn.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?o(this._cfg.storesSource,e):e,e=t._versions;var n={},r={};return e.forEach(function(e){o(n,e._cfg.storesSource),r=e._cfg.dbschema={},e._parseStoresSpec(n,r)}),t._dbSchema=r,rn(t,[t._allTables,t,t.Transaction.prototype]),nn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],s(r),r),t._storeNames=s(r),this},gn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=re(this._cfg.contentUpgrade||G,e),this},gn);function gn(){}function yn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new nr(nt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function vn(e){return e&&"function"==typeof e.databases}function bn(e){return Be(function(){return ve.letThrough=!0,e()})}function xn(e){return!("from"in e)}var wn=function(e,t){if(!this){var n=new wn;return e&&"d"in e&&o(n,e),n}o(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function kn(e,t,n){var r=ct(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(xn(e))return o(e,{from:t,to:n,d:1});var a=e.l;if(r=e.r,ct(n,e.from)<0)return a?kn(a,t,n):e.l={from:t,to:n,d:1,l:null,r:null},En(e);if(0<ct(t,e.to))return r?kn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},En(e);ct(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<ct(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,a&&!e.l&&_n(e,a),r&&n&&_n(e,r)}}function _n(e,t){xn(t)||function e(t,n){var r=n.from,a=n.to,s=n.l;n=n.r,kn(t,r,a),s&&e(t,s),n&&e(t,n)}(e,t)}function Nn(e,t){var n=Sn(t),r=n.next();if(r.done)return!1;for(var a=r.value,s=Sn(e),i=s.next(a.from),o=i.value;!r.done&&!i.done;){if(ct(o.from,a.to)<=0&&0<=ct(o.to,a.from))return!0;ct(a.from,o.from)<0?a=(r=n.next(o.from)).value:o=(i=s.next(a.from)).value}return!1}function Sn(e){var t=xn(e)?null:{s:0,n:e};return{next:function(e){for(var n=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&ct(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||ct(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function En(e){var n,r,a=((null===(n=e.r)||void 0===n?void 0:n.d)||0)-((null===(r=e.l)||void 0===r?void 0:r.d)||0),s=1<a?"r":a<-1?"l":"";s&&(n="r"==s?"l":"r",r=t({},e),a=e[s],e.from=a.from,e.to=a.to,e[s]=a[s],r[s]=a[n],(e[n]=r).d=jn(r)),e.d=jn(e)}function jn(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function Cn(e,t){return s(t).forEach(function(n){e[n]?_n(e[n],t[n]):e[n]=function e(t){var n,r,a={};for(n in t)u(t,n)&&(r=t[n],a[n]=!r||"object"!=typeof r||j.has(r.constructor)?r:e(r));return a}(t[n])}),e}function In(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Nn(t[n],e[n])})}d(wn.prototype,((F={add:function(e){return _n(this,e),this},addKey:function(e){return kn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return kn(t,e,e)}),this},hasKey:function(e){var t=Sn(this).next(e).value;return t&&ct(t.from,e)<=0&&0<=ct(t.to,e)}})[P]=function(){return Sn(this)},F));var Tn={},An={},Pn=!1;function Rn(e){Cn(An,e),Pn||(Pn=!0,setTimeout(function(){Pn=!1,On(An,!(An={}))},0))}function On(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var r=0,a=Object.values(Tn);r<a.length;r++)Dn(i=a[r],e,n,t);else for(var s in e){var i,o=/^idb\:\/\/(.*)\/(.*)\//.exec(s);o&&(s=o[1],o=o[2],(i=Tn["idb://".concat(s,"/").concat(o)])&&Dn(i,e,n,t))}n.forEach(function(e){return e()})}function Dn(e,t,n,r){for(var a=[],s=0,i=Object.entries(e.queries.query);s<i.length;s++){for(var o=i[s],l=o[0],c=[],u=0,d=o[1];u<d.length;u++){var h=d[u];In(t,h.obsSet)?h.subscribers.forEach(function(e){return n.add(e)}):r&&c.push(h)}r&&a.push([l,c])}if(r)for(var f=0,m=a;f<m.length;f++){var p=m[f];l=p[0],c=p[1],e.queries.query[l]=c}}function Ln(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Ye(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,a=Math.round(10*e.verno),i=!1;function o(){if(t.openCanceller!==r)throw new W.DatabaseClosed("db.open() was cancelled")}function l(){return new ke(function(r,c){if(o(),!n)throw new W.MissingAPI;var u=e.name,f=t.autoSchema||!a?n.open(u):n.open(u,a);if(!f)throw new W.MissingAPI;f.onerror=Ft(c),f.onblocked=Oe(e._fireOnBlocked),f.onupgradeneeded=Oe(function(r){var a;d=f.transaction,t.autoSchema&&!e._options.allowEmptyDB?(f.onerror=zt,d.abort(),f.result.close(),(a=n.deleteDatabase(u)).onsuccess=a.onerror=Oe(function(){c(new W.NoSuchDatabase("Database ".concat(u," doesnt exist")))})):(d.onerror=Ft(c),r=r.oldVersion>Math.pow(2,62)?0:r.oldVersion,h=r<1,e.idbdb=f.result,i&&on(e,d),sn(e,r/10,d,c))},c),f.onsuccess=Oe(function(){d=null;var n,o,c,m,p,g=e.idbdb=f.result,v=y(g.objectStoreNames);if(0<v.length)try{var b=g.transaction(1===(m=v).length?m[0]:m,"readonly");if(t.autoSchema)o=g,c=b,(n=e).verno=o.version/10,c=n._dbSchema=hn(0,o,c),n._storeNames=y(o.objectStoreNames,0),nn(n,[n._allTables],s(c),c);else if(fn(e,e._dbSchema,b),((p=ln(hn(0,(p=e).idbdb,b),p._dbSchema)).add.length||p.change.some(function(e){return e.add.length||e.change.length}))&&!i)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),g.close(),a=g.version+1,i=!0,r(l());tn(e,b)}catch(n){}tt.push(e),g.onversionchange=Oe(function(n){t.vcFired=!0,e.on("versionchange").fire(n)}),g.onclose=Oe(function(t){e.on("close").fire(t)}),h&&(p=e._deps,b=u,g=p.indexedDB,p=p.IDBKeyRange,vn(g)||b===nt||yn(g,p).put({name:b}).catch(G)),r()},c)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),l();break;case"VersionError":if(0<a)return a=0,l()}return ke.reject(e)})}var c,u=t.dbReadyResolve,d=null,h=!1;return ke.race([r,("undefined"==typeof navigator?ke.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}c=setInterval(t,100),t()}).finally(function(){return clearInterval(c)}):Promise.resolve()).then(l)]).then(function(){return o(),t.onReadyBeingFired=[],ke.resolve(bn(function(){return e.on.ready.fire(e.vip)})).then(function n(){if(0<t.onReadyBeingFired.length){var r=t.onReadyBeingFired.reduce(re,G);return t.onReadyBeingFired=[],ke.resolve(bn(function(){return r(e.vip)})).then(n)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(n){t.dbOpenError=n;try{d&&d.abort()}catch(n){}return r===t.openCanceller&&e._close(),Ye(n)}).finally(function(){t.openComplete=!0,u()}).then(function(){var t;return h&&(t={},e.tables.forEach(function(n){n.schema.indexes.forEach(function(r){r.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(r.name)]=new wn(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new wn(-1/0,[[[]]])}),qt(Ut).fire(t),On(t,!0)),e})}function Mn(e){function t(t){return e.next(t)}var n=a(t),r=a(function(t){return e.throw(t)});function a(e){return function(t){var a=e(t);return t=a.value,a.done?t:t&&"function"==typeof t.then?t.then(n,r):i(t)?Promise.all(t).then(n,r):n(t)}}return a(t)()}function Fn(e,t,n){for(var r=i(e)?e.slice():[e],a=0;a<n;++a)r.push(t);return r}var zn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(n){var r=e.table(n),a=r.schema,s={},i=[];function o(e,n,r){var a=Xt(e),l=s[a]=s[a]||[],c=null==e?0:"string"==typeof e?1:e.length,u=0<n;return u=t(t({},r),{name:u?"".concat(a,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:u,keyTail:n,keyLength:c,extractKey:Gt(e),unique:!u&&r.unique}),l.push(u),u.isPrimaryKey||i.push(u),1<c&&o(2===c?e[0]:e.slice(0,c-1),n+1,r),l.sort(function(e,t){return e.keyTail-t.keyTail}),u}n=o(a.primaryKey.keyPath,0,a.primaryKey),s[":id"]=[n];for(var l=0,c=a.indexes;l<c.length;l++){var u=c[l];o(u.keyPath,0,u)}function d(n){var r,a=n.query.index;return a.isVirtual?t(t({},n),{query:{index:a.lowLevelIndex,range:(r=n.query.range,a=a.keyTail,{type:1===r.type?2:r.type,lower:Fn(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,a),lowerOpen:!0,upper:Fn(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,a),upperOpen:!0})}}):n}return t(t({},r),{schema:t(t({},a),{primaryKey:n,indexes:i,getIndexByKeyPath:function(e){return(e=s[Xt(e)])&&e[0]}}),count:function(e){return r.count(d(e))},query:function(e){return r.query(d(e))},openCursor:function(t){var n=t.query.index,a=n.keyTail,s=n.isVirtual,i=n.keyLength;return s?r.openCursor(d(t)).then(function(e){return e&&o(e)}):r.openCursor(t);function o(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Fn(r,t.reverse?e.MAX_KEY:e.MIN_KEY,a)):t.unique?n.continue(n.key.slice(0,i).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,a)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Fn(t,e.MAX_KEY,a),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===i?e[0]:e.slice(0,i)}},value:{get:function(){return n.value}}})}}})}})}};function Un(e,t,n,r){return n=n||{},r=r||"",s(e).forEach(function(a){var s,i,o;u(t,a)?(s=e[a],i=t[a],"object"==typeof s&&"object"==typeof i&&s&&i?(o=A(s))!==A(i)?n[r+a]=t[a]:"Object"===o?Un(s,i,n,r+a+"."):s!==i&&(n[r+a]=t[a]):s!==i&&(n[r+a]=t[a])):n[r+a]=void 0}),s(t).forEach(function(a){u(e,a)||(n[r+a]=t[a])}),n}function Bn(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var qn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(n){var a=e.table(n),s=a.schema.primaryKey;return t(t({},a),{mutate:function(e){var i=ve.trans,o=i.table(n).hook,l=o.deleting,c=o.creating,d=o.updating;switch(e.type){case"add":if(c.fire===G)break;return i._promise("readwrite",function(){return h(e)},!0);case"put":if(c.fire===G&&d.fire===G)break;return i._promise("readwrite",function(){return h(e)},!0);case"delete":if(l.fire===G)break;return i._promise("readwrite",function(){return h(e)},!0);case"deleteRange":if(l.fire===G)break;return i._promise("readwrite",function(){return function e(n,r,i){return a.query({trans:n,values:!1,query:{index:s,range:r},limit:i}).then(function(a){var s=a.result;return h({type:"delete",keys:s,trans:n}).then(function(a){return 0<a.numFailures?Promise.reject(a.failures[0]):s.length<i?{failures:[],numFailures:0,lastResult:void 0}:e(n,t(t({},r),{lower:s[s.length-1],lowerOpen:!0}),i)})})}(e.trans,e.range,1e4)},!0)}return a.mutate(e);function h(e){var n,i,o,h=ve.trans,f=e.keys||Bn(s,e);if(!f)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:f}):t({},e)).type&&(e.values=r([],e.values,!0)),e.keys&&(e.keys=r([],e.keys,!0)),n=a,o=f,("add"===(i=e).type?Promise.resolve([]):n.getMany({trans:i.trans,keys:o,cache:"immutable"})).then(function(t){var n=f.map(function(n,r){var a,i,o,f=t[r],m={onerror:null,onsuccess:null};return"delete"===e.type?l.fire.call(m,n,f,h):"add"===e.type||void 0===f?(a=c.fire.call(m,n,e.values[r],h),null==n&&null!=a&&(e.keys[r]=n=a,s.outbound||k(e.values[r],s.keyPath,n))):(a=Un(f,e.values[r]),(i=d.fire.call(m,a,n,f,h))&&(o=e.values[r],Object.keys(i).forEach(function(e){u(o,e)?o[e]=i[e]:k(o,e,i[e])}))),m});return a.mutate(e).then(function(r){for(var a=r.failures,s=r.results,i=r.numFailures,o=(r=r.lastResult,0);o<f.length;++o){var l=(s||f)[o],c=n[o];null==l?c.onerror&&c.onerror(a[o]):c.onsuccess&&c.onsuccess("put"===e.type&&t[o]?e.values[o]:l)}return{failures:a,results:s,numFailures:i,lastResult:r}}).catch(function(e){return n.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}}})}})}};function Hn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],a=0,s=0;a<t.keys.length&&s<e.length;++a)0===ct(t.keys[a],e[s])&&(r.push(n?I(t.values[a]):t.values[a]),++s);return r.length===e.length?r:null}catch(e){return null}}var Vn={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var r=e.table(n);return t(t({},r),{getMany:function(e){if(!e.cache)return r.getMany(e);var t=Hn(e.keys,e.trans._cache,"clone"===e.cache);return t?ke.resolve(t):r.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?I(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),r.mutate(e)}})}}}};function Kn(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Wn(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Jn={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,r=new wn(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,n,r){if(ve.subscr&&"readonly"!==n)throw new W.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ve.querier));return e.transaction(t,n,r)},table:function(a){var o=e.table(a),l=o.schema,c=l.primaryKey,u=l.indexes,d=c.extractKey,h=c.outbound,f=c.autoIncrement&&u.filter(function(e){return e.compound&&e.keyPath.includes(c.keyPath)}),m=t(t({},o),{mutate:function(t){function s(e){return e="idb://".concat(n,"/").concat(a,"/").concat(e),p[e]||(p[e]=new wn)}var u,d,h,m=t.trans,p=t.mutatedParts||(t.mutatedParts={}),g=s(""),y=s(":dels"),v=t.type,b="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[Bn(c,t).filter(function(e){return e}),t.values]:[],x=b[0],w=b[1];return b=t.trans._cache,i(x)?(g.addKeys(x),(b="delete"===v||x.length===w.length?Hn(x,b):null)||y.addKeys(x),(b||w)&&(u=s,d=b,h=w,l.indexes.forEach(function(e){var t=u(e.name||"");function n(t){return null!=t?e.extractKey(t):null}function r(n){return e.multiEntry&&i(n)?n.forEach(function(e){return t.addKey(e)}):t.addKey(n)}(d||h).forEach(function(e,t){var a=d&&n(d[t]);0!==ct(a,t=h&&n(h[t]))&&(null!=a&&r(a),null!=t&&r(t))})}))):x?(w={from:null!==(w=x.lower)&&void 0!==w?w:e.MIN_KEY,to:null!==(w=x.upper)&&void 0!==w?w:e.MAX_KEY},y.add(w),g.add(w)):(g.add(r),y.add(r),l.indexes.forEach(function(e){return s(e.name).add(r)})),o.mutate(t).then(function(e){return!x||"add"!==t.type&&"put"!==t.type||(g.addKeys(e.results),f&&f.forEach(function(n){for(var r=t.values.map(function(e){return n.extractKey(e)}),a=n.keyPath.findIndex(function(e){return e===c.keyPath}),i=0,o=e.results.length;i<o;++i)r[i][a]=e.results[i];s(n.name).addKeys(r)})),m.mutatedParts=Cn(m.mutatedParts||{},p),e})}}),p=(u=function(t){t=(n=t.query).index;var n=n.range;return[t,new wn(null!==(t=n.lower)&&void 0!==t?t:e.MIN_KEY,null!==(n=n.upper)&&void 0!==n?n:e.MAX_KEY)]},{get:function(e){return[c,new wn(e.key)]},getMany:function(e){return[c,(new wn).addKeys(e.keys)]},count:u,query:u,openCursor:u});return s(p).forEach(function(e){m[e]=function(s){var i=!!(m=ve.subscr),l=Kn(ve,o)&&Wn(e,s)?s.obsSet={}:m;if(i){var c=function(e){return e="idb://".concat(n,"/").concat(a,"/").concat(e),l[e]||(l[e]=new wn)},u=c(""),f=c(":dels"),m=(i=(m=p[e](s))[0],m[1]);if(("query"===e&&i.isPrimaryKey&&!s.values?f:c(i.name||"")).add(m),!i.isPrimaryKey){if("count"!==e){var g="query"===e&&h&&s.values&&o.query(t(t({},s),{values:!1}));return o[e].apply(this,arguments).then(function(t){if("query"===e){if(h&&s.values)return g.then(function(e){return e=e.result,u.addKeys(e),t});var n=s.values?t.result.map(d):t.result;(s.values?u:f).addKeys(n)}else if("openCursor"===e){var r=t,a=s.values;return r&&Object.create(r,{key:{get:function(){return f.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return f.addKey(e),e}},value:{get:function(){return a&&u.addKey(r.primaryKey),r.value}}})}return t})}f.add(r)}}return o[e].apply(this,arguments)}}),m}})}};function Qn(e,n,r){if(0===r.numFailures)return n;if("deleteRange"===n.type)return null;var a=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return r.numFailures===a?null:(n=t({},n),i(n.keys)&&(n.keys=n.keys.filter(function(e,t){return!(t in r.failures)})),"values"in n&&i(n.values)&&(n.values=n.values.filter(function(e,t){return!(t in r.failures)})),n)}function Gn(e,t){return n=e,(void 0===(r=t).lower||(r.lowerOpen?0<ct(n,r.lower):0<=ct(n,r.lower)))&&(void 0===t.upper||(t.upperOpen?ct(e,t.upper)<0:ct(e,t.upper)<=0));var n,r}function $n(e,t,n,r,a,s){if(!n||0===n.length)return e;var o=t.query.index,l=o.multiEntry,c=t.query.range,u=r.schema.primaryKey.extractKey,d=o.extractKey,h=(o.lowLevelIndex||o).extractKey;return n=n.reduce(function(e,n){var r=e,a=[];if("add"===n.type||"put"===n.type)for(var s=new wn,o=n.values.length-1;0<=o;--o){var h,f=n.values[o],m=u(f);s.hasKey(m)||(h=d(f),(l&&i(h)?h.some(function(e){return Gn(e,c)}):Gn(h,c))&&(s.addKey(m),a.push(f)))}switch(n.type){case"add":var p=(new wn).addKeys(t.values?e.map(function(e){return u(e)}):e);r=e.concat(t.values?a.filter(function(e){return e=u(e),!p.hasKey(e)&&(p.addKey(e),!0)}):a.map(function(e){return u(e)}).filter(function(e){return!p.hasKey(e)&&(p.addKey(e),!0)}));break;case"put":var g=(new wn).addKeys(n.values.map(function(e){return u(e)}));r=e.filter(function(e){return!g.hasKey(t.values?u(e):e)}).concat(t.values?a:a.map(function(e){return u(e)}));break;case"delete":var y=(new wn).addKeys(n.keys);r=e.filter(function(e){return!y.hasKey(t.values?u(e):e)});break;case"deleteRange":var v=n.range;r=e.filter(function(e){return!Gn(u(e),v)})}return r},e),n===e?e:(n.sort(function(e,t){return ct(h(e),h(t))||ct(u(e),u(t))}),t.limit&&t.limit<1/0&&(n.length>t.limit?n.length=t.limit:e.length===t.limit&&n.length<t.limit&&(a.dirty=!0)),s?Object.freeze(n):n)}function Yn(e,t){return 0===ct(e.lower,t.lower)&&0===ct(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Xn(e,t){return function(e,t,n,r){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=ct(e,t))){if(n&&r)return 0;if(n)return 1;if(r)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,n,r){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=ct(e,t))){if(n&&r)return 0;if(n)return-1;if(r)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Zn(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var r,a;e.subscribers.delete(n),0===e.subscribers.size&&(r=e,a=t,setTimeout(function(){0===r.subscribers.size&&O(a,r)},3e3))})}var er={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name;return t(t({},e),{transaction:function(t,r,a){var s,i,o=e.transaction(t,r,a);return"readwrite"===r&&(i=(s=new AbortController).signal,a=function(a){return function(){if(s.abort(),"readwrite"===r){for(var i=new Set,l=0,c=t;l<c.length;l++){var u=c[l],d=Tn["idb://".concat(n,"/").concat(u)];if(d){var h=e.table(u),f=d.optimisticOps.filter(function(e){return e.trans===o});if(o._explicit&&a&&o.mutatedParts)for(var m=0,p=Object.values(d.queries.query);m<p.length;m++)for(var g=0,y=(x=p[m]).slice();g<y.length;g++)In((w=y[g]).obsSet,o.mutatedParts)&&(O(x,w),w.subscribers.forEach(function(e){return i.add(e)}));else if(0<f.length){d.optimisticOps=d.optimisticOps.filter(function(e){return e.trans!==o});for(var v=0,b=Object.values(d.queries.query);v<b.length;v++)for(var x,w,k,_=0,N=(x=b[v]).slice();_<N.length;_++)null!=(w=N[_]).res&&o.mutatedParts&&(a&&!w.dirty?(k=Object.isFrozen(w.res),k=$n(w.res,w.req,f,h,w,k),w.dirty?(O(x,w),w.subscribers.forEach(function(e){return i.add(e)})):k!==w.res&&(w.res=k,w.promise=ke.resolve({result:k}))):(w.dirty&&O(x,w),w.subscribers.forEach(function(e){return i.add(e)})))}}}i.forEach(function(e){return e()})}}},o.addEventListener("abort",a(!1),{signal:i}),o.addEventListener("error",a(!1),{signal:i}),o.addEventListener("complete",a(!0),{signal:i})),o},table:function(r){var a=e.table(r),s=a.schema.primaryKey;return t(t({},a),{mutate:function(e){var i=ve.trans;if(s.outbound||"disabled"===i.db._options.cache||i.explicit||"readwrite"!==i.idbtrans.mode)return a.mutate(e);var o=Tn["idb://".concat(n,"/").concat(r)];return o?(i=a.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||Bn(s,e).some(function(e){return null==e}))?(o.optimisticOps.push(e),e.mutatedParts&&Rn(e.mutatedParts),i.then(function(t){0<t.numFailures&&(O(o.optimisticOps,e),(t=Qn(0,e,t))&&o.optimisticOps.push(t),e.mutatedParts&&Rn(e.mutatedParts))}),i.catch(function(){O(o.optimisticOps,e),e.mutatedParts&&Rn(e.mutatedParts)})):i.then(function(n){var r=Qn(0,t(t({},e),{values:e.values.map(function(e,r){var a;return n.failures[r]||k(e=null!==(a=s.keyPath)&&void 0!==a&&a.includes(".")?I(e):t({},e),s.keyPath,n.results[r]),e})}),n);o.optimisticOps.push(r),queueMicrotask(function(){return e.mutatedParts&&Rn(e.mutatedParts)})}),i):a.mutate(e)},query:function(e){if(!Kn(ve,a)||!Wn("query",e))return a.query(e);var t="immutable"===(null===(o=ve.trans)||void 0===o?void 0:o.db._options.cache),s=(c=ve).requery,i=c.signal,o=function(e,t,n,r){var a=Tn["idb://".concat(e,"/").concat(t)];if(!a)return[];if(!(t=a.queries[n]))return[null,!1,a,null];var s=t[(r.query?r.query.index.name:null)||""];if(!s)return[null,!1,a,null];switch(n){case"query":var i=s.find(function(e){return e.req.limit===r.limit&&e.req.values===r.values&&Yn(e.req.query.range,r.query.range)});return i?[i,!0,a,s]:[s.find(function(e){return("limit"in e.req?e.req.limit:1/0)>=r.limit&&(!r.values||e.req.values)&&Xn(e.req.query.range,r.query.range)}),!1,a,s];case"count":return i=s.find(function(e){return Yn(e.req.query.range,r.query.range)}),[i,!!i,a,s]}}(n,r,"query",e),l=o[0],c=o[1],u=o[2],d=o[3];return l&&c?l.obsSet=e.obsSet:(c=a.query(e).then(function(e){var n=e.result;if(l&&(l.res=n),t){for(var r=0,a=n.length;r<a;++r)Object.freeze(n[r]);Object.freeze(n)}else e.result=I(n);return e}).catch(function(e){return d&&l&&O(d,l),Promise.reject(e)}),l={obsSet:e.obsSet,promise:c,subscribers:new Set,type:"query",req:e,dirty:!1},d?d.push(l):(d=[l],(u=u||(Tn["idb://".concat(n,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=d)),Zn(l,d,s,i),l.promise.then(function(n){return{result:$n(n.result,e,null==u?void 0:u.optimisticOps,a,l,t)}})}})}})}};function tr(e,t){return new Proxy(e,{get:function(e,n,r){return"db"===n?t:Reflect.get(e,n,r)}})}var nr=(rr.prototype.version=function(e){if(isNaN(e)||e<.1)throw new W.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new W.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(t){return t._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(an),n.stores({}),this._state.autoSchema=!1,n)},rr.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||ve.letThrough||this._vip)?e():new ke(function(e,n){if(t._state.openComplete)return n(new W.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void n(new W.DatabaseClosed);t.open().catch(G)}t._state.dbReadyPromise.then(e,n)}).then(e)},rr.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,a=e.name;return a&&this.unuse({stack:t,name:a}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:n,level:null==r?10:r,name:a}),e.sort(function(e,t){return e.level-t.level}),this},rr.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return r?e.create!==r:!!n&&e.name!==n})),this},rr.prototype.open=function(){var e=this;return Qe(ye,function(){return Ln(e)})},rr.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=tt.indexOf(this);if(0<=t&&tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new ke(function(t){e.dbReadyResolve=t}),e.openCanceller=new ke(function(t,n){e.cancelOpen=n}))},rr.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new W.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new W.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},rr.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=0<arguments.length&&"object"!=typeof arguments[0],r=this._state;return new ke(function(a,s){function i(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=Oe(function(){var e,n,r;e=t._deps,n=t.name,r=e.indexedDB,e=e.IDBKeyRange,vn(r)||n===nt||yn(r,e).delete(n).catch(G),a()}),n.onerror=Ft(s),n.onblocked=t._fireOnBlocked}if(n)throw new W.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(i):i()})},rr.prototype.backendDB=function(){return this.idbdb},rr.prototype.isOpen=function(){return null!==this.idbdb},rr.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},rr.prototype.hasFailed=function(){return null!==this._state.dbOpenError},rr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(rr.prototype,"tables",{get:function(){var e=this;return s(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),rr.prototype.transaction=function(){var e=function(e,t,n){var r=arguments.length;if(r<2)throw new W.InvalidArgument("Too few arguments");for(var a=new Array(r-1);--r;)a[r-1]=arguments[r];return n=a.pop(),[e,S(a),n]}.apply(this,arguments);return this._transaction.apply(this,e)},rr.prototype._transaction=function(e,t,n){var r=this,a=ve.trans;a&&a.db===this&&-1===e.indexOf("!")||(a=null);var s,i,o=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(i=t.map(function(e){if("string"!=typeof(e=e instanceof r.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==e||e===rt)s=rt;else{if("rw"!=e&&e!=at)throw new W.InvalidArgument("Invalid transaction mode: "+e);s=at}if(a){if(a.mode===rt&&s===at){if(!o)throw new W.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&i.forEach(function(e){if(a&&-1===a.storeNames.indexOf(e)){if(!o)throw new W.SubTransaction("Table "+e+" not included in parent transaction.");a=null}}),o&&a&&!a.active&&(a=null)}}catch(n){return a?a._promise(null,function(e,t){t(n)}):Ye(n)}var l=function e(t,n,r,a,s){return ke.resolve().then(function(){var i=ve.transless||ve,o=t._createTransaction(n,r,t._dbSchema,a);if(o.explicit=!0,i={trans:o,transless:i},a)o.idbtrans=a.idbtrans;else try{o.create(),o.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(i){return i.name===V.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,n,r,null,s)})):Ye(i)}var l,c=M(s);return c&&qe(),i=ke.follow(function(){var e;(l=s.call(o,o))&&(c?(e=He.bind(null,null),l.then(e,e)):"function"==typeof l.next&&"function"==typeof l.throw&&(l=Mn(l)))},i),(l&&"function"==typeof l.then?ke.resolve(l).then(function(e){return o.active?e:Ye(new W.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):i.then(function(){return l})).then(function(e){return a&&o._resolve(),o._completion.then(function(){return e})}).catch(function(e){return o._reject(e),Ye(e)})})}.bind(null,this,s,i,a,n);return a?a._promise(s,l,"lock"):ve.trans?Qe(ve.transless,function(){return r._whenReady(l)}):this._whenReady(l)},rr.prototype.table=function(e){if(!u(this._allTables,e))throw new W.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},rr);function rr(e,n){var r=this;this._middlewares={},this.verno=0;var a=rr.dependencies;this._options=n=t({addons:rr.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},a=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s,i,o,l,c,u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:G,dbReadyPromise:null,cancelOpen:G,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};u.dbReadyPromise=new ke(function(e){u.dbReadyResolve=e}),u.openCanceller=new ke(function(e,t){u.cancelOpen=t}),this._state=u,this.name=e,this.on=pt(this,"populate","blocked","versionchange","close",{ready:[re,G]}),this.once=function(e,t){var n=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];r.on(e).unsubscribe(n),t.apply(r,a)};return r.on(e,n)},this.on.ready.subscribe=v(this.on.ready.subscribe,function(e){return function(t,n){rr.vip(function(){var a,s=r._state;s.openComplete?(s.dbOpenError||ke.resolve().then(t),n&&e(t)):s.onReadyBeingFired?(s.onReadyBeingFired.push(t),n&&e(t)):(e(t),a=r,n||e(function e(){a.on.ready.unsubscribe(t),a.on.ready.unsubscribe(e)}))})}}),this.Collection=(s=this,gt(Et.prototype,function(e,t){this.db=s;var n=it,r=null;if(t)try{n=t()}catch(e){r=e}var a=e._ctx;e=(t=a.table).hook.reading.fire,this._ctx={table:t,index:a.index,isPrimKey:!a.index||t.schema.primKey.keyPath&&a.index===t.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:a.or,valueMapper:e!==$?e:null}})),this.Table=(i=this,gt(ft.prototype,function(e,t,n){this.db=i,this._tx=n,this.name=e,this.schema=t,this.hook=i._allTables[e]?i._allTables[e].hook:pt(null,{creating:[Z,G],reading:[Y,$],updating:[te,G],deleting:[ee,G]})})),this.Transaction=(o=this,gt(Ht.prototype,function(e,t,n,r,a){var s=this;"readonly"!==e&&t.forEach(function(e){(e=null===(e=n[e])||void 0===e?void 0:e.yProps)&&(t=t.concat(e.map(function(e){return e.updatesTable})))}),this.db=o,this.mode=e,this.storeNames=t,this.schema=n,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=pt(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ke(function(e,t){s._resolve=e,s._reject=t}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(e){var t=s.active;return s.active=!1,s.on.error.fire(e),s.parent?s.parent._reject(e):t&&s.idbtrans&&s.idbtrans.abort(),Ye(e)})})),this.Version=(l=this,gt(pn.prototype,function(e){this.db=l,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(c=this,gt(Lt.prototype,function(e,t,n){if(this.db=c,this._ctx={table:e,index:":id"===t?null:t,or:n},this._cmp=this._ascending=ct,this._descending=function(e,t){return ct(t,e)},this._max=function(e,t){return 0<ct(e,t)?e:t},this._min=function(e,t){return ct(e,t)<0?e:t},this._IDBKeyRange=c._deps.IDBKeyRange,!this._IDBKeyRange)throw new W.MissingAPI})),this.on("versionchange",function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=Qt(n.IDBKeyRange),this._createTransaction=function(e,t,n,a){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,a)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),tt.filter(function(e){return e.name===r.name&&e!==r&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(Vn),this.use(er),this.use(Jn),this.use(zn),this.use(qn);var d=new Proxy(this,{get:function(e,t,n){if("_vip"===t)return!0;if("table"===t)return function(e){return tr(r.table(e),d)};var a=Reflect.get(e,t,n);return a instanceof ft?tr(a,d):"tables"===t?a.map(function(e){return tr(e,d)}):"_createTransaction"===t?function(){return tr(a.apply(this,arguments),d)}:a}});this.vip=d,a.forEach(function(e){return e(r)})}F="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var ar,sr=(ir.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},ir.prototype[F]=function(){return this},ir);function ir(e){this._subscribe=e}try{ar={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch(E){ar={indexedDB:null,IDBKeyRange:null}}function or(e){var t,n=!1,r=new sr(function(r){var a,s=M(e),i=!1,o={},l={},c={get closed(){return i},unsubscribe:function(){i||(i=!0,a&&a.abort(),d&&qt.storagemutated.unsubscribe(f))}};r.start&&r.start(c);var d=!1,h=function(){return $e(m)},f=function(e){Cn(o,e),In(l,o)&&h()},m=function(){var c,m,p;!i&&ar.indexedDB&&(o={},c={},a&&a.abort(),a=new AbortController,p=function(t){var n=Te();try{s&&qe();var r=Be(e,t);return r=s?r.finally(He):r}finally{n&&Ae()}}(m={subscr:c,signal:a.signal,requery:h,querier:e,trans:null}),Promise.resolve(p).then(function(e){n=!0,t=e,i||m.signal.aborted||(o={},function(e){for(var t in e)if(u(e,t))return;return 1}(l=c)||d||(qt(Ut,f),d=!0),$e(function(){return!i&&r.next&&r.next(e)}))},function(e){n=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||i||$e(function(){i||r.error&&r.error(e)})}))};return setTimeout(h,0),c});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var lr=nr;function cr(e){var t=dr;try{dr=!0,qt.storagemutated.fire(e),On(e,!0)}finally{dr=t}}d(lr,t(t({},Q),{delete:function(e){return new lr(e,{addons:[]}).delete()},exists:function(e){return new lr(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return n=(t=lr.dependencies).indexedDB,t=t.IDBKeyRange,(vn(n)?Promise.resolve(n.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==nt})}):yn(n,t).toCollection().primaryKeys()).then(e)}catch(e){return Ye(new W.MissingAPI)}var t,n},defineClass:function(){return function(e){o(this,e)}},ignoreTransaction:function(e){return ve.trans?Qe(ve.transless,e):e()},vip:bn,async:function(e){return function(){try{var t=Mn(e.apply(this,arguments));return t&&"function"==typeof t.then?t:ke.resolve(t)}catch(t){return Ye(t)}}},spawn:function(e,t,n){try{var r=Mn(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:ke.resolve(r)}catch(e){return Ye(e)}},currentTransaction:{get:function(){return ve.trans||null}},waitFor:function(e,t){return t=ke.resolve("function"==typeof e?lr.ignoreTransaction(e):e).timeout(t||6e4),ve.trans?ve.trans.waitFor(t):t},Promise:ke,debug:{get:function(){return ae},set:function(e){se(e)}},derive:m,extend:o,props:d,override:v,Events:pt,on:qt,liveQuery:or,extendObservabilitySet:Cn,getByKeyPath:w,setByKeyPath:k,delByKeyPath:function(e,t){"string"==typeof t?k(e,t,void 0):"length"in t&&[].map.call(t,function(t){k(e,t,void 0)})},shallowClone:_,deepClone:I,getObjectDiff:Un,cmp:ct,asap:x,minKey:-1/0,addons:[],connections:tt,errnames:V,dependencies:ar,cache:Tn,semVer:"4.2.0",version:"4.2.0".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),lr.maxKey=Qt(lr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(qt(Ut,function(e){dr||(e=new CustomEvent(Bt,{detail:e}),dr=!0,dispatchEvent(e),dr=!1)}),addEventListener(Bt,function(e){e=e.detail,dr||cr(e)}));var ur,dr=!1,hr=function(){};return"undefined"!=typeof BroadcastChannel&&((hr=function(){(ur=new BroadcastChannel(Bt)).onmessage=function(e){return e.data&&cr(e.data)}})(),"function"==typeof ur.unref&&ur.unref(),qt(Ut,function(e){dr||ur.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(e){if(!nr.disableBfCache&&e.persisted){ae&&console.debug("Dexie: handling persisted pagehide"),null!=ur&&ur.close();for(var t=0,n=tt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!nr.disableBfCache&&e.persisted&&(ae&&console.debug("Dexie: handling persisted pageshow"),hr(),cr({all:new wn(-1/0,[[]])}))})),ke.rejectionMapper=function(e,t){return!e||e instanceof U||e instanceof TypeError||e instanceof SyntaxError||!e.name||!J[e.name]?e:(t=new J[e.name](t||e.message,e),"stack"in e&&f(t,"stack",{get:function(){return this.inner.stack}}),t)},se(ae),t(nr,Object.freeze({__proto__:null,Dexie:nr,liveQuery:or,Entity:lt,cmp:ct,PropModification:Nt,replacePrefix:function(e,t){return new Nt({replacePrefix:[e,t]})},add:function(e){return new Nt({add:e})},remove:function(e){return new Nt({remove:e})},default:nr,RangeSet:wn,mergeRanges:_n,rangesOverlap:Nn}),{default:nr}),nr}()},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),(()=>{"use strict";var e=n(43),t=n(391);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const c=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const h=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],f=(0,e.forwardRef)((t,n)=>{let{color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:c="",children:f,iconNode:m}=t,p=l(t,h);return(0,e.createElement)("svg",o(o(o({ref:n},d),{},{width:a,height:a,stroke:r,strokeWidth:i?24*Number(s)/Number(a):s,className:u("lucide",c)},!f&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(p)&&{"aria-hidden":"true"}),p),[...m.map(t=>{let[n,r]=t;return(0,e.createElement)(n,r)}),...Array.isArray(f)?f:[f]])}),m=["className"],p=(t,n)=>{const r=(0,e.forwardRef)((r,a)=>{let{className:s}=r,i=l(r,m);return(0,e.createElement)(f,o({ref:a,iconNode:n,className:u("lucide-".concat((d=c(t),d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(t),s)},i));var d});return r.displayName=c(t),r},g=p("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),y=p("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),v=p("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),b=p("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),x=p("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),w=p("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),k=p("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),_=p("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),N=p("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),S=p("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),E=p("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),j=p("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),C=p("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),I=p("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);let T="https://script.google.com/macros/s/AKfycbweOri4v6JDVEsMnU2KbxiQ2_MicbaltR49-cqYwwT2J8YE1dbLhd_Klc5AuUThJjpNZA/exec";T&&T.includes("REACT_APP_GAS_WEB_APP_URL=")&&(T=T.split("REACT_APP_GAS_WEB_APP_URL=")[1]),T&&!T.startsWith("http")&&(T="https://"+T.replace(/^\/+/,""));const A=new class{constructor(e){this.baseURL=e}async makeRequest(e,t){if(!this.baseURL)return{success:!1,message:"API endpoint is not configured."};try{const r=await fetch(this.baseURL,{method:"POST",mode:"cors",credentials:"omit",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(o({action:e},t))});if(!r.ok)throw new Error("Server responded with status: ".concat(r.status));const a=await r.text();try{const e=JSON.parse(a);if(!1===e.success)throw new Error(e.message||"An unknown backend error occurred.");return e}catch(n){throw new Error("Invalid server response. The backend may have crashed.")}}catch(r){return{success:!1,message:"Network error: ".concat(r.message)}}}fetchLeads(){return this.makeRequest("getLeads",{})}addLead(e){return this.makeRequest("addLead",{lead:e})}updateLead(e){return this.makeRequest("updateLead",{lead:e})}deleteLead(e){return this.makeRequest("deleteLead",{leadId:e})}fetchJobCounts(){return this.makeRequest("getJobCounts",{})}addJobCount(e){return this.makeRequest("addJobCount",{jobCount:e})}updateJobCount(e){return this.makeRequest("updateJobCount",{jobCount:e})}deleteJobCount(e){return this.makeRequest("deleteJobCount",{jobCountId:e})}testConnection(){return this.makeRequest("testConnection",{})}geocodeAddress(e){return this.makeRequest("geocodeAddress",{address:e})}calculateLomacoVents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.makeRequest("calculateLomacoVents",{sqft:e,options:t})}batchCalculateVents(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.makeRequest("batchCalculateVents",{jobCountIds:e})}}(T);function P(){const[t,n]=(0,e.useState)([]),r=(0,e.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const r={id:Date.now().toString(),message:e,type:t};n(e=>[r,...e.slice(0,4)]),setTimeout(()=>{n(e=>e.filter(e=>e.id!==r.id))},5e3)},[]);return{notifications:t,addNotification:r}}const R=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):55296===(64512&a)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t},O={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<e.length;a+=3){const t=e[a],s=a+1<e.length,i=s?e[a+1]:0,o=a+2<e.length,l=o?e[a+2]:0,c=t>>2,u=(3&t)<<4|i>>4;let d=(15&i)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(R(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[n++];t[r++]=String.fromCharCode((31&a)<<6|63&s)}else if(a>239&&a<365){const s=((7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],i=e[n++];t[r++]=String.fromCharCode((15&a)<<12|(63&s)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<e.length;){const t=n[e.charAt(a++)],s=a<e.length?n[e.charAt(a)]:0;++a;const i=a<e.length?n[e.charAt(a)]:64;++a;const o=a<e.length?n[e.charAt(a)]:64;if(++a,null==t||null==s||null==i||null==o)throw new D;const l=t<<2|s>>4;if(r.push(l),64!==i){const e=s<<4&240|i>>2;if(r.push(e),64!==o){const e=i<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class D extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const L=function(e){return function(e){const t=R(e);return O.encodeByteArray(t,!0)}(e).replace(/\./g,"")},M=function(e){try{return O.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const F=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,z=()=>{try{return F()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTH_CODE:"IAMBRANDON",REACT_APP_FIREBASE_API_KEY:"AIzaSyCa63Fy9PF-NV8C_z_5Qp7VWse5nRxRRJ8",REACT_APP_FIREBASE_APP_ID:"1:874590395925:web:41fff249ed9a7b349af81c",REACT_APP_FIREBASE_AUTH_DOMAIN:"crmbackend-470221.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-4BG7SZMK6K",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"874590395925",REACT_APP_FIREBASE_PROJECT_ID:"crmbackend-470221",REACT_APP_FIREBASE_STORAGE_BUCKET:"crmbackend-470221.firebasestorage.app",REACT_APP_GAS_WEB_APP_URL:"https://script.google.com/macros/s/AKfycbweOri4v6JDVEsMnU2KbxiQ2_MicbaltR49-cqYwwT2J8YE1dbLhd_Klc5AuUThJjpNZA/exec",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyA-IhqTEAOQMTU9DlEeUwt1_oM5yq3-sb4",REACT_APP_SHEET_NAME:"Bhotchleads",REACT_APP_SPREADSHEET_ID:"1E9VX7XI7GNGJa8Hq9__XAWv95WNgfJto1gUEXMbGqi0",REACT_APP_TWILIO_ACCOUNT_SID:"AC20e24f43ac063d43511d06c688b5ec06",REACT_APP_TWILIO_AUTH_TOKEN:"65cc837132a39a100d4b03a8a234f2ed",REACT_APP_TWILIO_PHONE_NUMBER:"+13852357204"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&M(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},U=e=>{var t,n;return null===(n=null===(t=z())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},B=()=>{var e;return null===(e=z())||void 0===e?void 0:e.config},q=e=>{var t;return null===(t=z())||void 0===t?void 0:t["_".concat(e)]};class H{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function V(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}class K extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,K.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,W.prototype.create)}}class W{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],a=r?function(e,t){return e.replace(J,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(a," (").concat(n,").");return new K(n,s,t)}}const J=/\{\$([^}]+)}/g;function Q(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const a of n){if(!r.includes(a))return!1;const n=e[a],s=t[a];if(G(n)&&G(s)){if(!Q(n,s))return!1}else if(n!==s)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function G(e){return null!==e&&"object"===typeof e}function $(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Y(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function X(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Z{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ee),void 0===r.error&&(r.error=ee),void 0===r.complete&&(r.complete=ee);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),a}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ee(){}function te(e){return e&&e._delegate?e._delegate:e}class ne{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const re="[DEFAULT]";class ae{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new H;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:re})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(a)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),a=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;a.add(e),this.onInitCallbacks.set(r,a);const s=this.instances.get(r);return s&&e(s,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const a of n)try{a(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(a=t,a===re?void 0:a),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var a;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;return this.component?this.component.multipleInstances?e:re:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ae(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ie=[];var oe;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(oe||(oe={}));const le={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},ce=oe.INFO,ue={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},de=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ue[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class he{constructor(e){this.name=e,this._logLevel=ce,this._logHandler=de,this._userLogHandler=null,ie.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?le[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...t),this._logHandler(this,oe.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...t),this._logHandler(this,oe.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,oe.INFO,...t),this._logHandler(this,oe.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,oe.WARN,...t),this._logHandler(this,oe.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...t),this._logHandler(this,oe.ERROR,...t)}}let fe,me;const pe=new WeakMap,ge=new WeakMap,ye=new WeakMap,ve=new WeakMap,be=new WeakMap;let xe={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ge.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ye.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _e(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function we(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ne(this),n),_e(pe.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _e(e.apply(Ne(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];const s=e.call(Ne(this),t,...r);return ye.set(s,t.sort?t.sort():[t]),_e(s)}}function ke(e){return"function"===typeof e?we(e):(e instanceof IDBTransaction&&function(e){if(ge.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",s),e.removeEventListener("abort",s)},a=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",s),e.addEventListener("abort",s)});ge.set(e,t)}(e),t=e,(fe||(fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,xe):e);var t}function _e(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",a),e.removeEventListener("error",s)},a=()=>{t(_e(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&pe.set(t,e)}).catch(()=>{}),be.set(t,e),t}(e);if(ve.has(e))return ve.get(e);const t=ke(e);return t!==e&&(ve.set(e,t),be.set(t,e)),t}const Ne=e=>be.get(e);const Se=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],je=new Map;function Ce(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(je.get(t))return je.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=Ee.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!a&&!Se.includes(n))return;const s=async function(e){const t=this.transaction(e,a?"readwrite":"readonly");let s=t.store;for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),a&&t.done]))[0]};return je.set(t,s),s}xe=(e=>o(o({},e),{},{get:(t,n,r)=>Ce(t,n)||e.get(t,n,r),has:(t,n)=>!!Ce(t,n)||e.has(t,n)}))(xe);class Ie{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Te="@firebase/app",Ae="0.10.13",Pe=new he("@firebase/app"),Re="@firebase/app-compat",Oe="@firebase/analytics-compat",De="@firebase/analytics",Le="@firebase/app-check-compat",Me="@firebase/app-check",Fe="@firebase/auth",ze="@firebase/auth-compat",Ue="@firebase/database",Be="@firebase/data-connect",qe="@firebase/database-compat",He="@firebase/functions",Ve="@firebase/functions-compat",Ke="@firebase/installations",We="@firebase/installations-compat",Je="@firebase/messaging",Qe="@firebase/messaging-compat",Ge="@firebase/performance",$e="@firebase/performance-compat",Ye="@firebase/remote-config",Xe="@firebase/remote-config-compat",Ze="@firebase/storage",et="@firebase/storage-compat",tt="@firebase/firestore",nt="@firebase/vertexai-preview",rt="@firebase/firestore-compat",at="firebase",st="[DEFAULT]",it={[Te]:"fire-core",[Re]:"fire-core-compat",[De]:"fire-analytics",[Oe]:"fire-analytics-compat",[Me]:"fire-app-check",[Le]:"fire-app-check-compat",[Fe]:"fire-auth",[ze]:"fire-auth-compat",[Ue]:"fire-rtdb",[Be]:"fire-data-connect",[qe]:"fire-rtdb-compat",[He]:"fire-fn",[Ve]:"fire-fn-compat",[Ke]:"fire-iid",[We]:"fire-iid-compat",[Je]:"fire-fcm",[Qe]:"fire-fcm-compat",[Ge]:"fire-perf",[$e]:"fire-perf-compat",[Ye]:"fire-rc",[Xe]:"fire-rc-compat",[Ze]:"fire-gcs",[et]:"fire-gcs-compat",[tt]:"fire-fst",[rt]:"fire-fst-compat",[nt]:"fire-vertex","fire-js":"fire-js",[at]:"fire-js-all"},ot=new Map,lt=new Map,ct=new Map;function ut(e,t){try{e.container.addComponent(t)}catch(n){Pe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function dt(e){const t=e.name;if(ct.has(t))return Pe.debug("There were multiple attempts to register component ".concat(t,".")),!1;ct.set(t,e);for(const n of ot.values())ut(n,e);for(const n of lt.values())ut(n,e);return!0}function ht(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ft(e){return void 0!==e.settings}const mt=new W("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class pt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ne("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mt.create("app-deleted",{appName:this._name})}}const gt="10.14.1";function yt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:st,automaticDataCollectionEnabled:!1},t),a=r.name;if("string"!==typeof a||!a)throw mt.create("bad-app-name",{appName:String(a)});if(n||(n=B()),!n)throw mt.create("no-options");const s=ot.get(a);if(s){if(Q(n,s.options)&&Q(r,s.config))return s;throw mt.create("duplicate-app",{appName:a})}const i=new se(a);for(const l of ct.values())i.addComponent(l);const o=new pt(n,r,i);return ot.set(a,o),o}function vt(e,t,n){var r;let a=null!==(r=it[e])&&void 0!==r?r:e;n&&(a+="-".concat(n));const s=a.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const e=['Unable to register library "'.concat(a,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(a,'" contains illegal characters (whitespace or "/")')),s&&i&&e.push("and"),i&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Pe.warn(e.join(" "))}dt(new ne("".concat(a,"-version"),()=>({library:a,version:t}),"VERSION"))}const bt="firebase-heartbeat-store";let xt=null;function wt(){return xt||(xt=function(e,t){let{blocked:n,upgrade:r,blocking:a,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=indexedDB.open(e,t),o=_e(i);return r&&i.addEventListener("upgradeneeded",e=>{r(_e(i.result),e.oldVersion,e.newVersion,_e(i.transaction),e)}),n&&i.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),a&&e.addEventListener("versionchange",e=>a(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(bt)}catch(n){console.warn(n)}}}).catch(e=>{throw mt.create("idb-open",{originalErrorMessage:e.message})})),xt}async function kt(e,t){try{const n=(await wt()).transaction(bt,"readwrite"),r=n.objectStore(bt);await r.put(t,_t(e)),await n.done}catch(n){if(n instanceof K)Pe.warn(n.message);else{const e=mt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Pe.warn(e.message)}}}function _t(e){return"".concat(e.name,"!").concat(e.options.appId)}class Nt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Et(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=St();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(n){Pe.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=St(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const a of e){const e=n.find(e=>e.agent===a.agent);if(e){if(e.dates.push(a.date),jt(n)>t){e.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),jt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),a=L(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Pe.warn(t),""}}}function St(){return(new Date).toISOString().substring(0,10)}class Et{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var e;t((null===(e=a.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await wt()).transaction(bt),n=await t.objectStore(bt).get(_t(e));return await t.done,n}catch(t){if(t instanceof K)Pe.warn(t.message);else{const e=mt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Pe.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return kt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return kt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function jt(e){return L(JSON.stringify({version:2,heartbeats:e})).length}var Ct;Ct="",dt(new ne("platform-logger",e=>new Ie(e),"PRIVATE")),dt(new ne("heartbeat",e=>new Nt(e),"PRIVATE")),vt(Te,Ae,Ct),vt(Te,Ae,"esm2017"),vt("fire-js","");function It(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Tt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const At=Tt,Pt=new W("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Rt=new he("@firebase/auth");function Ot(e){if(Rt.logLevel<=oe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Rt.error("Auth (".concat(gt,"): ").concat(e),...n)}}function Dt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw zt(e,...n)}function Lt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return zt(e,...n)}function Mt(e,t,n){const r=Object.assign(Object.assign({},At()),{[t]:n});return new W("auth","Firebase",r).create(t,{appName:e.name})}function Ft(e){return Mt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Pt.create(e,...n)}function Ut(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];throw zt(t,...r)}}function Bt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ot(t),new Error(t)}function qt(e,t){e||Bt(t)}function Ht(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Vt(){return"http:"===Kt()||"https:"===Kt()}function Kt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Wt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Vt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Jt{constructor(e,t){this.shortDelay=e,this.longDelay=t,qt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(V())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Wt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Qt(e,t){qt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Gt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Bt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Bt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Bt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Yt=new Jt(3e4,6e4);function Xt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Zt(e,t,n,r){return en(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let a={},s={};r&&("GET"===t?s=r:a={body:JSON.stringify(r)});const i=$(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},a);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Gt.fetch()(nn(e,e.config.apiHost,n,i),l)})}async function en(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},$t),t);try{const t=new an(e),a=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw sn(e,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const t=a.ok?s.errorMessage:s.error.message,[n,i]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw sn(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw sn(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw sn(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw Mt(e,o,i);Dt(e,o)}}catch(a){if(a instanceof K)throw a;Dt(e,"network-request-failed",{message:String(a)})}}async function tn(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Zt(e,t,n,r,a);return"mfaPendingCredential"in s&&Dt(e,"multi-factor-auth-required",{_serverResponse:s}),s}function nn(e,t,n,r){const a="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Qt(e.config,a):"".concat(e.config.apiScheme,"://").concat(a)}function rn(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class an{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Lt(this.auth,"network-request-failed")),Yt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sn(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=Lt(e,t,r);return a.customData._tokenResponse=n,a}function on(e){return void 0!==e&&void 0!==e.enterprise}class ln{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return rn(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function cn(e,t){return Zt(e,"GET","/v2/recaptchaConfig",Xt(e,t))}async function un(e,t){return Zt(e,"POST","/v1/accounts:lookup",t)}function dn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function hn(e){return 1e3*Number(e)}function fn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ot("JWT malformed, contained fewer than 3 sections"),null;try{const e=M(n);return e?JSON.parse(e):(Ot("Failed to decode base64 JWT payload"),null)}catch(a){return Ot("Caught error parsing JWT payload as JSON",null===a||void 0===a?void 0:a.toString()),null}}function mn(e){const t=fn(e);return Ut(t,"internal-error"),Ut("undefined"!==typeof t.exp,"internal-error"),Ut("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function pn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof K&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class gn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class yn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=dn(this.lastLoginAt),this.creationTime=dn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function vn(e){var t;const n=e.auth,r=await e.getIdToken(),a=await pn(e,un(n,{idToken:r}));Ut(null===a||void 0===a?void 0:a.users.length,n,"internal-error");const s=a.users[0];e._notifyReloadListener(s);const i=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?bn(s.providerUserInfo):[],o=(l=e.providerData,c=i,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new yn(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function bn(e){return e.map(e=>{var{providerId:t}=e,n=It(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class xn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ut(e.idToken,"internal-error"),Ut("undefined"!==typeof e.idToken,"internal-error"),Ut("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):mn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ut(0!==e.length,"internal-error");const t=mn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ut(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:a}=await async function(e,t){const n=await en(e,{},async()=>{const n=$({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:a}=e.config,s=nn(e,r,"/v1/token","key=".concat(a)),i=await e._getAdditionalHeaders();return i["Content-Type"]="application/x-www-form-urlencoded",Gt.fetch()(s,{method:"POST",headers:i,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:a}=t,s=new xn;return n&&(Ut("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Ut("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),a&&(Ut("number"===typeof a,"internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xn,this.toJSON())}_performRefresh(){return Bt("not implemented")}}function wn(e,t){Ut("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class kn{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,a=It(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new yn(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await pn(this,this.stsTokenManager.getToken(this.auth,e));return Ut(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=te(e),r=await n.getIdToken(t),a=fn(r);Ut(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const s="object"===typeof a.firebase?a.firebase:void 0,i=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:a,token:r,authTime:dn(hn(a.auth_time)),issuedAtTime:dn(hn(a.iat)),expirationTime:dn(hn(a.exp)),signInProvider:i||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=te(e);await vn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ut(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new kn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await vn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ft(this.auth.app))return Promise.reject(Ft(this.auth));const e=await this.getIdToken();return await pn(this,async function(e,t){return Zt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,a,s,i,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(a=t.phoneNumber)&&void 0!==a?a:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(i=t.tenantId)&&void 0!==i?i:void 0,p=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:k}=t;Ut(v&&k,e,"internal-error");const _=xn.fromJSON(this.name,k);Ut("string"===typeof v,e,"internal-error"),wn(u,e.name),wn(d,e.name),Ut("boolean"===typeof b,e,"internal-error"),Ut("boolean"===typeof x,e,"internal-error"),wn(h,e.name),wn(f,e.name),wn(m,e.name),wn(p,e.name),wn(g,e.name),wn(y,e.name);const N=new kn({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:m,stsTokenManager:_,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(N.providerData=w.map(e=>Object.assign({},e))),p&&(N._redirectEventId=p),N}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new xn;r.updateFromServerResponse(t);const a=new kn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await vn(a),a}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ut(void 0!==r.localId,"internal-error");const a=void 0!==r.providerUserInfo?bn(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===a||void 0===a?void 0:a.length),i=new xn;i.updateFromIdToken(n);const o=new kn({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new yn(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===a||void 0===a?void 0:a.length)};return Object.assign(o,l),o}}const _n=new Map;function Nn(e){qt(e instanceof Function,"Expected a class definition");let t=_n.get(e);return t?(qt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,_n.set(e,t),t)}class Sn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Sn.type="NONE";const En=Sn;function jn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Cn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:a}=this.auth;this.fullUserKey=jn(this.userKey,r.apiKey,a),this.fullPersistenceKey=jn("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?kn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Cn(Nn(En),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let a=r[0]||Nn(En);const s=jn(n,e.config.apiKey,e.name);let i=null;for(const c of t)try{const t=await c._get(s);if(t){const n=kn._fromJSON(e,t);c!==a&&(i=n),a=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return a._shouldAllowMigration&&o.length?(a=o[0],i&&await a._set(s,i.toJSON()),await Promise.all(t.map(async e=>{if(e!==a)try{await e._remove(s)}catch(l){}})),new Cn(a,e,n)):new Cn(a,e,n)}}function In(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Rn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Tn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Dn(t))return"Blackberry";if(Ln(t))return"Webos";if(An(t))return"Safari";if((t.includes("chrome/")||Pn(t))&&!t.includes("edge/"))return"Chrome";if(On(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/firefox\//i.test(e)}function An(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:V()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/crios\//i.test(e)}function Rn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/iemobile/i.test(e)}function On(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/android/i.test(e)}function Dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/blackberry/i.test(e)}function Ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/webos/i.test(e)}function Mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Fn(){return function(){const e=V();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function zn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return Mn(e)||On(e)||Ln(e)||Dn(e)||/windows phone/i.test(e)||Rn(e)}function Un(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=In(V());break;case"Worker":t="".concat(In(V()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(gt,"/").concat(r)}class Bn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(a){r(a)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class qn{constructor(e){var t,n,r,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(a=e.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,a,s,i;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(a=o.containsUppercaseLetter)||void 0===a||a),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNonAlphanumericCharacter)||void 0===i||i),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class Hn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kn(this),this.idTokenSubscription=new Kn(this),this.beforeStateQueue=new Bn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Nn(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Cn.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(a){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await un(this,{idToken:e}),n=await kn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ft(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,i=await this.tryRedirectSignIn(e);n&&n!==s||!(null===i||void 0===i?void 0:i.user)||(r=i.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vn(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ft(this.app))return Promise.reject(Ft(this));const t=e?te(e):null;return t&&Ut(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ut(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ft(this.app)?Promise.reject(Ft(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ft(this.app)?Promise.reject(Ft(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Zt(e,"GET","/v2/passwordPolicy",Xt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new qn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new W("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Zt(e,"POST","/v2/accounts:revokeToken",Xt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Nn(e)||this._popupRedirectResolver;Ut(t,this,"argument-error"),this.redirectPersistenceManager=await Cn.create(this,[Nn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const a="function"===typeof t?t:t.next.bind(t);let s=!1;const i=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ut(i,this,"internal-error"),i.then(()=>{s||a(this.currentUser)}),"function"===typeof t){const a=e.addObserver(t,n,r);return()=>{s=!0,a()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Un(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Rt.logLevel<=oe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Rt.warn("Auth (".concat(gt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Vn(e){return te(e)}class Kn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Z(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Wn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Jn(e){return Wn.loadJS(e)}function Qn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Gn{constructor(e){this.type="recaptcha-enterprise",this.auth=Vn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const a=window.grecaptcha;on(a)?a.enterprise.ready(()=>{a.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{cn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new ln(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(a=>{if(!t&&on(window.grecaptcha))n(a,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Wn.recaptchaEnterpriseScript;0!==t.length&&(t+=a),Jn(t).then(()=>{n(a,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function $n(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=new Gn(e);let s;try{s=await a.verify(n)}catch(o){s=await a.verify(n,!0)}const i=Object.assign({},t);return r?Object.assign(i,{captchaResp:s}):Object.assign(i,{captchaResponse:s}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function Yn(e,t,n,r){var a;if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await $n(e,t,n,"getOobCode"===n);return r(e,a)}return r(e,t).catch(async a=>{if(a.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const a=await $n(e,t,n,"getOobCode"===n);return r(e,a)}return Promise.reject(a)})}function Xn(e,t,n){const r=Vn(e);Ut(r._canInitEmulator,r,"emulator-config-failed"),Ut(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const a=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Zn(t),{host:i,port:o}=function(e){const t=Zn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const e=a[1];return{host:e,port:er(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:er(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(s,"//").concat(i).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Zn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function er(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class tr{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bt("not implemented")}_getIdTokenResponse(e){return Bt("not implemented")}_linkToIdToken(e,t){return Bt("not implemented")}_getReauthenticationResolver(e){return Bt("not implemented")}}async function nr(e,t){return Zt(e,"POST","/v1/accounts:signUp",t)}async function rr(e,t){return tn(e,"POST","/v1/accounts:signInWithPassword",Xt(e,t))}class ar extends tr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ar(e,t,"password")}static _fromEmailAndCode(e,t){return new ar(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Yn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",rr);case"emailLink":return async function(e,t){return tn(e,"POST","/v1/accounts:signInWithEmailLink",Xt(e,t))}(e,{email:this._email,oobCode:this._password});default:Dt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Yn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nr);case"emailLink":return async function(e,t){return tn(e,"POST","/v1/accounts:signInWithEmailLink",Xt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Dt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function sr(e,t){return tn(e,"POST","/v1/accounts:signInWithIdp",Xt(e,t))}class ir extends tr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ir(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,a=It(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new ir(n,r);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){return sr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,sr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$(t)}return e}}const or={USER_NOT_FOUND:"user-not-found"};class lr extends tr{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new lr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new lr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return tn(e,"POST","/v1/accounts:signInWithPhoneNumber",Xt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await tn(e,"POST","/v1/accounts:signInWithPhoneNumber",Xt(e,t));if(n.temporaryProof)throw sn(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return tn(e,"POST","/v1/accounts:signInWithPhoneNumber",Xt(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),or)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:a}=e;return n||t||r||a?new lr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:a}):null}}class cr{constructor(e){var t,n,r,a,s,i;const o=Y(X(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Ut(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(a=o.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(i=o.tenantId)&&void 0!==i?i:null}static parseLink(e){const t=function(e){const t=Y(X(e)).link,n=t?Y(X(t)).deep_link_id:null,r=Y(X(e)).deep_link_id;return(r?Y(X(r)).link:null)||r||n||t||e}(e);try{return new cr(t)}catch(n){return null}}}class ur{constructor(){this.providerId=ur.PROVIDER_ID}static credential(e,t){return ar._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=cr.parseLink(t);return Ut(n,"argument-error"),ar._fromEmailAndCode(e,n.code,n.tenantId)}}ur.PROVIDER_ID="password",ur.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ur.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class dr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class hr extends dr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fr extends hr{constructor(){super("facebook.com")}static credential(e){return ir._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return fr.credential(t.oauthAccessToken)}catch(n){return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com",fr.PROVIDER_ID="facebook.com";class mr extends hr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ir._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return mr.credential(n,r)}catch(a){return null}}}mr.GOOGLE_SIGN_IN_METHOD="google.com",mr.PROVIDER_ID="google.com";class pr extends hr{constructor(){super("github.com")}static credential(e){return ir._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return pr.credential(t.oauthAccessToken)}catch(n){return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com",pr.PROVIDER_ID="github.com";class gr extends hr{constructor(){super("twitter.com")}static credential(e,t){return ir._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return gr.credential(n,r)}catch(a){return null}}}gr.TWITTER_SIGN_IN_METHOD="twitter.com",gr.PROVIDER_ID="twitter.com";class yr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=await kn._fromIdTokenResponse(e,n,r),s=vr(n);return new yr({user:a,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=vr(n);return new yr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function vr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class br extends K{constructor(e,t,n,r){var a;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,br.prototype),this.customData={appName:e.name,tenantId:null!==(a=e.tenantId)&&void 0!==a?a:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new br(e,t,n,r)}}function xr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw br._fromErrorAndOperation(e,n,t,r);throw n})}async function wr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await pn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return yr._forOperation(e,"link",r)}async function kr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(ft(r.app))return Promise.reject(Ft(r));const a="reauthenticate";try{const s=await pn(e,xr(r,a,t,e),n);Ut(s.idToken,r,"internal-error");const i=fn(s.idToken);Ut(i,r,"internal-error");const{sub:o}=i;return Ut(e.uid===o,r,"user-mismatch"),yr._forOperation(e,a,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Dt(r,"user-mismatch"),s}}async function _r(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ft(e.app))return Promise.reject(Ft(e));const r="signIn",a=await xr(e,r,t),s=await yr._fromIdTokenResponse(e,r,a);return n||await e._updateCurrentUser(s.user),s}async function Nr(e,t){return _r(Vn(e),t)}async function Sr(e){const t=Vn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const Er="__sak";class jr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Er,"1"),this.storage.removeItem(Er),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Cr extends jr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},a=this.storage.getItem(n);Fn()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Cr.type="LOCAL";const Ir=Cr;class Tr extends jr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Tr.type="SESSION";const Ar=Tr;class Pr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Pr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:a}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const i=Array.from(s).map(async e=>e(t.origin,a)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(i);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Rr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Pr.receivers=[];class Or{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,s;return new Promise((i,o)=>{const l=Rr("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),a=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),i(t.data.response);break;default:clearTimeout(c),clearTimeout(a),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Dr(){return window}function Lr(){return"undefined"!==typeof Dr().WorkerGlobalScope&&"function"===typeof Dr().importScripts}const Mr="firebaseLocalStorageDb",Fr="firebaseLocalStorage",zr="fbase_key";class Ur{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Br(e,t){return e.transaction([Fr],t?"readwrite":"readonly").objectStore(Fr)}function qr(){const e=indexedDB.open(Mr,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Fr,{keyPath:zr})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Fr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Mr);return new Ur(e).toPromise()}(),t(await qr()))})})}async function Hr(e,t,n){const r=Br(e,!0).put({[zr]:t,value:n});return new Ur(r).toPromise()}function Vr(e,t){const n=Br(e,!0).delete(t);return new Ur(n).toPromise()}class Kr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await qr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pr._getInstance(Lr()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Or(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qr();return await Hr(e,Er,"1"),await Vr(e,Er),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Hr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Br(e,!1).get(t),r=await new Ur(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Vr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Br(e,!1).getAll();return new Ur(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:a}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Kr.type="LOCAL";const Wr=Kr;Qn("rcb"),new Jt(3e4,6e4);const Jr="recaptcha";async function Qr(e,t,n){var r;const a=await n.verify();try{let s;if(Ut("string"===typeof a,e,"argument-error"),Ut(n.type===Jr,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Ut("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Zt(e,"POST","/v2/accounts/mfaEnrollment:start",Xt(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:a}});return n.phoneSessionInfo.sessionInfo}{Ut("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Ut(n,e,"missing-multi-factor-info");const i=await function(e,t){return Zt(e,"POST","/v2/accounts/mfaSignIn:start",Xt(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:a}});return i.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Zt(e,"POST","/v1/accounts:sendVerificationCode",Xt(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:a});return t}}finally{n._reset()}}class Gr{constructor(e){this.providerId=Gr.PROVIDER_ID,this.auth=Vn(e)}verifyPhoneNumber(e,t){return Qr(this.auth,e,te(t))}static credential(e,t){return lr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Gr.credentialFromTaggedObject(t)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?lr._fromTokenResponse(n,r):null}}function $r(e,t){return t?Nn(t):(Ut(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Gr.PROVIDER_ID="phone",Gr.PHONE_SIGN_IN_METHOD="phone";class Yr extends tr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Xr(e){return _r(e.auth,new Yr(e),e.bypassAuthState)}function Zr(e){const{auth:t,user:n}=e;return Ut(n,t,"internal-error"),kr(n,new Yr(e),e.bypassAuthState)}async function ea(e){const{auth:t,user:n}=e;return Ut(n,t,"internal-error"),wr(n,new Yr(e),e.bypassAuthState)}class ta{constructor(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:a,error:s,type:i}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(i)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Xr;case"linkViaPopup":case"linkViaRedirect":return ea;case"reauthViaPopup":case"reauthViaRedirect":return Zr;default:Dt(this.auth,"internal-error")}}resolve(e){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const na=new Jt(2e3,1e4);class ra extends ta{constructor(e,t,n,r,a){super(e,t,r,a),this.provider=n,this.authWindow=null,this.pollId=null,ra.currentPopupAction&&ra.currentPopupAction.cancel(),ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ut(e,this.auth,"internal-error"),e}async onExecution(){qt(1===this.filter.length,"Popup operations only handle one event");const e=Rr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Lt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Lt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lt(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,na.get())};e()}}ra.currentPopupAction=null;const aa=new Map;class sa extends ta{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=aa.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=la(t),r=oa(e);if(!await r._isAvailable())return!1;const a="true"===await r._get(n);return await r._remove(n),a}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}aa.set(this.auth._key(),e)}return this.bypassAuthState||aa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ia(e,t){aa.set(e._key(),t)}function oa(e){return Nn(e._redirectPersistence)}function la(e){return jn("pendingRedirect",e.config.apiKey,e.name)}async function ca(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ft(e.app))return Promise.reject(Ft(e));const r=Vn(e),a=$r(r,t),s=new sa(r,a,n),i=await s.execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}class ua{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ha(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ha(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Lt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(da(e))}saveEventToCache(e){this.cachedEventUids.add(da(e)),this.lastProcessedEventTime=Date.now()}}function da(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ha(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const fa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ma=/^https?/;async function pa(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Zt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ga(r))return}catch(n){}Dt(e,"unauthorized-domain")}function ga(e){const t=Ht(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return""===a.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&a.hostname===r}if(!ma.test(n))return!1;if(fa.test(e))return r===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const ya=new Jt(3e4,6e4);function va(){const e=Dr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ba(e){return new Promise((t,n)=>{var r,a,s;function i(){va(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{va(),n(Lt(e,"network-request-failed"))},timeout:ya.get()})}if(null===(a=null===(r=Dr().gapi)||void 0===r?void 0:r.iframes)||void 0===a?void 0:a.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Dr().gapi)||void 0===s?void 0:s.load)){const t=Qn("iframefcb");return Dr()[t]=()=>{gapi.load?i():n(Lt(e,"network-request-failed"))},Jn("".concat(Wn.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}i()}}).catch(e=>{throw xa=null,e})}let xa=null;const wa=new Jt(5e3,15e3),ka={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_a=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Na(e){const t=e.config;Ut(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Qt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:gt},a=_a.get(e.config.apiHost);a&&(r.eid=a);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat($(r).slice(1))}async function Sa(e){const t=await function(e){return xa=xa||ba(e),xa}(e),n=Dr().gapi;return Ut(n,e,"internal-error"),t.open({where:document.body,url:Na(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ka,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const a=Lt(e,"network-request-failed"),s=Dr().setTimeout(()=>{r(a)},wa.get());function i(){Dr().clearTimeout(s),n(t)}t.ping(i).then(i,()=>{r(a)})}))}const Ea={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ja{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Ca(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Ea),{width:r.toString(),height:a.toString(),top:s,left:i}),c=V().toLowerCase();n&&(o=Pn(c)?"_blank":n),Tn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Mn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:V())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new ja(null);const d=window.open(t||"",o,u);Ut(d,e,"popup-blocked");try{d.focus()}catch(h){}return new ja(d)}const Ia="__/auth/handler",Ta="emulator/auth/handler",Aa=encodeURIComponent("fac");async function Pa(e,t,n,r,a,s){Ut(e.config.authDomain,e,"auth-domain-config-required"),Ut(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:gt,eventId:a};if(t instanceof dr){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))i[e]=t}if(t instanceof hr){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(i.scopes=e.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Aa,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ia);return Qt(t,Ta)}(e),"?").concat($(o).slice(1)).concat(c)}const Ra="webStorageSupport";const Oa=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ar,this._completeRedirectFn=ca,this._overrideRedirectResult=ia}async _openPopup(e,t,n,r){var a;qt(null===(a=this.eventManagers[e._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()");return Ca(e,await Pa(e,t,n,Ht(),r),Rr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Dr().location.href=e}(await Pa(e,t,n,Ht(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(qt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Sa(e),n=new ua(e);return t.register("authEvent",t=>{Ut(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ra,{type:Ra},n=>{var r;const a=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ra];void 0!==a&&t(!!a),Dt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=pa(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zn()||An()||Mn()}};var Da="@firebase/auth",La="1.7.9";class Ma{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Fa=q("authIdTokenMaxAge")||300;let za=null;var Ua;Wn={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Lt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ua="Browser",dt(new ne("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;Ut(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:o,clientPlatform:Ua,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Un(Ua)},c=new Hn(r,a,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),dt(new ne("auth-internal",e=>(e=>new Ma(e))(Vn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),vt(Da,La,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ua)),vt(Da,La,"esm2017");vt("firebase","10.14.1","app");const Ba={apiKey:"AIzaSyCa63Fy9PF-NV8C_z_5Qp7VWse5nRxRRJ8",authDomain:"crmbackend-470221.firebaseapp.com",projectId:"crmbackend-470221",storageBucket:"crmbackend-470221.firebasestorage.app",messagingSenderId:"874590395925",appId:"1:874590395925:web:41fff249ed9a7b349af81c"};if(!Ba.apiKey)throw new Error("Firebase config is missing: `REACT_APP_FIREBASE_API_KEY` is not set.");const qa=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;const t=ot.get(e);if(!t&&e===st&&B())return yt();if(!t)throw mt.create("no-app",{appName:e});return t}();const t=ht(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=ht(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Q(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Dt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Oa,persistence:[Wr,Ir,Ar]}),r=q("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(a=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Fa)return;const r=null===t||void 0===t?void 0:t.token;za!==r&&(za=r,await fetch(a,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){te(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){te(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var a;const s=U("auth");return s&&Xn(n,"http://".concat(s)),n}(yt(Ba));var Ha=n(579);const Va=function(t){let{onLogin:n}=t;const[r,a]=(0,e.useState)({email:"",password:""}),[s,i]=(0,e.useState)(""),[l,c]=(0,e.useState)(!1);return(0,Ha.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,Ha.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl w-96",children:[(0,Ha.jsxs)("div",{className:"text-center mb-6",children:[(0,Ha.jsx)("div",{className:"bg-blue-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:(0,Ha.jsx)(v,{className:"h-10 w-10 text-blue-600"})}),(0,Ha.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Bhotch CRM"}),(0,Ha.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Sign in to manage your leads"})]}),s&&(0,Ha.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-600 rounded-lg text-sm",children:s}),(0,Ha.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0),i("");try{await function(e,t,n){return ft(e.app)?Promise.reject(Ft(e)):Nr(te(e),ur.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Sr(e),t})}(qa,r.email,r.password),sessionStorage.setItem("isAuthenticated","true"),n()}catch(t){i("Login failed. Please check credentials.")}finally{c(!1)}},className:"space-y-4",children:[(0,Ha.jsx)("input",{type:"email",placeholder:"Email",value:r.email,onChange:e=>a(t=>o(o({},t),{},{email:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,Ha.jsx)("input",{type:"password",placeholder:"Password",value:r.password,onChange:e=>a(t=>o(o({},t),{},{password:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,Ha.jsx)("button",{type:"submit",disabled:l,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center",children:l?(0,Ha.jsx)(g,{className:"animate-spin h-5 w-5"}):"Sign In"})]})]})})},Ka=e.memo(t=>{let{title:n,value:r,color:a,icon:s}=t;const i=(0,e.useMemo)(()=>({blue:"bg-blue-100 text-blue-800",red:"bg-red-100 text-red-800",green:"bg-green-100 text-green-800",purple:"bg-purple-100 text-purple-800"}),[]);return(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow p-5",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"p-3 rounded-full ".concat(i[a]),children:s&&(0,Ha.jsx)(s,{size:24})}),(0,Ha.jsxs)("div",{className:"ml-4",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-500 truncate",children:n}),(0,Ha.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:r})]})]})})}),Wa=p("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Ja=p("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),Qa=p("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const Ga=function(e){let{stats:t,leads:n}=e;const r=n.slice(0,5);return(0,Ha.jsxs)("div",{className:"space-y-6",children:[(0,Ha.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,Ha.jsx)(Ka,{title:"Total Leads",value:t.totalLeads,icon:Wa,color:"blue"}),(0,Ha.jsx)(Ka,{title:"Hot Leads",value:t.hotLeads,icon:Ja,color:"red"}),(0,Ha.jsx)(Ka,{title:"Quoted Leads",value:t.quotedLeads,icon:Qa,color:"green"}),(0,Ha.jsx)(Ka,{title:"Total Quote Value",value:(a=t.totalQuoteValue,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a)),icon:y,color:"purple"})]}),(0,Ha.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Ha.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Leads"}),0===r.length?(0,Ha.jsx)("p",{className:"text-gray-500",children:"No leads yet. Add your first lead to get started!"}):(0,Ha.jsx)("div",{className:"overflow-x-auto",children:(0,Ha.jsxs)("table",{className:"min-w-full",children:[(0,Ha.jsx)("thead",{children:(0,Ha.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,Ha.jsx)("th",{className:"text-left py-2 px-4 font-medium text-gray-700",children:"Name"}),(0,Ha.jsx)("th",{className:"text-left py-2 px-4 font-medium text-gray-700",children:"Quality"}),(0,Ha.jsx)("th",{className:"text-left py-2 px-4 font-medium text-gray-700",children:"Disposition"}),(0,Ha.jsx)("th",{className:"text-left py-2 px-4 font-medium text-gray-700",children:"Quote"}),(0,Ha.jsx)("th",{className:"text-left py-2 px-4 font-medium text-gray-700",children:"Notes"})]})}),(0,Ha.jsx)("tbody",{children:r.map((e,t)=>(0,Ha.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,Ha.jsx)("td",{className:"py-2 px-4 text-gray-900",children:e.customerName||"".concat(e.firstName||""," ").concat(e.lastName||"").trim()||"Unknown"}),(0,Ha.jsx)("td",{className:"py-2 px-4",children:(0,Ha.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("Hot"===e.quality?"bg-red-100 text-red-800":"Warm"===e.quality?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:e.quality})}),(0,Ha.jsx)("td",{className:"py-2 px-4 text-gray-600",children:e.disposition||"New"}),(0,Ha.jsx)("td",{className:"py-2 px-4 text-gray-900",children:e.dabellaQuote||"N/A"}),(0,Ha.jsx)("td",{className:"py-2 px-4 text-gray-600 max-w-xs truncate",children:e.notes||"No notes"})]},e.id||t))})]})})]})]});var a},$a=p("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ya=p("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Xa=p("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Za=p("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),es=p("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ts=p("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const ns=function(t){let{leads:n,onAddLead:r,onEditLead:a,onDeleteLead:s,onRefreshLeads:i,onSelectLead:o}=t;const[l,c]=(0,e.useState)(""),[u,d]=(0,e.useState)("All"),[h,f]=(0,e.useState)("All"),m=(0,e.useCallback)(e=>{const t={New:{bg:"bg-blue-100",text:"text-blue-800",icon:$a},Scheduled:{bg:"bg-cyan-100",text:"text-cyan-800",icon:N},Insurance:{bg:"bg-indigo-100",text:"text-indigo-800",icon:Ya},Quoted:{bg:"bg-yellow-100",text:"text-yellow-800",icon:y},"Follow Up":{bg:"bg-orange-100",text:"text-orange-800",icon:I},"Closed Sold":{bg:"bg-green-100",text:"text-green-800",icon:j},"Closed Lost":{bg:"bg-red-100",text:"text-red-800",icon:E}}[e]||{bg:"bg-gray-100",text:"text-gray-800",icon:C},n=t.icon;return(0,Ha.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(t.bg," ").concat(t.text),children:[(0,Ha.jsx)(n,{className:"w-3 h-3 mr-1"}),e]})},[]),p=(0,e.useCallback)(e=>{const t=String(e||"");if(!t)return"";const n=t.replace(/\D/g,"");return 10===n.length?"(".concat(n.slice(0,3),") ").concat(n.slice(3,6),"-").concat(n.slice(6)):t},[]),g=(0,e.useCallback)(e=>{const t=String(e||"");return t&&"-"!==t&&"0"!==t?t.includes("$")?t:"$".concat(t):"N/A"},[]),v=(0,e.useMemo)(()=>n.filter(e=>{var t,n,r;return((null===(t=e.customerName)||void 0===t?void 0:t.toLowerCase().includes(l.toLowerCase()))||(null===(n=e.phoneNumber)||void 0===n?void 0:n.toString().includes(l))||(null===(r=e.address)||void 0===r?void 0:r.toLowerCase().includes(l.toLowerCase())))&&("All"===u||e.disposition===u)&&("All"===h||e.leadSource===h)}),[n,l,u,h]),b=(0,e.useMemo)(()=>["New","Scheduled","Insurance","Quoted","Follow Up","Closed Sold","Closed Lost"],[]);return(0,Ha.jsxs)("div",{className:"space-y-6",children:[(0,Ha.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ha.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Lead Management"}),(0,Ha.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ha.jsxs)("button",{onClick:i,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,Ha.jsx)(Xa,{className:"w-4 h-4 mr-2"})," Refresh"]}),(0,Ha.jsxs)("button",{onClick:r,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[(0,Ha.jsx)($a,{className:"w-4 h-4 mr-2"}),"Add Lead"]})]})]}),(0,Ha.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,Ha.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Ha.jsxs)("div",{className:"relative md:col-span-2",children:[(0,Ha.jsx)(Za,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,Ha.jsx)("input",{type:"text",placeholder:"Search by name, phone, or address...",value:l,onChange:e=>c(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,Ha.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,Ha.jsx)("option",{value:"All",children:"All Dispositions"}),b.map(e=>(0,Ha.jsx)("option",{value:e,children:e},e))]}),(0,Ha.jsxs)("select",{value:h,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,Ha.jsx)("option",{value:"All",children:"Lead Source"}),(0,Ha.jsx)("option",{children:"Door Knock"}),(0,Ha.jsx)("option",{children:"Rime"}),(0,Ha.jsx)("option",{children:"Adverta"}),(0,Ha.jsx)("option",{children:"Referral"}),(0,Ha.jsx)("option",{children:"DaBella"})]})]})}),(0,Ha.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:[(0,Ha.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ha.jsx)("thead",{className:"bg-gray-50",children:(0,Ha.jsxs)("tr",{children:[(0,Ha.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,Ha.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,Ha.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quote"}),(0,Ha.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),(0,Ha.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Ha.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ha.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(e=>(0,Ha.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>o(e),children:[(0,Ha.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ha.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.customerName||"N/A"})}),(0,Ha.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ha.jsx)("a",{href:"tel:".concat(e.phoneNumber),onClick:e=>e.stopPropagation(),className:"hover:text-blue-600 text-sm text-gray-900",children:p(e.phoneNumber)})}),(0,Ha.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ha.jsx)("div",{className:"text-sm font-medium text-gray-900",children:g(e.dabellaQuote)})}),(0,Ha.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.leadSource}),(0,Ha.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:m(e.disposition)}),(0,Ha.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Ha.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ha.jsx)("button",{onClick:t=>{t.stopPropagation(),o(e)},className:"text-blue-600 hover:text-blue-900 p-1 rounded",title:"View Details",children:(0,Ha.jsx)(es,{className:"w-4 h-4"})}),(0,Ha.jsx)("button",{onClick:t=>{t.stopPropagation(),a(e)},className:"text-orange-600 hover:text-orange-900 p-1 rounded",title:"Edit",children:(0,Ha.jsx)(ts,{className:"w-4 h-4"})})]})})]},e.id))})]}),0===v.length&&(0,Ha.jsxs)("div",{className:"text-center py-12",children:[(0,Ha.jsx)(C,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Ha.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No leads found"}),(0,Ha.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your search or filter criteria."})]})]})]})};const rs=function(t){let{jobCounts:n,onAddJobCount:r,onEditJobCount:a,onDeleteJobCount:s,onRefreshJobCounts:i,onSelectJobCount:o}=t;const{addNotification:l}=P(),[c,u]=(0,e.useState)(""),[d,h]=(0,e.useState)(""),f=(0,e.useCallback)(e=>e&&"0"!==e&&"-"!==e?Number(e).toLocaleString():"-",[]),m=(0,e.useCallback)(e=>{if(!e)return"-";try{return new Date(e).toLocaleDateString()}catch(t){return e}},[]),p=(0,e.useCallback)(e=>{if(!e)return"-";const t=e.toString().replace(/\D/g,"");return 10===t.length?"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6)):e},[]),g=(0,e.useMemo)(()=>n.filter(e=>{var t,n,r,a,s;const i=(null===(t=e.firstName)||void 0===t?void 0:t.toLowerCase().includes(c.toLowerCase()))||(null===(n=e.lastName)||void 0===n?void 0:n.toLowerCase().includes(c.toLowerCase()))||(null===(r=e.customerName)||void 0===r?void 0:r.toLowerCase().includes(c.toLowerCase()))||(null===(a=e.phoneNumber)||void 0===a?void 0:a.toString().includes(c))||(null===(s=e.address)||void 0===s?void 0:s.toLowerCase().includes(c.toLowerCase())),o=!d||e.date===d;return i&&o}),[n,c,d]),y=(0,e.useMemo)(()=>g.reduce((e,t)=>(e.totalJobs+=1,e.totalSqFt+=parseFloat(t.sqFt)||0,e.totalRidgeLf+=parseFloat(t.ridgeLf)||0,e.totalValleyLf+=parseFloat(t.valleyLf)||0,e),{totalJobs:0,totalSqFt:0,totalRidgeLf:0,totalValleyLf:0}),[g]);return(0,Ha.jsxs)("div",{className:"space-y-6",children:[(0,Ha.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Job Count Management"}),(0,Ha.jsx)("p",{className:"text-gray-600 mt-1",children:"Track roofing job counts, measurements, and customer information"})]}),(0,Ha.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ha.jsxs)("button",{onClick:i,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[(0,Ha.jsx)(Xa,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,Ha.jsxs)("button",{onClick:r,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:[(0,Ha.jsx)($a,{className:"w-4 h-4 mr-2"}),"Add Job Count"]})]})]}),(0,Ha.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,Ha.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Ha.jsxs)("div",{className:"relative md:col-span-2",children:[(0,Ha.jsx)(Za,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,Ha.jsx)("input",{type:"text",placeholder:"Search by name, phone, or address...",value:c,onChange:e=>u(e.target.value),className:"pl-10 pr-4 py-3 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Ha.jsxs)("div",{className:"relative",children:[(0,Ha.jsx)(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,Ha.jsx)("input",{type:"date",value:d,onChange:e=>h(e.target.value),className:"pl-10 pr-4 py-3 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})}),(0,Ha.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)(Wa,{className:"h-8 w-8 text-blue-600"})}),(0,Ha.jsxs)("div",{className:"ml-4",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Jobs"}),(0,Ha.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:y.totalJobs})]})]})}),(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)(x,{className:"h-8 w-8 text-green-600"})}),(0,Ha.jsxs)("div",{className:"ml-4",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total SQ FT"}),(0,Ha.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f(y.totalSqFt)})]})]})}),(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)(Ja,{className:"h-8 w-8 text-purple-600"})}),(0,Ha.jsxs)("div",{className:"ml-4",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Ridge LF"}),(0,Ha.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f(y.totalRidgeLf)})]})]})}),(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)(Ja,{className:"h-8 w-8 text-orange-600"})}),(0,Ha.jsxs)("div",{className:"ml-4",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Valley LF"}),(0,Ha.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f(y.totalValleyLf)})]})]})})]}),(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:(0,Ha.jsxs)("div",{className:"overflow-x-auto",children:[(0,Ha.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ha.jsx)("thead",{className:"bg-gray-50",children:(0,Ha.jsxs)("tr",{children:[(0,Ha.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,Ha.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,Ha.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Ha.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SQ FT"}),(0,Ha.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ridge LF"}),(0,Ha.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valley LF"}),(0,Ha.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quote"}),(0,Ha.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ha.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map((e,t)=>(0,Ha.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>o(e),children:[(0,Ha.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ha.jsxs)("div",{className:"flex flex-col",children:[(0,Ha.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.customerName||"".concat(e.firstName||""," ").concat(e.lastName||"").trim()||"Unknown"}),e.address&&(0,Ha.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.address})]})}),(0,Ha.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ha.jsx)("a",{href:"tel:".concat(e.phoneNumber),onClick:e=>e.stopPropagation(),className:"text-sm text-blue-600 hover:text-blue-800",children:p(e.phoneNumber)})}),(0,Ha.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ha.jsx)("div",{className:"text-sm text-gray-900",children:m(e.date)})}),(0,Ha.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ha.jsx)("div",{className:"text-sm font-medium text-gray-900",children:f(e.sqFt)})}),(0,Ha.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ha.jsx)("div",{className:"text-sm font-medium text-gray-900",children:f(e.ridgeLf)})}),(0,Ha.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ha.jsx)("div",{className:"text-sm font-medium text-gray-900",children:f(e.valleyLf)})}),(0,Ha.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ha.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.dabellaQuote?"$".concat(f(e.dabellaQuote)):"-"})}),(0,Ha.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Ha.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ha.jsx)("button",{onClick:t=>{t.stopPropagation(),o(e)},className:"text-blue-600 hover:text-blue-900 p-2 rounded-md hover:bg-blue-50 transition-colors",title:"View Details",children:(0,Ha.jsx)(es,{className:"w-4 h-4"})}),(0,Ha.jsx)("button",{onClick:t=>{t.stopPropagation(),a(e)},className:"text-orange-600 hover:text-orange-900 p-2 rounded-md hover:bg-orange-50 transition-colors",title:"Edit",children:(0,Ha.jsx)(ts,{className:"w-4 h-4"})})]})})]},e.id||t))})]}),0===g.length&&(0,Ha.jsxs)("div",{className:"text-center py-12",children:[(0,Ha.jsx)(x,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Ha.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No job counts found"}),(0,Ha.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:c||d?"Try adjusting your search or filter criteria.":"Get started by adding your first job count."})]})]})})]})},as=p("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),ss=p("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),is=p("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),os=p("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),ls="AIzaSyA-IhqTEAOQMTU9DlEeUwt1_oM5yq3-sb4";let cs=!1;function us(t){let{leads:n,onLeadClick:r,showDemoData:a,mapType:s,showTraffic:i,searchAddress:l,onSearchComplete:c,selectedCustomer:u,onCustomerLocated:d}=t;const h=(0,e.useRef)(null),f=(0,e.useRef)([]),m=(0,e.useRef)(null),p=(0,e.useRef)(null),[y,v]=(0,e.useState)(null),[b,x]=(0,e.useState)(!0),[w,k]=(0,e.useState)(null),_=(0,e.useMemo)(()=>[{id:"demo1",customerName:"John Smith",phoneNumber:"555-0123",address:"123 Main St, Ogden, UT",quality:"Hot",latitude:41.223,longitude:-111.9738},{id:"demo2",customerName:"Sarah Johnson",phoneNumber:"555-0456",address:"456 Oak Ave, Salt Lake City, UT",quality:"Warm",latitude:40.7608,longitude:-111.891},{id:"demo3",customerName:"Mike Wilson",phoneNumber:"555-0789",address:"789 Pine St, Provo, UT",quality:"Cold",latitude:40.2338,longitude:-111.6585},{id:"demo4",customerName:"Emily Davis",phoneNumber:"555-0321",address:"321 Elm Dr, West Valley, UT",quality:"Hot",latitude:40.6916,longitude:-112.0011},{id:"demo5",customerName:"Chris Brown",phoneNumber:"555-0654",address:"654 Cedar Ln, Layton, UT",quality:"Warm",latitude:41.0602,longitude:-111.9711}],[]),N=a?_:n,S=N.filter(e=>!e.address||""===e.address.trim()),E=(0,e.useCallback)(e=>{switch(e){case"Hot":return"#dc2626";case"Warm":return"#f59e0b";case"Cold":return"#3b82f6";default:return"#6b7280"}},[]),j=(0,e.useCallback)(e=>{const t=E(e);return{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('<svg width="36" height="36" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">\n          <path d="M18 2c-7.7 0-14 6.3-14 14 0 10.5 14 18 14 18s14-7.5 14-18c0-7.7-6.3-14-14-14z" fill="'.concat(t,'" stroke="#ffffff" stroke-width="2"/>\n          <circle cx="18" cy="16" r="6" fill="#ffffff"/>\n          <circle cx="18" cy="16" r="3" fill="').concat(t,'"/>\n        </svg>')),scaledSize:new window.google.maps.Size(36,36),anchor:new window.google.maps.Point(18,36)}},[E]);(0,e.useEffect)(()=>{(async()=>{try{const e=await new Promise((e,t)=>{var n;if(cs&&null!==(n=window.google)&&void 0!==n&&n.maps)return e(window.google);const r="google-maps-script",a=document.getElementById(r);if(a)return a.addEventListener("load",()=>{cs=!0,e(window.google)}),void a.addEventListener("error",()=>{t(new Error("Failed to load Google Maps. Please check your API key and internet connection."))});const s=document.createElement("script");s.id=r,s.src="https://maps.googleapis.com/maps/api/js?key=".concat(ls,"&libraries=geometry,places&loading=async"),s.async=!0,s.defer=!0,s.onload=()=>{cs=!0,e(window.google)},s.onerror=()=>{document.head.removeChild(s),t(new Error("Failed to load Google Maps. Please check your API key and internet connection."))},document.head.appendChild(s)});if(!h.current)return;const t=[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{visibility:"off"}]}],n=new e.maps.Map(h.current,{center:{lat:40.7608,lng:-111.891},zoom:9,styles:t,mapTypeId:s,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0,zoomControl:!0});p.current=new e.maps.TrafficLayer,i&&p.current.setMap(n),m.current=new e.maps.InfoWindow,v(n)}catch(e){k(e.message)}finally{x(!1)}})()},[s,i]),(0,e.useEffect)(()=>{p.current&&y&&p.current.setMap(i?y:null)},[i,y]),(0,e.useEffect)(()=>{if(!y||!window.google||!l)return;(new window.google.maps.Geocoder).geocode({address:l},(e,t)=>{if("OK"===t&&e[0]){const t=e[0].geometry.location;y.setCenter(t),y.setZoom(15),new window.google.maps.Marker({position:t,map:y,title:l,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:8,fillColor:"#4F46E5",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2}})}c&&c()})},[y,l,c]),(0,e.useEffect)(()=>(window.viewLeadDetails=e=>{const t=N.find(t=>t.id===e);t&&r&&r(t)},()=>{window.viewLeadDetails=null}),[N,r]);const I=(0,e.useCallback)((e,t)=>{if(!y||!window.google)return;(new window.google.maps.Geocoder).geocode({address:e},(e,n)=>{if("OK"===n&&e[0]){const n=e[0].geometry.location;t({lat:n.lat(),lng:n.lng(),success:!0})}else t({success:!1,error:n})})},[y]);return(0,e.useEffect)(()=>{u&&y&&window.google&&I(u.address,e=>{if(e.success){const t={lat:e.lat,lng:e.lng};f.current.forEach(e=>e.setMap(null)),f.current=[],y.setCenter(t),y.setZoom(15);const n=new window.google.maps.Marker({position:t,map:y,title:u.customerName,icon:j(u.quality),animation:window.google.maps.Animation.DROP});n.addListener("click",()=>{const e='\n            <div style="padding: 12px; min-width: 200px;">\n              <h3 style="margin: 0 0 8px 0; color: #1f2937; font-size: 16px; font-weight: 600;">\n                '.concat(u.customerName||"Unknown",'\n              </h3>\n              <div style="margin-bottom: 8px;">\n                <strong style="color: #374151;">Phone:</strong>\n                <a href="tel:').concat(u.phoneNumber,'" style="color: #3b82f6; text-decoration: none;">\n                  ').concat(u.phoneNumber||"N/A",'\n                </a>\n              </div>\n              <div style="margin-bottom: 8px;">\n                <strong style="color: #374151;">Quality:</strong>\n                <span style="background: ').concat(E(u.quality),"20; color: ").concat(E(u.quality),'; padding: 2px 6px; border-radius: 4px; font-size: 12px;">\n                  ').concat(u.quality,'\n                </span>\n              </div>\n              <div style="margin-bottom: 12px; color: #6b7280; font-size: 14px;">').concat(u.address,"</div>\n              <button onclick=\"window.viewLeadDetails('").concat(u.id,'\')"\n                      style="background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500;">\n                View Details\n              </button>\n            </div>\n          ');m.current.setContent(e),m.current.open(y,n)}),f.current.push(n),d&&d(o(o({},u),{},{lat:e.lat,lng:e.lng}))}else console.warn("Failed to geocode customer address:",u.address,e.error)})},[u,y,I,j,E,d]),b?(0,Ha.jsx)("div",{className:"h-[70vh] w-full rounded-lg border border-gray-300 flex items-center justify-center bg-gray-50",children:(0,Ha.jsxs)("div",{className:"text-center",children:[(0,Ha.jsx)(g,{className:"animate-spin h-10 w-10 text-blue-600 mx-auto mb-3"}),(0,Ha.jsx)("p",{className:"text-gray-600 text-lg",children:"Loading Interactive Map..."}),(0,Ha.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Connecting to Google Maps"})]})}):w?(0,Ha.jsx)("div",{className:"h-[70vh] w-full rounded-lg border border-red-300 flex items-center justify-center bg-red-50",children:(0,Ha.jsxs)("div",{className:"text-center max-w-md",children:[(0,Ha.jsx)(C,{className:"h-12 w-12 text-red-600 mx-auto mb-3"}),(0,Ha.jsx)("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Map Loading Failed"}),(0,Ha.jsx)("p",{className:"text-red-600 mb-3",children:w}),(0,Ha.jsx)("p",{className:"text-sm text-gray-600",children:"Please check your Google Maps API key configuration and internet connection."})]})}):(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("div",{ref:h,className:"h-[70vh] w-full rounded-lg overflow-hidden border border-gray-300 shadow-sm"}),!a&&S.length>0&&(0,Ha.jsxs)("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,Ha.jsxs)("h4",{className:"text-sm font-semibold text-yellow-800 mb-3 flex items-center",children:[(0,Ha.jsx)(C,{className:"w-4 h-4 mr-2"}),"Leads Without Address Data (",S.length,")"]}),(0,Ha.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:S.slice(0,4).map(e=>(0,Ha.jsxs)("div",{className:"bg-white p-3 rounded border border-yellow-200 hover:shadow-sm transition-shadow cursor-pointer",onClick:()=>r&&r(e),children:[(0,Ha.jsx)("div",{className:"font-medium text-gray-900",children:e.customerName||"Unknown"}),(0,Ha.jsx)("div",{className:"text-sm text-gray-600",children:e.phoneNumber||"No phone"}),(0,Ha.jsx)("div",{className:"text-xs text-gray-500",children:"No address provided"})]},e.id))}),S.length>4&&(0,Ha.jsxs)("div",{className:"mt-3 text-sm text-yellow-700",children:["And ",S.length-4," more leads without addresses..."]})]})]})}const ds=function(t){let{leads:n,onLeadClick:r,searchAddress:a,onSearchComplete:s}=t;const[i,o]=(0,e.useState)(!1),[l,c]=(0,e.useState)("roadmap"),[u,d]=(0,e.useState)(!1),[h,f]=(0,e.useState)(null),[m,p]=(0,e.useState)(""),[g,y]=(0,e.useState)(!1),v=(0,e.useMemo)(()=>n.filter(e=>e.address&&""!==e.address.trim()),[n]),b=v.length>0,x=(0,e.useMemo)(()=>m?v.filter(e=>{var t,n,r;return(null===(t=e.customerName)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase()))||(null===(n=e.firstName)||void 0===n?void 0:n.toLowerCase().includes(m.toLowerCase()))||(null===(r=e.lastName)||void 0===r?void 0:r.toLowerCase().includes(m.toLowerCase()))}):v,[v,m]);(0,e.useEffect)(()=>{const e=e=>{e.target.closest(".customer-search-dropdown")||y(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const w=(0,e.useMemo)(()=>{const e=i?[{quality:"Hot"},{quality:"Hot"},{quality:"Warm"},{quality:"Warm"},{quality:"Cold"}]:n;return{hot:e.filter(e=>"Hot"===e.quality).length,warm:e.filter(e=>"Warm"===e.quality).length,cold:e.filter(e=>"Cold"===e.quality).length,total:e.length,mapped:v.length}},[n,v,i]);return(0,Ha.jsxs)("div",{className:"space-y-6",children:[(0,Ha.jsxs)("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4",children:[(0,Ha.jsxs)("div",{children:[(0,Ha.jsxs)("h2",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,Ha.jsx)(as,{className:"w-8 h-8 mr-3 text-blue-600"}),"Customer Locations"]}),(0,Ha.jsx)("p",{className:"text-gray-600 mt-1",children:"Interactive map showing customer locations with lead quality indicators"})]}),(0,Ha.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,Ha.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[(0,Ha.jsxs)("button",{onClick:()=>o(!1),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors ".concat(i?"text-gray-600 hover:text-gray-900":"bg-white text-gray-900 shadow-sm"),children:["Real Data (",n.length,")"]}),(0,Ha.jsx)("button",{onClick:()=>o(!0),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors ".concat(i?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Demo Data (5)"})]}),(0,Ha.jsxs)("div",{className:"relative customer-search-dropdown",children:[(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)(Za,{className:"w-4 h-4 text-gray-400 absolute left-3 z-10"}),(0,Ha.jsx)("input",{type:"text",placeholder:"Search customer...",value:m,onChange:e=>{p(e.target.value),y(!0)},onFocus:()=>y(!0),className:"pl-10 pr-10 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-64"}),(0,Ha.jsx)(ss,{className:"w-4 h-4 text-gray-400 absolute right-3"})]}),g&&x.length>0&&(0,Ha.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto z-20",children:[x.slice(0,10).map(e=>(0,Ha.jsxs)("button",{onClick:()=>(e=>{f(e),p(e.customerName||"".concat(e.firstName||""," ").concat(e.lastName||"").trim()),y(!1)})(e),className:"w-full text-left px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[(0,Ha.jsx)("div",{className:"font-medium text-gray-900",children:e.customerName||"".concat(e.firstName||""," ").concat(e.lastName||"").trim()||"Unknown"}),(0,Ha.jsx)("div",{className:"text-sm text-gray-500 truncate",children:e.address}),(0,Ha.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:(0,Ha.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium ".concat("Hot"===e.quality?"bg-red-100 text-red-800":"Warm"===e.quality?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.quality})})]},e.id)),x.length>10&&(0,Ha.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-500 bg-gray-50",children:["And ",x.length-10," more results..."]})]})]}),(0,Ha.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Ha.jsx)("option",{value:"roadmap",children:"Road Map"}),(0,Ha.jsx)("option",{value:"satellite",children:"Satellite"}),(0,Ha.jsx)("option",{value:"hybrid",children:"Hybrid"}),(0,Ha.jsx)("option",{value:"terrain",children:"Terrain"})]}),(0,Ha.jsxs)("button",{onClick:()=>d(!u),className:"flex items-center px-3 py-2 text-sm font-medium rounded-lg border transition-colors ".concat(u?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"),children:[(0,Ha.jsx)(is,{className:"w-4 h-4 mr-2"}),"Traffic"]})]})]}),(0,Ha.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-red-500",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:(0,Ha.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"})})}),(0,Ha.jsxs)("div",{className:"ml-3",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Hot Leads"}),(0,Ha.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:w.hot})]})]})}),(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-yellow-500",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,Ha.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"})})}),(0,Ha.jsxs)("div",{className:"ml-3",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Warm Leads"}),(0,Ha.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:w.warm})]})]})}),(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-blue-500",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,Ha.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"})})}),(0,Ha.jsxs)("div",{className:"ml-3",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Cold Leads"}),(0,Ha.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:w.cold})]})]})}),(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-gray-500",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:(0,Ha.jsx)(as,{className:"w-4 h-4 text-gray-600"})})}),(0,Ha.jsxs)("div",{className:"ml-3",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Mapped"}),(0,Ha.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:i?5:w.mapped})]})]})})]}),b||i?(0,Ha.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,Ha.jsx)("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:(0,Ha.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ha.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Ha.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Interactive Map"}),(0,Ha.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-1"}),"Hot (",w.hot,")"]}),(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-1"}),"Warm (",w.warm,")"]}),(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-1"}),"Cold (",w.cold,")"]})]})]}),i&&(0,Ha.jsxs)("div",{className:"flex items-center text-sm text-blue-600 bg-blue-50 px-3 py-1 rounded-full",children:[(0,Ha.jsx)(os,{className:"w-4 h-4 mr-1"}),"Demo Mode"]})]})}),(0,Ha.jsx)(us,{leads:n,onLeadClick:r,showDemoData:i,mapType:l,showTraffic:u,searchAddress:a,onSearchComplete:s,selectedCustomer:h,onCustomerLocated:e=>console.log("Customer located:",e)})]}):(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:(0,Ha.jsxs)("div",{className:"text-center py-12",children:[(0,Ha.jsx)(_,{className:"mx-auto h-20 w-20 text-gray-400 mb-6"}),(0,Ha.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"No Location Data Available"}),(0,Ha.jsx)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Your leads don't have geocoded coordinates yet. Add addresses to your leads or use demo data to see the map in action."}),(0,Ha.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,Ha.jsxs)("button",{onClick:()=>o(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,Ha.jsx)(_,{className:"w-4 h-4 mr-2"}),"View Demo Data"]}),(0,Ha.jsxs)("button",{className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,Ha.jsx)(Za,{className:"w-4 h-4 mr-2"}),"Learn About Geocoding"]})]})]})})]})},hs=p("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),fs=p("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),ms=p("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),ps=p("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),gs=p("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ys=p("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),vs=p("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),bs=p("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),xs=p("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),ws=p("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),ks=p("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const _s=function(t){let{leads:n=[]}=t;const[r,a]=(0,e.useState)(new Date),[s,i]=(0,e.useState)("month"),[o,l]=(0,e.useState)(null),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(""),[f,m]=(0,e.useState)("All"),[p,g]=(0,e.useState)("All"),y=(0,e.useMemo)(()=>new Date,[]),v=r.getMonth(),b=r.getFullYear(),x=(0,e.useMemo)(()=>[{id:1,date:new Date(b,v,15),time:"10:00 AM",endTime:"11:00 AM",customer:"John Smith",address:"123 Main St, Ogden, UT",phone:"555-0123",email:"john@example.com",type:"Initial Consultation",status:"Confirmed",priority:"High",notes:"First time customer, very interested in roof replacement",leadId:"lead1",duration:60,reminderSet:!0,color:"blue"},{id:2,date:new Date(b,v,18),time:"2:00 PM",endTime:"3:30 PM",customer:"Sarah Johnson",address:"456 Oak Ave, Salt Lake City, UT",phone:"555-0456",email:"sarah@example.com",type:"Follow-up",status:"Pending",priority:"Medium",notes:"Quote review and final decision discussion",leadId:"lead2",duration:90,reminderSet:!1,color:"green"},{id:3,date:new Date(b,v,22),time:"11:30 AM",endTime:"12:30 PM",customer:"Mike Wilson",address:"789 Pine St, Provo, UT",phone:"555-0789",email:"mike@example.com",type:"Site Visit",status:"Confirmed",priority:"High",notes:"On-site inspection for damage assessment",leadId:"lead3",duration:60,reminderSet:!0,color:"red"},{id:4,date:new Date(b,v,25),time:"9:00 AM",endTime:"10:00 AM",customer:"Emily Davis",address:"321 Elm Dr, West Valley, UT",phone:"555-0321",email:"emily@example.com",type:"Quote Presentation",status:"Confirmed",priority:"High",notes:"Present final quote and contract signing",leadId:"lead4",duration:60,reminderSet:!0,color:"purple"},{id:5,date:new Date,time:"3:00 PM",endTime:"4:00 PM",customer:"Chris Brown",address:"654 Cedar Ln, Layton, UT",phone:"555-0654",email:"chris@example.com",type:"Consultation",status:"Confirmed",priority:"Medium",notes:"Initial consultation for new construction",leadId:"lead5",duration:60,reminderSet:!0,color:"orange"}],[b,v]),w=["January","February","March","April","May","June","July","August","September","October","November","December"],k=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],_=new Date(b,v,1).getDay(),S=new Date(b,v+1,0).getDate(),E=e=>{a(new Date(b,v+e,1))},T=()=>{a(new Date),l(new Date)},A=(0,e.useCallback)(e=>x.filter(t=>t.date.toDateString()===e.toDateString()),[x]),P=(0,e.useCallback)(()=>A(y),[A,y]),R=(0,e.useMemo)(()=>x.filter(e=>{const t=e.customer.toLowerCase().includes(d.toLowerCase())||e.type.toLowerCase().includes(d.toLowerCase())||e.address.toLowerCase().includes(d.toLowerCase()),n="All"===f||e.type===f,r="All"===p||e.status===p;return t&&n&&r}),[x,d,f,p]),O=(0,e.useMemo)(()=>({total:x.length,today:P().length,confirmed:x.filter(e=>"Confirmed"===e.status).length,pending:x.filter(e=>"Pending"===e.status).length,thisMonth:x.filter(e=>e.date.getMonth()===v&&e.date.getFullYear()===b).length}),[x,v,b,P]),D=e=>{switch(e){case"Confirmed":return"text-green-600 bg-green-100";case"Pending":return"text-yellow-600 bg-yellow-100";case"Cancelled":return"text-red-600 bg-red-100";case"Completed":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},L=e=>{switch(e){case"High":return"border-red-500 bg-red-50";case"Medium":return"border-yellow-500 bg-yellow-50";case"Low":return"border-green-500 bg-green-50";default:return"border-gray-500 bg-gray-50"}},M=e=>{let{appointment:t,compact:n=!1}=e;return(0,Ha.jsx)("div",{className:"border-l-4 ".concat(L(t.priority)," p-3 rounded-r-lg hover:shadow-md transition-all duration-200 cursor-pointer group"),onClick:()=>u(t),children:(0,Ha.jsx)("div",{className:"flex items-start justify-between",children:(0,Ha.jsxs)("div",{className:"flex-1",children:[(0,Ha.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ha.jsx)(I,{className:"w-4 h-4 text-gray-500"}),(0,Ha.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[t.time," - ",t.endTime]}),t.reminderSet&&(0,Ha.jsx)(hs,{className:"w-3 h-3 text-blue-500"})]}),(0,Ha.jsx)("h4",{className:"font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:t.customer}),(0,Ha.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:t.type}),!n&&(0,Ha.jsxs)(Ha.Fragment,{children:[(0,Ha.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mb-1",children:[(0,Ha.jsx)(as,{className:"w-3 h-3 mr-1"}),t.address]}),(0,Ha.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mb-2",children:[(0,Ha.jsx)(fs,{className:"w-3 h-3 mr-1"}),t.phone]}),(0,Ha.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ha.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(D(t.status)),children:t.status}),(0,Ha.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,Ha.jsx)("button",{className:"p-1 hover:bg-gray-200 rounded",children:(0,Ha.jsx)(ts,{className:"w-3 h-3"})}),(0,Ha.jsx)("button",{className:"p-1 hover:bg-gray-200 rounded",children:(0,Ha.jsx)(ms,{className:"w-3 h-3"})})]})]})]})]})})})},F=()=>(0,Ha.jsxs)("div",{className:"bg-white rounded-lg shadow-lg",children:[(0,Ha.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Ha.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ha.jsxs)("h3",{className:"text-xl font-semibold text-gray-900",children:[w[v]," ",b]}),(0,Ha.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ha.jsx)("button",{onClick:()=>E(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ha.jsx)(ps,{className:"w-5 h-5"})}),(0,Ha.jsx)("button",{onClick:T,className:"px-3 py-2 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Today"}),(0,Ha.jsx)("button",{onClick:()=>E(1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ha.jsx)(gs,{className:"w-5 h-5"})})]})]})}),(0,Ha.jsxs)("div",{className:"p-6",children:[(0,Ha.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:k.map(e=>(0,Ha.jsx)("div",{className:"p-3 text-center text-sm font-semibold text-gray-600 bg-gray-50 rounded-lg",children:e},e))}),(0,Ha.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:_},(e,t)=>(0,Ha.jsx)("div",{className:"h-24 p-1"},"empty-".concat(t))),Array.from({length:S},(e,t)=>{const n=t+1,r=new Date(b,v,n),a=y.toDateString()===r.toDateString(),s=A(r),i=(null===o||void 0===o?void 0:o.toDateString())===r.toDateString();return(0,Ha.jsxs)("div",{className:"h-24 p-1 border rounded-lg cursor-pointer transition-all duration-200 hover:bg-blue-50 ".concat(a?"bg-blue-100 border-blue-300":"border-gray-200"," ").concat(i?"ring-2 ring-blue-500":""),onClick:()=>l(r),children:[(0,Ha.jsx)("div",{className:"text-sm font-medium p-1 ".concat(a?"text-blue-700":"text-gray-900"),children:n}),(0,Ha.jsxs)("div",{className:"space-y-1",children:[s.slice(0,2).map(e=>(0,Ha.jsxs)("div",{className:"text-xs p-1 rounded truncate bg-".concat(e.color,"-100 text-").concat(e.color,"-700 border-l-2 border-").concat(e.color,"-400"),onClick:t=>{t.stopPropagation(),u(e)},children:[e.time," ",e.customer]},e.id)),s.length>2&&(0,Ha.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:["+",s.length-2," more"]})]})]},n)})]})]})]}),z=()=>(0,Ha.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Ha.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Agenda View"}),(0,Ha.jsx)("div",{className:"space-y-6",children:0===R.length?(0,Ha.jsxs)("div",{className:"text-center py-12",children:[(0,Ha.jsx)(N,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,Ha.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No appointments found"}),(0,Ha.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]}):R.map(e=>(0,Ha.jsx)(M,{appointment:e},e.id))})]});return(0,Ha.jsxs)("div",{className:"space-y-6",children:[(0,Ha.jsxs)("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-start gap-4",children:[(0,Ha.jsxs)("div",{children:[(0,Ha.jsxs)("h2",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,Ha.jsx)(ys,{className:"w-8 h-8 mr-3 text-blue-600"}),"Calendar & Appointments"]}),(0,Ha.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your appointments, schedule consultations, and track customer meetings"})]}),(0,Ha.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,Ha.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[(0,Ha.jsxs)("button",{onClick:()=>i("month"),className:"px-3 py-2 text-sm font-medium rounded-md transition-colors flex items-center gap-2 ".concat("month"===s?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,Ha.jsx)(vs,{className:"w-4 h-4"}),"Month"]}),(0,Ha.jsxs)("button",{onClick:()=>i("agenda"),className:"px-3 py-2 text-sm font-medium rounded-md transition-colors flex items-center gap-2 ".concat("agenda"===s?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,Ha.jsx)(bs,{className:"w-4 h-4"}),"Agenda"]})]}),(0,Ha.jsxs)("button",{onClick:()=>alert("Add Appointment Modal - Coming Soon!"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[(0,Ha.jsx)($a,{className:"w-4 h-4 mr-2"}),"New Appointment"]})]})]}),(0,Ha.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-blue-500",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)(ys,{className:"w-8 h-8 text-blue-600"})}),(0,Ha.jsxs)("div",{className:"ml-3",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Appointments"}),(0,Ha.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:O.total})]})]})}),(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-green-500",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)(j,{className:"w-8 h-8 text-green-600"})}),(0,Ha.jsxs)("div",{className:"ml-3",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Today's Appointments"}),(0,Ha.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:O.today})]})]})}),(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-purple-500",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)(Qa,{className:"w-8 h-8 text-purple-600"})}),(0,Ha.jsxs)("div",{className:"ml-3",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Confirmed"}),(0,Ha.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:O.confirmed})]})]})}),(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-yellow-500",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)(C,{className:"w-8 h-8 text-yellow-600"})}),(0,Ha.jsxs)("div",{className:"ml-3",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Pending"}),(0,Ha.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:O.pending})]})]})}),(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-indigo-500",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)(N,{className:"w-8 h-8 text-indigo-600"})}),(0,Ha.jsxs)("div",{className:"ml-3",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"This Month"}),(0,Ha.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:O.thisMonth})]})]})})]}),(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,Ha.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,Ha.jsxs)("div",{className:"flex-1 relative",children:[(0,Ha.jsx)(Za,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,Ha.jsx)("input",{type:"text",placeholder:"Search appointments by customer, type, or address...",value:d,onChange:e=>h(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Ha.jsxs)("select",{value:f,onChange:e=>m(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Ha.jsx)("option",{value:"All",children:"All Types"}),(0,Ha.jsx)("option",{value:"Initial Consultation",children:"Initial Consultation"}),(0,Ha.jsx)("option",{value:"Follow-up",children:"Follow-up"}),(0,Ha.jsx)("option",{value:"Site Visit",children:"Site Visit"}),(0,Ha.jsx)("option",{value:"Quote Presentation",children:"Quote Presentation"}),(0,Ha.jsx)("option",{value:"Consultation",children:"Consultation"})]}),(0,Ha.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Ha.jsx)("option",{value:"All",children:"All Status"}),(0,Ha.jsx)("option",{value:"Confirmed",children:"Confirmed"}),(0,Ha.jsx)("option",{value:"Pending",children:"Pending"}),(0,Ha.jsx)("option",{value:"Cancelled",children:"Cancelled"}),(0,Ha.jsx)("option",{value:"Completed",children:"Completed"})]})]})}),(0,Ha.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-6",children:[(0,Ha.jsx)("div",{className:"xl:col-span-3",children:"month"===s?(0,Ha.jsx)(F,{}):(0,Ha.jsx)(z,{})}),(0,Ha.jsxs)("div",{className:"space-y-6",children:[(0,Ha.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Ha.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Ha.jsx)(I,{className:"w-5 h-5 mr-2 text-blue-600"}),"Today's Schedule"]}),0===P().length?(0,Ha.jsx)("p",{className:"text-gray-500 text-sm",children:"No appointments today."}):(0,Ha.jsx)("div",{className:"space-y-3",children:P().map(e=>(0,Ha.jsx)(M,{appointment:e,compact:!0},e.id))})]}),(0,Ha.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Ha.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Ha.jsx)(N,{className:"w-5 h-5 mr-2 text-green-600"}),"Upcoming"]}),(0,Ha.jsx)("div",{className:"space-y-3",children:x.filter(e=>e.date>=y).sort((e,t)=>e.date-t.date).slice(0,6).map(e=>(0,Ha.jsxs)("div",{className:"border rounded-lg p-3 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>u(e),children:[(0,Ha.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Ha.jsx)("span",{className:"text-sm font-medium text-blue-600",children:e.date.toLocaleDateString()}),(0,Ha.jsx)("span",{className:"text-xs text-gray-500",children:e.time})]}),(0,Ha.jsx)("div",{className:"font-medium text-gray-900 text-sm",children:e.customer}),(0,Ha.jsx)("div",{className:"text-xs text-gray-600",children:e.type})]},e.id))})]}),(0,Ha.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Ha.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,Ha.jsxs)("div",{className:"space-y-3",children:[(0,Ha.jsxs)("button",{className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,Ha.jsx)(xs,{className:"w-4 h-4 mr-2"}),"Export Calendar"]}),(0,Ha.jsxs)("button",{className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,Ha.jsx)(ws,{className:"w-4 h-4 mr-2"}),"Send Reminders"]}),(0,Ha.jsxs)("button",{className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,Ha.jsx)(ks,{className:"w-4 h-4 mr-2"}),"Generate Report"]})]})]})]})]}),c&&(0,Ha.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:(0,Ha.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Ha.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Ha.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ha.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Appointment Details"}),(0,Ha.jsx)("button",{onClick:()=>u(null),className:"text-gray-400 hover:text-gray-600",children:(0,Ha.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ha.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,Ha.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Ha.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Information"}),(0,Ha.jsxs)("div",{className:"space-y-3",children:[(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),(0,Ha.jsx)("p",{className:"text-gray-900",children:c.customer})]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),(0,Ha.jsx)("p",{className:"text-gray-900",children:c.phone})]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),(0,Ha.jsx)("p",{className:"text-gray-900",children:c.email})]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Address"}),(0,Ha.jsx)("p",{className:"text-gray-900",children:c.address})]})]})]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Appointment Details"}),(0,Ha.jsxs)("div",{className:"space-y-3",children:[(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Date"}),(0,Ha.jsx)("p",{className:"text-gray-900",children:c.date.toLocaleDateString()})]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Time"}),(0,Ha.jsxs)("p",{className:"text-gray-900",children:[c.time," - ",c.endTime]})]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Type"}),(0,Ha.jsx)("p",{className:"text-gray-900",children:c.type})]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,Ha.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(D(c.status)),children:c.status})]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Priority"}),(0,Ha.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("High"===c.priority?"bg-red-100 text-red-800":"Medium"===c.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:c.priority})]})]})]})]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Notes"}),(0,Ha.jsx)("p",{className:"text-gray-900 mt-1 p-3 bg-gray-50 rounded-lg",children:c.notes||"No notes added."})]})]}),(0,Ha.jsxs)("div",{className:"p-6 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3",children:[(0,Ha.jsx)("button",{onClick:()=>u(null),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"Close"}),(0,Ha.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit Appointment"})]})]})})]})},Ns=p("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ss=["children"],Es=e=>{let{title:t,children:n}=e;return(0,Ha.jsxs)("div",{className:"mb-6",children:[(0,Ha.jsx)("h4",{className:"text-md font-semibold text-gray-800 border-b pb-2 mb-4",children:t}),(0,Ha.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n})]})},js=e=>{let{label:t,children:n,fullWidth:r=!1}=e;return(0,Ha.jsxs)("div",{className:r?"lg:col-span-3 md:col-span-2":"",children:[(0,Ha.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),n]})},Cs=e=>(0,Ha.jsx)("input",o(o({},e),{},{className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})),Is=e=>{let{children:t}=e,n=l(e,Ss);return(0,Ha.jsx)("select",o(o({},n),{},{className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:t}))},Ts=e=>(0,Ha.jsx)("textarea",o(o({},e),{},{rows:4,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})),As={customerName:"",address:"",phoneNumber:"",email:"",dabellaQuote:"",quality:"Cold",notes:"",disposition:"New",leadSource:"Door Knock",roofAge:"",roofType:"Asphalt Shingle"};const Ps=function(t){let{initialData:n,onSubmit:r,onCancel:a,isEdit:s=!1}=t;const[i,l]=(0,e.useState)(()=>n||As),[c,u]=(0,e.useState)(!1),d=(0,e.useCallback)(e=>l(t=>o(o({},t),{},{[e.target.name]:e.target.value})),[]),h=(0,e.useCallback)(async e=>{e.preventDefault(),u(!0);const t=o({},i);if(t.address&&(!t.latitude||!t.longitude))try{const e=await A.geocodeAddress(t.address);e.success&&(t.latitude=e.latitude,t.longitude=e.longitude)}catch(n){console.warn("Geocoding failed during submission:",n)}await r(t),u(!1)},[i,r]),f=(0,e.useMemo)(()=>["New","Scheduled","Insurance","Quoted","Follow Up","Closed Sold","Closed Lost"],[]);return(0,Ha.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-40",children:(0,Ha.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] flex flex-col",children:[(0,Ha.jsxs)("div",{className:"p-6 border-b flex justify-between items-center",children:[(0,Ha.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:s?"Edit Lead":"Add New Lead"}),(0,Ha.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,Ha.jsx)(Ns,{size:24})})]}),(0,Ha.jsx)("div",{className:"p-6 overflow-y-auto",children:(0,Ha.jsxs)("form",{onSubmit:h,children:[(0,Ha.jsxs)(Es,{title:"Customer Information",children:[(0,Ha.jsx)(js,{label:"Full Name *",children:(0,Ha.jsx)(Cs,{name:"customerName",value:i.customerName,onChange:d,required:!0})}),(0,Ha.jsx)(js,{label:"Phone Number *",children:(0,Ha.jsx)(Cs,{name:"phoneNumber",value:i.phoneNumber,onChange:d,required:!0})}),(0,Ha.jsx)(js,{label:"Email",children:(0,Ha.jsx)(Cs,{name:"email",type:"email",value:i.email,onChange:d})}),(0,Ha.jsx)(js,{label:"Address",fullWidth:!0,children:(0,Ha.jsx)(Cs,{name:"address",value:i.address,onChange:d,placeholder:"Full address for map location"})})]}),(0,Ha.jsxs)(Es,{title:"Lead Details",children:[(0,Ha.jsx)(js,{label:"Lead Source",children:(0,Ha.jsxs)(Is,{name:"leadSource",value:i.leadSource,onChange:d,children:[(0,Ha.jsx)("option",{children:"Door Knock"}),(0,Ha.jsx)("option",{children:"Rime"}),(0,Ha.jsx)("option",{children:"Adverta"}),(0,Ha.jsx)("option",{children:"Referral"}),(0,Ha.jsx)("option",{children:"DaBella"})]})}),(0,Ha.jsx)(js,{label:"Quality",children:(0,Ha.jsxs)(Is,{name:"quality",value:i.quality,onChange:d,children:[(0,Ha.jsx)("option",{children:"Hot"}),(0,Ha.jsx)("option",{children:"Warm"}),(0,Ha.jsx)("option",{children:"Cold"})]})}),(0,Ha.jsx)(js,{label:"Disposition",children:(0,Ha.jsx)(Is,{name:"disposition",value:i.disposition,onChange:d,children:f.map(e=>(0,Ha.jsx)("option",{value:e,children:e},e))})})]}),(0,Ha.jsxs)(Es,{title:"Job & Quote Details",children:[(0,Ha.jsx)(js,{label:"Roof Age",children:(0,Ha.jsx)(Cs,{name:"roofAge",value:i.roofAge,onChange:d})}),(0,Ha.jsx)(js,{label:"Roof Type",children:(0,Ha.jsxs)(Is,{name:"roofType",value:i.roofType,onChange:d,children:[(0,Ha.jsx)("option",{children:"Asphalt Shingle"}),(0,Ha.jsx)("option",{children:"Metal"}),(0,Ha.jsx)("option",{children:"Tile"}),(0,Ha.jsx)("option",{children:"TPO"}),(0,Ha.jsx)("option",{children:"Wood"})]})}),(0,Ha.jsx)(js,{label:"Quote Amount",children:(0,Ha.jsx)(Cs,{name:"dabellaQuote",value:i.dabellaQuote,onChange:d,placeholder:"$15,000"})})]}),(0,Ha.jsx)(Es,{title:"Notes",children:(0,Ha.jsx)(js,{label:"Notes",fullWidth:!0,children:(0,Ha.jsx)(Ts,{name:"notes",value:i.notes,onChange:d})})}),(0,Ha.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t mt-6",children:[(0,Ha.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Ha.jsx)("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:c?(0,Ha.jsxs)(Ha.Fragment,{children:[(0,Ha.jsx)(g,{className:"animate-spin h-4 w-4 mr-2"}),"Saving..."]}):s?"Update Lead":"Add Lead"})]})]})})]})})},Rs=p("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Os=p("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),Ds=p("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Ls=p("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),Ms=e.memo(e=>{let{icon:t,label:n,value:r}=e;return(0,Ha.jsxs)("div",{children:[(0,Ha.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[t,n]}),(0,Ha.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:r||(0,Ha.jsx)("span",{className:"text-gray-400",children:"Not provided"})})]})});const Fs=function(e){let{lead:t,onEdit:n,onDelete:r,onClose:a,onNavigateToTab:s}=e;return(0,Ha.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-40 animate-fade-in",children:(0,Ha.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] flex flex-col shadow-2xl",children:[(0,Ha.jsxs)("div",{className:"p-6 border-b flex justify-between items-center",children:[(0,Ha.jsxs)("div",{children:[(0,Ha.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,Ha.jsx)(Rs,{className:"mr-3 text-blue-600"}),t.customerName]}),(0,Ha.jsx)("p",{className:"text-sm text-gray-500",children:t.address})]}),(0,Ha.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,Ha.jsx)(Ns,{size:24})})]}),(0,Ha.jsxs)("div",{className:"p-6 overflow-y-auto",children:[(0,Ha.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6 pb-6 border-b",children:[(0,Ha.jsx)(Ms,{icon:(0,Ha.jsx)(fs,{size:14,className:"mr-2"}),label:"Phone",value:(0,Ha.jsx)("a",{href:"tel:".concat(t.phoneNumber),className:"text-blue-600 hover:underline",children:t.phoneNumber})}),(0,Ha.jsx)(Ms,{icon:(0,Ha.jsx)(Os,{size:14,className:"mr-2"}),label:"Email",value:(0,Ha.jsx)("a",{href:"mailto:".concat(t.email),className:"text-blue-600 hover:underline",children:t.email})}),(0,Ha.jsx)(Ms,{icon:(0,Ha.jsx)(y,{size:14,className:"mr-2"}),label:"Quote",value:(0,Ha.jsx)("span",{className:"font-bold text-green-700",children:t.dabellaQuote})})]}),(0,Ha.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6 pb-6 border-b",children:[(0,Ha.jsx)(Ms,{icon:(0,Ha.jsx)(Ds,{size:14,className:"mr-2"}),label:"Quality",value:(0,Ha.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("Hot"===t.quality?"bg-red-100 text-red-800":"Warm"===t.quality?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:t.quality})}),(0,Ha.jsx)(Ms,{icon:(0,Ha.jsx)(b,{size:14,className:"mr-2"}),label:"Disposition",value:t.disposition}),(0,Ha.jsx)(Ms,{icon:(0,Ha.jsx)(Ls,{size:14,className:"mr-2"}),label:"Lead Source",value:t.leadSource})]}),(0,Ha.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6 pb-6 border-b",children:[(0,Ha.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center cursor-pointer hover:bg-blue-50 transition-colors",onClick:()=>s("calendar"),children:[(0,Ha.jsx)(N,{size:24,className:"mx-auto text-blue-600 mb-2"}),(0,Ha.jsx)("h4",{className:"font-semibold text-sm",children:"Appointments"}),(0,Ha.jsx)("p",{className:"text-xs text-gray-500",children:"Click to view calendar"})]}),(0,Ha.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Ha.jsx)("h4",{className:"font-semibold text-sm mb-3 text-center",children:"Communications"}),(0,Ha.jsxs)("div",{className:"space-y-2",children:[(0,Ha.jsxs)("button",{onClick:()=>window.open("mailto:".concat(t.email,"?from=brandon@rimehq.net&subject=Follow up - ").concat(t.customerName)),className:"w-full px-3 py-2 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 flex items-center justify-center",children:[(0,Ha.jsx)(Os,{size:12,className:"mr-1"}),"Email"]}),(0,Ha.jsxs)("button",{onClick:()=>{var e;return window.open("https://voice.google.com/u/0/calls?a=nc,%2B1".concat(null===(e=t.phoneNumber)||void 0===e?void 0:e.replace(/\D/g,"")))},className:"w-full px-3 py-2 bg-green-600 text-white rounded text-xs hover:bg-green-700 flex items-center justify-center",children:[(0,Ha.jsx)(fs,{size:12,className:"mr-1"}),"Call"]}),(0,Ha.jsxs)("button",{onClick:()=>{var e;return window.open("https://voice.google.com/u/0/messages?contact=%2B1".concat(null===(e=t.phoneNumber)||void 0===e?void 0:e.replace(/\D/g,"")))},className:"w-full px-3 py-2 bg-purple-600 text-white rounded text-xs hover:bg-purple-700 flex items-center justify-center",children:[(0,Ha.jsx)(Os,{size:12,className:"mr-1"}),"SMS"]})]})]}),(0,Ha.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center cursor-pointer hover:bg-green-50 transition-colors",onClick:()=>s("map",t.address),children:[(0,Ha.jsx)(as,{size:24,className:"mx-auto text-green-600 mb-2"}),(0,Ha.jsx)("h4",{className:"font-semibold text-sm",children:"Location"}),(0,Ha.jsx)("p",{className:"text-xs text-gray-500",children:"View on map"})]})]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("h4",{className:"text-md font-semibold text-gray-800 mb-2",children:"Notes"}),(0,Ha.jsx)("p",{className:"text-sm text-gray-700 bg-gray-50 p-4 rounded-md whitespace-pre-wrap",children:t.notes||"No notes for this lead."})]})]}),(0,Ha.jsxs)("div",{className:"flex justify-end space-x-3 p-4 bg-gray-50 border-t",children:[(0,Ha.jsxs)("button",{onClick:r,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 flex items-center",children:[(0,Ha.jsx)(ms,{size:16,className:"mr-2"}),"Delete"]}),(0,Ha.jsxs)("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[(0,Ha.jsx)(ts,{size:16,className:"mr-2"}),"Edit Lead"]})]})]})})},zs=["children"],Us=e=>{let{title:t,children:n}=e;return(0,Ha.jsxs)("div",{className:"mb-8",children:[(0,Ha.jsx)("h4",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-3 mb-6",children:t}),(0,Ha.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n})]})},Bs=e=>{let{label:t,children:n,fullWidth:r=!1,required:a=!1}=e;return(0,Ha.jsxs)("div",{className:r?"lg:col-span-3 md:col-span-2":"",children:[(0,Ha.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t," ",a&&(0,Ha.jsx)("span",{className:"text-red-500",children:"*"})]}),n]})},qs=e=>(0,Ha.jsx)("input",o(o({},e),{},{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})),Hs=e=>(0,Ha.jsx)("input",o(o({},e),{},{type:"number",step:"0.01",min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})),Vs=e=>(0,Ha.jsx)("input",o(o({},e),{},{type:"date",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})),Ks=e=>{let{children:t}=e,n=l(e,zs);return(0,Ha.jsx)("select",o(o({},n),{},{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:t}))},Ws=e=>(0,Ha.jsx)("textarea",o(o({},e),{},{rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-vertical"})),Js={firstName:"",lastName:"",customerName:"",phoneNumber:"",email:"",address:"",date:(new Date).toISOString().split("T")[0],leadSource:"Door Knock",quality:"Cold",disposition:"New",roofAge:"",roofType:"Asphalt Shingle",dabellaQuote:"",notes:"",sqFt:"",ridgeLf:"",valleyLf:"",eavesLf:"",ridgeVents:"",turbine:"",rimeFlow:"",highProfileRidgeCap:"",valleyMetal:"",pipes1Half:"",pipes2:"",pipes3:"",pipes4:"",gables:"",turtleBacks:"",satellite:"",chimney:"",solar:"",swampCooler:"",guttersLf:"",downspouts:"",gutterGuardLf:"",permanentLighting:""};const Qs=function(t){let{initialData:n,onSubmit:r,onCancel:a,isEdit:s=!1}=t;const[i,l]=(0,e.useState)(()=>n||Js),[c,u]=(0,e.useState)(!1),d=(0,e.useCallback)(e=>{const{name:t,value:n}=e.target;l(e=>o(o({},e),{},{[t]:n}))},[]),h=(0,e.useCallback)(async e=>{e.preventDefault(),u(!0);try{const e=o({},i);e.customerName||!e.firstName&&!e.lastName||(e.customerName="".concat(e.firstName||""," ").concat(e.lastName||"").trim()),await r(e)}catch(t){console.error("Form submission error:",t)}finally{u(!1)}},[i,r]);return(0,Ha.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:(0,Ha.jsxs)("div",{className:"bg-white rounded-xl max-w-7xl w-full max-h-[95vh] flex flex-col shadow-2xl",children:[(0,Ha.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center bg-gray-50 rounded-t-xl",children:[(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:s?"Edit Job Count":"Add New Job Count"}),(0,Ha.jsx)("p",{className:"text-gray-600 mt-1",children:s?"Update job count information":"Enter customer and job measurement details"})]}),(0,Ha.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,Ha.jsx)(Ns,{size:24})})]}),(0,Ha.jsx)("div",{className:"p-6 overflow-y-auto flex-1",children:(0,Ha.jsxs)("form",{onSubmit:h,className:"space-y-8",children:[(0,Ha.jsxs)(Us,{title:"Customer Information",children:[(0,Ha.jsx)(Bs,{label:"First Name",required:!0,children:(0,Ha.jsx)(qs,{name:"firstName",value:i.firstName,onChange:d,required:!0,placeholder:"John"})}),(0,Ha.jsx)(Bs,{label:"Last Name",children:(0,Ha.jsx)(qs,{name:"lastName",value:i.lastName,onChange:d,placeholder:"Doe"})}),(0,Ha.jsx)(Bs,{label:"Full Name",children:(0,Ha.jsx)(qs,{name:"customerName",value:i.customerName,onChange:d,placeholder:"John Doe (auto-filled from above)"})}),(0,Ha.jsx)(Bs,{label:"Phone Number",children:(0,Ha.jsx)(qs,{name:"phoneNumber",value:i.phoneNumber,onChange:d,placeholder:"(555) 123-4567"})}),(0,Ha.jsx)(Bs,{label:"Email",children:(0,Ha.jsx)(qs,{name:"email",type:"email",value:i.email,onChange:d,placeholder:"john@example.com"})}),(0,Ha.jsx)(Bs,{label:"Address",fullWidth:!0,children:(0,Ha.jsx)(qs,{name:"address",value:i.address,onChange:d,placeholder:"123 Main St, City, State 12345"})})]}),(0,Ha.jsxs)(Us,{title:"Job Information",children:[(0,Ha.jsx)(Bs,{label:"Date",required:!0,children:(0,Ha.jsx)(Vs,{name:"date",value:i.date,onChange:d,required:!0})}),(0,Ha.jsx)(Bs,{label:"Lead Source",children:(0,Ha.jsxs)(Ks,{name:"leadSource",value:i.leadSource,onChange:d,children:[(0,Ha.jsx)("option",{value:"Door Knock",children:"Door Knock"}),(0,Ha.jsx)("option",{value:"Rime",children:"Rime"}),(0,Ha.jsx)("option",{value:"Adverta",children:"Adverta"}),(0,Ha.jsx)("option",{value:"Referral",children:"Referral"}),(0,Ha.jsx)("option",{value:"DaBella",children:"DaBella"})]})}),(0,Ha.jsx)(Bs,{label:"Quality",children:(0,Ha.jsxs)(Ks,{name:"quality",value:i.quality,onChange:d,children:[(0,Ha.jsx)("option",{value:"Hot",children:"Hot"}),(0,Ha.jsx)("option",{value:"Warm",children:"Warm"}),(0,Ha.jsx)("option",{value:"Cold",children:"Cold"})]})}),(0,Ha.jsx)(Bs,{label:"Disposition",children:(0,Ha.jsxs)(Ks,{name:"disposition",value:i.disposition,onChange:d,children:[(0,Ha.jsx)("option",{value:"New",children:"New"}),(0,Ha.jsx)("option",{value:"Scheduled",children:"Scheduled"}),(0,Ha.jsx)("option",{value:"Insurance",children:"Insurance"}),(0,Ha.jsx)("option",{value:"Quoted",children:"Quoted"}),(0,Ha.jsx)("option",{value:"Follow Up",children:"Follow Up"}),(0,Ha.jsx)("option",{value:"Closed Sold",children:"Closed Sold"}),(0,Ha.jsx)("option",{value:"Closed Lost",children:"Closed Lost"})]})}),(0,Ha.jsx)(Bs,{label:"Roof Age",children:(0,Ha.jsx)(qs,{name:"roofAge",value:i.roofAge,onChange:d,placeholder:"10 years"})}),(0,Ha.jsx)(Bs,{label:"Roof Type",children:(0,Ha.jsxs)(Ks,{name:"roofType",value:i.roofType,onChange:d,children:[(0,Ha.jsx)("option",{value:"Asphalt Shingle",children:"Asphalt Shingle"}),(0,Ha.jsx)("option",{value:"Metal",children:"Metal"}),(0,Ha.jsx)("option",{value:"Tile",children:"Tile"}),(0,Ha.jsx)("option",{value:"TPO",children:"TPO"}),(0,Ha.jsx)("option",{value:"Wood",children:"Wood"})]})}),(0,Ha.jsx)(Bs,{label:"Quote Amount",children:(0,Ha.jsx)(qs,{name:"dabellaQuote",value:i.dabellaQuote,onChange:d,placeholder:"15000"})})]}),(0,Ha.jsxs)(Us,{title:"Primary Measurements",children:[(0,Ha.jsx)(Bs,{label:"SQ FT",required:!0,children:(0,Ha.jsx)(Hs,{name:"sqFt",value:i.sqFt,onChange:d,required:!0,placeholder:"2500"})}),(0,Ha.jsx)(Bs,{label:"Ridge LF",required:!0,children:(0,Ha.jsx)(Hs,{name:"ridgeLf",value:i.ridgeLf,onChange:d,required:!0,placeholder:"150"})}),(0,Ha.jsx)(Bs,{label:"Valley LF",required:!0,children:(0,Ha.jsx)(Hs,{name:"valleyLf",value:i.valleyLf,onChange:d,required:!0,placeholder:"75"})}),(0,Ha.jsx)(Bs,{label:"Eaves LF",required:!0,children:(0,Ha.jsx)(Hs,{name:"eavesLf",value:i.eavesLf,onChange:d,required:!0,placeholder:"200"})})]}),(0,Ha.jsxs)(Us,{title:"Ventilation & Flow",children:[(0,Ha.jsx)(Bs,{label:"Ridge Vents",children:(0,Ha.jsx)(Hs,{name:"ridgeVents",value:i.ridgeVents,onChange:d,placeholder:"10"})}),(0,Ha.jsx)(Bs,{label:"Turbine",children:(0,Ha.jsx)(Hs,{name:"turbine",value:i.turbine,onChange:d,placeholder:"2"})}),(0,Ha.jsx)(Bs,{label:"Rime Flow",children:(0,Ha.jsx)(Hs,{name:"rimeFlow",value:i.rimeFlow,onChange:d,placeholder:"100"})})]}),(0,Ha.jsxs)(Us,{title:"Ridge & Valley Components",children:[(0,Ha.jsx)(Bs,{label:"High Profile Ridge Cap",children:(0,Ha.jsx)(Hs,{name:"highProfileRidgeCap",value:i.highProfileRidgeCap,onChange:d,placeholder:"20"})}),(0,Ha.jsx)(Bs,{label:"Valley Metal",children:(0,Ha.jsx)(Hs,{name:"valleyMetal",value:i.valleyMetal,onChange:d,placeholder:"15"})})]}),(0,Ha.jsxs)(Us,{title:"Pipes",children:[(0,Ha.jsx)(Bs,{label:'Pipes [1 1/2"]',children:(0,Ha.jsx)(Hs,{name:"pipes1Half",value:i.pipes1Half,onChange:d,placeholder:"3"})}),(0,Ha.jsx)(Bs,{label:'Pipes [2"]',children:(0,Ha.jsx)(Hs,{name:"pipes2",value:i.pipes2,onChange:d,placeholder:"2"})}),(0,Ha.jsx)(Bs,{label:'Pipes [3"]',children:(0,Ha.jsx)(Hs,{name:"pipes3",value:i.pipes3,onChange:d,placeholder:"1"})}),(0,Ha.jsx)(Bs,{label:'Pipes [4"]',children:(0,Ha.jsx)(Hs,{name:"pipes4",value:i.pipes4,onChange:d,placeholder:"1"})})]}),(0,Ha.jsxs)(Us,{title:"Roof Features",children:[(0,Ha.jsx)(Bs,{label:"Gables",children:(0,Ha.jsx)(Hs,{name:"gables",value:i.gables,onChange:d,placeholder:"4"})}),(0,Ha.jsx)(Bs,{label:"Turtle Backs",children:(0,Ha.jsx)(Hs,{name:"turtleBacks",value:i.turtleBacks,onChange:d,placeholder:"2"})}),(0,Ha.jsx)(Bs,{label:"Satellite",children:(0,Ha.jsx)(Hs,{name:"satellite",value:i.satellite,onChange:d,placeholder:"1"})}),(0,Ha.jsx)(Bs,{label:"Chimney",children:(0,Ha.jsx)(Hs,{name:"chimney",value:i.chimney,onChange:d,placeholder:"1"})}),(0,Ha.jsx)(Bs,{label:"Solar",children:(0,Ha.jsx)(Hs,{name:"solar",value:i.solar,onChange:d,placeholder:"20"})}),(0,Ha.jsx)(Bs,{label:"Swamp Cooler",children:(0,Ha.jsx)(Hs,{name:"swampCooler",value:i.swampCooler,onChange:d,placeholder:"1"})})]}),(0,Ha.jsxs)(Us,{title:"Gutters & Additional",children:[(0,Ha.jsx)(Bs,{label:"Gutters LF",children:(0,Ha.jsx)(Hs,{name:"guttersLf",value:i.guttersLf,onChange:d,placeholder:"180"})}),(0,Ha.jsx)(Bs,{label:"Downspouts",children:(0,Ha.jsx)(Hs,{name:"downspouts",value:i.downspouts,onChange:d,placeholder:"6"})}),(0,Ha.jsx)(Bs,{label:"Gutter Guard LF",children:(0,Ha.jsx)(Hs,{name:"gutterGuardLf",value:i.gutterGuardLf,onChange:d,placeholder:"180"})}),(0,Ha.jsx)(Bs,{label:"Permanent Lighting",children:(0,Ha.jsx)(Hs,{name:"permanentLighting",value:i.permanentLighting,onChange:d,placeholder:"200"})})]}),(0,Ha.jsx)(Us,{title:"Notes",children:(0,Ha.jsx)(Bs,{label:"Additional Notes",fullWidth:!0,children:(0,Ha.jsx)(Ws,{name:"notes",value:i.notes,onChange:d,placeholder:"Any additional notes about this job count..."})})}),(0,Ha.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,Ha.jsx)("button",{type:"button",onClick:a,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Ha.jsx)("button",{type:"submit",disabled:c,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center transition-colors",children:c?(0,Ha.jsxs)(Ha.Fragment,{children:[(0,Ha.jsx)(g,{className:"animate-spin h-5 w-5 mr-2"}),"Saving..."]}):s?"Update Job Count":"Add Job Count"})]})]})})]})})};const Gs=function(t){let{jobCount:n,onClose:r,onEdit:a,onDelete:s,onJobCountUpdate:i}=t;const{addNotification:o}=P(),l=e=>e&&"0"!==e&&"-"!==e?Number(e).toLocaleString():"-",c=e=>{if(!e)return"-";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(t){return e}},u=e=>e&&"0"!==e&&"-"!==e?"$".concat(l(e)):"-",d=e=>{let{title:t,children:n,icon:r}=e;return(0,Ha.jsxs)("div",{className:"mb-8",children:[(0,Ha.jsxs)("div",{className:"flex items-center mb-6",children:[(0,Ha.jsx)(r,{className:"w-6 h-6 text-blue-600 mr-3"}),(0,Ha.jsx)("h4",{className:"text-xl font-semibold text-gray-800",children:t})]}),(0,Ha.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n})]})},h=e=>{let{label:t,value:n,fullWidth:r=!1}=e;return(0,Ha.jsxs)("div",{className:"".concat(r?"lg:col-span-3 md:col-span-2":""," bg-gray-50 p-4 rounded-lg border"),children:[(0,Ha.jsx)("dt",{className:"text-sm font-medium text-gray-600 mb-1",children:t}),(0,Ha.jsx)("dd",{className:"text-base text-gray-900 font-semibold",children:n||"-"})]})},f=n.customerName||"".concat(n.firstName||""," ").concat(n.lastName||"").trim()||"Unknown Customer";return(0,e.useCallback)(async e=>{try{const t=await A.updateJobCount(e);if(!t.success)throw new Error(t.message);i&&i(e),o("Job count updated with vent calculations","success")}catch(t){o("Failed to update job count: ".concat(t.message),"error")}},[i,o]),(0,Ha.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:(0,Ha.jsxs)("div",{className:"bg-white rounded-xl max-w-7xl w-full max-h-[95vh] flex flex-col shadow-2xl",children:[(0,Ha.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center bg-gray-50 rounded-t-xl",children:[(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Job Count Details"}),(0,Ha.jsx)("p",{className:"text-gray-600 mt-1",children:f}),(0,Ha.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Date: ",c(n.date)]})]}),(0,Ha.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ha.jsx)("button",{onClick:()=>a(n),className:"p-3 text-orange-600 hover:text-orange-800 hover:bg-orange-50 rounded-lg transition-colors",title:"Edit Job Count",children:(0,Ha.jsx)(ts,{className:"w-6 h-6"})}),(0,Ha.jsx)("button",{onClick:()=>s(n.id),className:"p-3 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Job Count",children:(0,Ha.jsx)(ms,{className:"w-6 h-6"})}),(0,Ha.jsx)("button",{onClick:r,className:"p-3 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ha.jsx)(Ns,{className:"w-6 h-6"})})]})]}),(0,Ha.jsxs)("div",{className:"p-6 overflow-y-auto flex-1",children:[(0,Ha.jsxs)(d,{title:"Customer Information",icon:Rs,children:[(0,Ha.jsx)(h,{label:"First Name",value:n.firstName}),(0,Ha.jsx)(h,{label:"Last Name",value:n.lastName}),(0,Ha.jsx)(h,{label:"Full Name",value:n.customerName}),(0,Ha.jsx)(h,{label:"Phone Number",value:(e=>{if(!e)return"-";const t=e.toString().replace(/\D/g,"");return 10===t.length?"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6)):e})(n.phoneNumber)}),(0,Ha.jsx)(h,{label:"Email",value:n.email}),(0,Ha.jsx)(h,{label:"Address",value:n.address,fullWidth:!0})]}),(0,Ha.jsxs)(d,{title:"Job Information",icon:ks,children:[(0,Ha.jsx)(h,{label:"Date",value:c(n.date)}),(0,Ha.jsx)(h,{label:"Lead Source",value:n.leadSource}),(0,Ha.jsx)(h,{label:"Quality",value:n.quality}),(0,Ha.jsx)(h,{label:"Disposition",value:n.disposition}),(0,Ha.jsx)(h,{label:"Roof Age",value:n.roofAge}),(0,Ha.jsx)(h,{label:"Roof Type",value:n.roofType}),(0,Ha.jsx)(h,{label:"Quote Amount",value:u(n.dabellaQuote)})]}),(0,Ha.jsxs)(d,{title:"Primary Measurements",icon:x,children:[(0,Ha.jsx)(h,{label:"SQ FT",value:l(n.sqFt)}),(0,Ha.jsx)(h,{label:"Ridge LF",value:l(n.ridgeLf)}),(0,Ha.jsx)(h,{label:"Valley LF",value:l(n.valleyLf)}),(0,Ha.jsx)(h,{label:"Eaves LF",value:l(n.eavesLf)})]}),(0,Ha.jsxs)(d,{title:"Ventilation & Flow",icon:x,children:[(0,Ha.jsx)(h,{label:"Ridge Vents",value:l(n.ridgeVents)}),(0,Ha.jsx)(h,{label:"Turbine",value:l(n.turbine)}),(0,Ha.jsx)(h,{label:"Rime Flow",value:l(n.rimeFlow)})]}),(0,Ha.jsxs)(d,{title:"Ridge & Valley Components",icon:x,children:[(0,Ha.jsx)(h,{label:"High Profile Ridge Cap",value:l(n.highProfileRidgeCap)}),(0,Ha.jsx)(h,{label:"Valley Metal",value:l(n.valleyMetal)})]}),(0,Ha.jsxs)(d,{title:"Pipes",icon:x,children:[(0,Ha.jsx)(h,{label:'Pipes [1 1/2"]',value:l(n.pipes1Half)}),(0,Ha.jsx)(h,{label:'Pipes [2"]',value:l(n.pipes2)}),(0,Ha.jsx)(h,{label:'Pipes [3"]',value:l(n.pipes3)}),(0,Ha.jsx)(h,{label:'Pipes [4"]',value:l(n.pipes4)})]}),(0,Ha.jsxs)(d,{title:"Roof Features",icon:x,children:[(0,Ha.jsx)(h,{label:"Gables",value:l(n.gables)}),(0,Ha.jsx)(h,{label:"Turtle Backs",value:l(n.turtleBacks)}),(0,Ha.jsx)(h,{label:"Satellite",value:l(n.satellite)}),(0,Ha.jsx)(h,{label:"Chimney",value:l(n.chimney)}),(0,Ha.jsx)(h,{label:"Solar",value:l(n.solar)}),(0,Ha.jsx)(h,{label:"Swamp Cooler",value:l(n.swampCooler)})]}),(0,Ha.jsxs)(d,{title:"Gutters & Additional",icon:x,children:[(0,Ha.jsx)(h,{label:"Gutters LF",value:l(n.guttersLf)}),(0,Ha.jsx)(h,{label:"Downspouts",value:l(n.downspouts)}),(0,Ha.jsx)(h,{label:"Gutter Guard LF",value:l(n.gutterGuardLf)}),(0,Ha.jsx)(h,{label:"Permanent Lighting",value:l(n.permanentLighting)})]}),n.notes&&(0,Ha.jsx)(d,{title:"Notes",icon:ks,children:(0,Ha.jsx)(h,{label:"Additional Notes",value:n.notes,fullWidth:!0})}),(0,Ha.jsxs)("div",{className:"mt-8 p-6 bg-blue-50 rounded-xl border border-blue-200",children:[(0,Ha.jsxs)("h4",{className:"text-lg font-semibold text-blue-900 mb-4 flex items-center",children:[(0,Ha.jsx)(x,{className:"w-5 h-5 mr-2"}),"Summary Totals"]}),(0,Ha.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Ha.jsxs)("div",{className:"text-center",children:[(0,Ha.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:l(n.sqFt)}),(0,Ha.jsx)("div",{className:"text-sm text-blue-700",children:"Total SQ FT"})]}),(0,Ha.jsxs)("div",{className:"text-center",children:[(0,Ha.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:l(n.ridgeLf)}),(0,Ha.jsx)("div",{className:"text-sm text-blue-700",children:"Ridge LF"})]}),(0,Ha.jsxs)("div",{className:"text-center",children:[(0,Ha.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:l(n.valleyLf)}),(0,Ha.jsx)("div",{className:"text-sm text-blue-700",children:"Valley LF"})]}),(0,Ha.jsxs)("div",{className:"text-center",children:[(0,Ha.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:u(n.dabellaQuote)}),(0,Ha.jsx)("div",{className:"text-sm text-blue-700",children:"Quote Value"})]})]})]})]})]})})};const $s=function(){const[t,n]=(0,e.useState)(null),[r,a]=(0,e.useState)(!1);return(0,Ha.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[(0,Ha.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ha.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ha.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Google Sheets Connection"}),t&&(0,Ha.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(t.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[t.success?(0,Ha.jsx)(j,{className:"w-3 h-3 mr-1"}):(0,Ha.jsx)(C,{className:"w-3 h-3 mr-1"}),t.success?"Connected":"Error"]})]}),(0,Ha.jsxs)("button",{onClick:async()=>{a(!0),n(null);const e=await A.testConnection();n(e),a(!1)},disabled:r,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:[r?(0,Ha.jsx)(g,{className:"animate-spin w-4 h-4 mr-2"}):(0,Ha.jsx)(Xa,{className:"w-4 h-4 mr-2"}),"Test"]})]}),t&&(0,Ha.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[t.message,t.success&&t.rowCount&&" (".concat(t.rowCount," rows)")]})]})};const Ys=function(e){let{error:t}=e;return(0,Ha.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-red-50 p-4",children:(0,Ha.jsxs)("div",{className:"text-center bg-white p-8 rounded-lg shadow-lg max-w-lg",children:[(0,Ha.jsx)(C,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,Ha.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Application Configuration Error"}),(0,Ha.jsx)("p",{className:"text-gray-600 mb-4",children:"The application could not start because a required configuration variable is missing or invalid."}),(0,Ha.jsxs)("div",{className:"bg-red-100 text-red-700 text-left p-3 rounded-md text-sm",children:[(0,Ha.jsx)("strong",{children:"Details:"})," ",t]}),(0,Ha.jsx)("p",{className:"text-gray-500 mt-4 text-sm",children:"Please ensure all `REACT_APP_*` variables are set correctly in your Vercel project settings and redeploy."})]})})},Xs=(0,e.createContext)(null),Zs={didCatch:!1,error:null};class ei extends e.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Zs}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var t,n,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];null===(t=(n=this.props).onReset)||void 0===t||t.call(n,{args:a,reason:"imperative-api"}),this.setState(Zs)}}componentDidCatch(e,t){var n,r;null===(n=(r=this.props).onError)||void 0===n||n.call(r,e,t)}componentDidUpdate(e,t){const{didCatch:n}=this.state,{resetKeys:r}=this.props;var a,s;n&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some((e,n)=>!Object.is(e,t[n]))}(e.resetKeys,r)&&(null===(a=(s=this.props).onReset)||void 0===a||a.call(s,{next:r,prev:e.resetKeys,reason:"keys"}),this.setState(Zs))}render(){const{children:t,fallbackRender:n,FallbackComponent:r,fallback:a}=this.props,{didCatch:s,error:i}=this.state;let o=t;if(s){const t={error:i,resetErrorBoundary:this.resetErrorBoundary};if("function"===typeof n)o=n(t);else if(r)o=(0,e.createElement)(r,t);else{if(void 0===a)throw i;o=a}}return(0,e.createElement)(Xs.Provider,{value:{didCatch:s,error:i,resetErrorBoundary:this.resetErrorBoundary}},o)}}const ti=p("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ni=p("bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]),ri=t=>{let{error:n,resetErrorBoundary:r,componentStack:a}=t;const[s,i]=e.useState(!1),[o,l]=e.useState(!1);return(0,Ha.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center p-4",children:(0,Ha.jsxs)("div",{className:"max-w-2xl w-full bg-white rounded-xl shadow-2xl border border-red-200",children:[(0,Ha.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white p-6 rounded-t-xl",children:(0,Ha.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ha.jsx)("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,Ha.jsx)(k,{className:"w-6 h-6"})}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("h1",{className:"text-xl font-bold",children:"System Error Detected"}),(0,Ha.jsx)("p",{className:"text-red-100",children:"The Ultimate CRM encountered an unexpected error"})]})]})}),(0,Ha.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Ha.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,Ha.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Ha.jsx)(ti,{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"}),(0,Ha.jsxs)("div",{className:"flex-1",children:[(0,Ha.jsx)("h3",{className:"font-semibold text-red-800 mb-1",children:"Error Details"}),(0,Ha.jsx)("p",{className:"text-red-700 text-sm font-mono bg-red-100 p-2 rounded",children:n.message})]})]})}),(0,Ha.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,Ha.jsx)("h3",{className:"font-semibold text-blue-800 mb-3",children:"Troubleshooting Steps"}),(0,Ha.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-blue-700 text-sm",children:[(0,Ha.jsx)("li",{children:"Try refreshing the page to reload the application"}),(0,Ha.jsx)("li",{children:"Clear your browser cache and cookies"}),(0,Ha.jsx)("li",{children:"Check your internet connection"}),(0,Ha.jsx)("li",{children:"Disable browser extensions temporarily"}),(0,Ha.jsx)("li",{children:"Contact support if the problem persists"})]})]}),(0,Ha.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,Ha.jsxs)("button",{onClick:r,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,Ha.jsx)(Xa,{className:"w-4 h-4"}),(0,Ha.jsx)("span",{children:"Try Again"})]}),(0,Ha.jsxs)("button",{onClick:async()=>{l(!0);try{const e={message:n.message,stack:n.stack,componentStack:a,url:window.location.href,userAgent:navigator.userAgent,timestamp:(new Date).toISOString(),userId:localStorage.getItem("userId")||"anonymous"};console.error("Error Report:",e),setTimeout(()=>l(!1),1e3)}catch(reportError){console.error("Failed to report error:",reportError),l(!1)}},disabled:o,className:"flex items-center space-x-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50",children:[(0,Ha.jsx)(ni,{className:"w-4 h-4"}),(0,Ha.jsx)("span",{children:o?"Reporting...":"Report Error"})]}),(0,Ha.jsxs)("button",{onClick:()=>window.location.reload(),className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[(0,Ha.jsx)(Xa,{className:"w-4 h-4"}),(0,Ha.jsx)("span",{children:"Reload Page"})]})]}),(0,Ha.jsxs)("div",{className:"border-t pt-4",children:[(0,Ha.jsxs)("button",{onClick:()=>i(!s),className:"text-gray-600 hover:text-gray-800 text-sm font-medium",children:[s?"Hide":"Show"," Technical Details"]}),s&&(0,Ha.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Stack Trace"}),(0,Ha.jsx)("pre",{className:"text-xs bg-gray-100 p-3 rounded overflow-x-auto text-gray-700 font-mono",children:n.stack})]}),a&&(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Component Stack"}),(0,Ha.jsx)("pre",{className:"text-xs bg-gray-100 p-3 rounded overflow-x-auto text-gray-700 font-mono",children:a})]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Environment"}),(0,Ha.jsxs)("div",{className:"text-xs bg-gray-100 p-3 rounded text-gray-700 space-y-1",children:[(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("strong",{children:"URL:"})," ",window.location.href]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("strong",{children:"User Agent:"})," ",navigator.userAgent]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("strong",{children:"Timestamp:"})," ",(new Date).toISOString()]})]})]})]})]})]}),(0,Ha.jsx)("div",{className:"bg-gray-50 px-6 py-3 rounded-b-xl border-t text-center",children:(0,Ha.jsxs)("p",{className:"text-xs text-gray-500",children:["Ultimate Lomanco CRM Automation System - Error ID: ",Date.now().toString(36)]})})]})})},ai=(e,t)=>{console.group("\ud83d\udea8 Error Boundary Triggered"),console.error("Error:",e),console.error("Error Info:",t),console.error("Component Stack:",t.componentStack),console.error("Error Stack:",e.stack),console.groupEnd();const n={message:e.message,stack:e.stack,componentStack:t.componentStack,timestamp:(new Date).toISOString(),url:window.location.href,userAgent:navigator.userAgent};try{const e=JSON.parse(localStorage.getItem("errorLogs")||"[]");e.push(n),e.length>10&&e.splice(0,e.length-10),localStorage.setItem("errorLogs",JSON.stringify(e))}catch(r){console.warn("Failed to store error log:",r)}},si=e=>{let{children:t,fallback:n}=e;return(0,Ha.jsx)(ei,{FallbackComponent:n||ri,onError:ai,onReset:()=>{window.location.hash="",window.location.reload()},children:t})},ii=si,oi=p("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),li=p("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),ci=p("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const ui=function(t){let{addNotification:n}=t;const[r,a]=(0,e.useState)({overall:"unknown",components:{},lastChecked:null}),[s,i]=(0,e.useState)({responseTime:0,successRate:0,totalRequests:0,errors:0}),[o,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(!1),d=(0,e.useCallback)(async()=>{try{const e=Date.now(),t=await A.testConnection(),n=Date.now()-e;return{status:t.success?"healthy":"error",responseTime:n,details:t.success?"Connected successfully":t.message,lastChecked:(new Date).toISOString()}}catch(e){return{status:"error",responseTime:0,details:e.message,lastChecked:(new Date).toISOString()}}},[]),h=(0,e.useCallback)(async()=>{try{const e=Date.now(),t=await A.calculateLomacoVents(2e3),n=Date.now()-e;return{status:t.success?"healthy":"warning",responseTime:n,details:t.success?"Calculation successful via ".concat(t.calculationMethod):t.message,method:t.success?t.calculationMethod:null,lastChecked:(new Date).toISOString()}}catch(e){return{status:"error",responseTime:0,details:e.message,lastChecked:(new Date).toISOString()}}},[]),f=(0,e.useCallback)(async()=>{const e=[{name:"Job Counts",action:()=>A.fetchJobCounts()},{name:"Connection Test",action:()=>A.testConnection()}],t={};let n=0,r=0;for(const s of e)try{const e=Date.now(),a=await s.action(),i=Date.now()-e;n+=i,a.success?(r++,t[s.name]={status:"healthy",responseTime:i,details:"Endpoint responding normally"}):t[s.name]={status:"warning",responseTime:i,details:a.message||"Endpoint returned error"}}catch(a){t[s.name]={status:"error",responseTime:0,details:a.message}}return{status:r===e.length?"healthy":r>0?"warning":"error",averageResponseTime:n/e.length,healthyEndpoints:r,totalEndpoints:e.length,endpoints:t,lastChecked:(new Date).toISOString()}},[]),m=(0,e.useCallback)(async()=>{l(!0);try{const[e,t,n]=await Promise.all([d(),h(),f()]),r={googleSheets:e,lomacoCalculation:t,apiEndpoints:n},s=Object.values(r).map(e=>e.status),o=s.every(e=>"healthy"===e)?"healthy":s.some(e=>"healthy"===e)?"warning":"error";a({overall:o,components:r,lastChecked:(new Date).toISOString()});const l=(e.responseTime+t.responseTime+n.averageResponseTime)/3;i(e=>({responseTime:Math.round(l),successRate:Math.round(s.filter(e=>"healthy"===e).length/s.length*100),totalRequests:e.totalRequests+3,errors:e.errors+s.filter(e=>"error"===e).length}))}catch(e){n("System check failed: ".concat(e.message),"error")}finally{l(!1)}},[d,h,f,n]);(0,e.useEffect)(()=>{let e;return c&&(e=setInterval(m,3e4)),()=>{e&&clearInterval(e)}},[c,m]),(0,e.useEffect)(()=>{m()},[m]);const p=e=>{switch(e){case"healthy":return(0,Ha.jsx)(j,{className:"w-5 h-5 text-green-600"});case"warning":return(0,Ha.jsx)(ti,{className:"w-5 h-5 text-yellow-600"});case"error":return(0,Ha.jsx)(ti,{className:"w-5 h-5 text-red-600"});default:return(0,Ha.jsx)(I,{className:"w-5 h-5 text-gray-600"})}},g=e=>{switch(e){case"healthy":return"text-green-800 bg-green-50 border-green-200";case"warning":return"text-yellow-800 bg-yellow-50 border-yellow-200";case"error":return"text-red-800 bg-red-50 border-red-200";default:return"text-gray-800 bg-gray-50 border-gray-200"}},y=e=>e<1e3?"".concat(e,"ms"):"".concat((e/1e3).toFixed(2),"s");return(0,Ha.jsxs)("div",{className:"space-y-6",children:[(0,Ha.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)(w,{className:"h-6 w-6 text-blue-600 mr-3"}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"System Monitoring Dashboard"}),(0,Ha.jsx)("p",{className:"text-sm text-gray-600",children:"Real-time monitoring of Lomanco automation system"})]})]}),(0,Ha.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ha.jsx)("button",{onClick:()=>u(!c),className:"px-3 py-2 text-xs font-medium border rounded-lg transition-colors ".concat(c?"border-blue-300 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),children:c?"Stop Auto-Refresh":"Start Auto-Refresh"}),(0,Ha.jsx)("button",{onClick:m,disabled:o,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 transition-colors",children:o?(0,Ha.jsxs)(Ha.Fragment,{children:[(0,Ha.jsx)(I,{className:"w-4 h-4 mr-2 animate-spin"}),"Checking..."]}):(0,Ha.jsxs)(Ha.Fragment,{children:[(0,Ha.jsx)(w,{className:"w-4 h-4 mr-2"}),"Run Check"]})})]})]}),(0,Ha.jsx)("div",{className:"p-6 rounded-lg border ".concat(g(r.overall)),children:(0,Ha.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ha.jsxs)("div",{className:"flex items-center",children:[p(r.overall),(0,Ha.jsxs)("div",{className:"ml-3",children:[(0,Ha.jsx)("h4",{className:"text-lg font-medium",children:"System Status"}),(0,Ha.jsx)("p",{className:"text-sm capitalize",children:r.overall||"Checking..."})]})]}),(0,Ha.jsxs)("div",{className:"text-right",children:[(0,Ha.jsx)("div",{className:"text-sm text-gray-600",children:"Last Checked"}),(0,Ha.jsx)("div",{className:"text-sm font-medium",children:r.lastChecked?new Date(r.lastChecked).toLocaleTimeString():"Never"})]})]})}),(0,Ha.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)(oi,{className:"h-8 w-8 text-blue-600"})}),(0,Ha.jsxs)("div",{className:"ml-4",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Response Time"}),(0,Ha.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:y(s.responseTime)})]})]})}),(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)(Ja,{className:"h-8 w-8 text-green-600"})}),(0,Ha.jsxs)("div",{className:"ml-4",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),(0,Ha.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[s.successRate,"%"]})]})]})}),(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)(li,{className:"h-8 w-8 text-purple-600"})}),(0,Ha.jsxs)("div",{className:"ml-4",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Requests"}),(0,Ha.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.totalRequests.toLocaleString()})]})]})}),(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("div",{className:"flex-shrink-0",children:(0,Ha.jsx)(ti,{className:"h-8 w-8 text-red-600"})}),(0,Ha.jsxs)("div",{className:"ml-4",children:[(0,Ha.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Errors"}),(0,Ha.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.errors})]})]})})]}),(0,Ha.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,Ha.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Component Status"}),(0,Ha.jsxs)("div",{className:"space-y-4",children:[r.components.googleSheets&&(0,Ha.jsx)("div",{className:"p-4 rounded-lg border ".concat(g(r.components.googleSheets.status)),children:(0,Ha.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)(S,{className:"w-5 h-5 mr-3"}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("div",{className:"font-medium",children:"Google Sheets Connection"}),(0,Ha.jsx)("div",{className:"text-sm",children:r.components.googleSheets.details})]})]}),(0,Ha.jsxs)("div",{className:"text-right",children:[p(r.components.googleSheets.status),(0,Ha.jsx)("div",{className:"text-sm mt-1",children:y(r.components.googleSheets.responseTime)})]})]})}),r.components.lomacoCalculation&&(0,Ha.jsx)("div",{className:"p-4 rounded-lg border ".concat(g(r.components.lomacoCalculation.status)),children:(0,Ha.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)(ci,{className:"w-5 h-5 mr-3"}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("div",{className:"font-medium",children:"Lomanco Calculation Engine"}),(0,Ha.jsx)("div",{className:"text-sm",children:r.components.lomacoCalculation.details}),r.components.lomacoCalculation.method&&(0,Ha.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Method: ",r.components.lomacoCalculation.method]})]})]}),(0,Ha.jsxs)("div",{className:"text-right",children:[p(r.components.lomacoCalculation.status),(0,Ha.jsx)("div",{className:"text-sm mt-1",children:y(r.components.lomacoCalculation.responseTime)})]})]})}),r.components.apiEndpoints&&(0,Ha.jsxs)("div",{className:"p-4 rounded-lg border ".concat(g(r.components.apiEndpoints.status)),children:[(0,Ha.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)(li,{className:"w-5 h-5 mr-3"}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("div",{className:"font-medium",children:"API Endpoints"}),(0,Ha.jsxs)("div",{className:"text-sm",children:[r.components.apiEndpoints.healthyEndpoints,"/",r.components.apiEndpoints.totalEndpoints," endpoints healthy"]})]})]}),(0,Ha.jsxs)("div",{className:"text-right",children:[p(r.components.apiEndpoints.status),(0,Ha.jsx)("div",{className:"text-sm mt-1",children:y(r.components.apiEndpoints.averageResponseTime)})]})]}),r.components.apiEndpoints.endpoints&&(0,Ha.jsx)("div",{className:"mt-3 space-y-2",children:Object.entries(r.components.apiEndpoints.endpoints).map(e=>{let[t,n]=e;return(0,Ha.jsxs)("div",{className:"flex items-center justify-between text-sm pl-8",children:[(0,Ha.jsx)("span",{children:t}),(0,Ha.jsxs)("div",{className:"flex items-center",children:[p(n.status),(0,Ha.jsx)("span",{className:"ml-2",children:y(n.responseTime)})]})]},t)})})]})]})]})]})},di=p("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const hi=function(t){let{jobCounts:n,leads:r,addNotification:a}=t;const[s,i]=(0,e.useState)(null),[l,c]=(0,e.useState)("30"),[u,d]=(0,e.useState)(["revenue","automation","performance"]),[h,f]=(0,e.useState)(!1),[m,p]=(0,e.useState)(null),g=(0,e.useCallback)(()=>{const e=parseInt(l),t=new Date;t.setDate(t.getDate()-e);const a=n.filter(e=>new Date(e.date)>=t),s=r.filter(e=>new Date(e.createdDate||e.date)>=t),i={totalQuoteValue:s.reduce((e,t)=>e+(parseFloat(String(t.dabellaQuote||0).replace(/[$,]/g,""))||0),0),averageQuoteValue:0,quotedLeads:s.filter(e=>"Quoted"===e.disposition).length,closedSoldValue:s.filter(e=>"Closed Sold"===e.disposition).reduce((e,t)=>e+(parseFloat(String(t.dabellaQuote||0).replace(/[$,]/g,""))||0),0),conversionRate:0};i.quotedLeads>0&&(i.averageQuoteValue=i.totalQuoteValue/i.quotedLeads),s.length>0&&(i.conversionRate=s.filter(e=>"Closed Sold"===e.disposition).length/s.length*100);const o=a.filter(e=>e.ventCalculationSource&&"manual_entry"!==e.ventCalculationSource),c={totalCalculations:a.filter(e=>e.ridgeVents||e.turbineVents||e.rimeFlow).length,automatedCalculations:o.length,manualCalculations:a.filter(e=>"manual_entry"===e.ventCalculationSource).length,automationRate:0,webAutomationSuccess:o.filter(e=>"lomanco_web"===e.ventCalculationSource).length,mathFallbackUsed:o.filter(e=>"mathematical_formula"===e.ventCalculationSource).length};c.totalCalculations>0&&(c.automationRate=c.automatedCalculations/c.totalCalculations*100);const u={totalJobCounts:a.length,totalLeads:s.length,averageSqFt:a.reduce((e,t)=>e+(parseFloat(t.sqFt)||0),0)/a.length||0,totalSqFt:a.reduce((e,t)=>e+(parseFloat(t.sqFt)||0),0),leadSources:{},qualityDistribution:{},dispositionDistribution:{}};s.forEach(e=>{const t=e.leadSource||"Unknown";u.leadSources[t]=(u.leadSources[t]||0)+1}),s.forEach(e=>{const t=e.quality||"Unknown";u.qualityDistribution[t]=(u.qualityDistribution[t]||0)+1}),s.forEach(e=>{const t=e.disposition||"Unknown";u.dispositionDistribution[t]=(u.dispositionDistribution[t]||0)+1});const d={dailyJobCounts:{},dailyRevenue:{},dailyAutomation:{}};for(let n=0;n<e;n++){const e=new Date;e.setDate(e.getDate()-n);const t=e.toISOString().split("T")[0],r=a.filter(e=>e.date===t),i=s.filter(e=>(e.date||e.createdDate||"").split("T")[0]===t);d.dailyJobCounts[t]=r.length,d.dailyRevenue[t]=i.reduce((e,t)=>e+(parseFloat(String(t.dabellaQuote||0).replace(/[$,]/g,""))||0),0),d.dailyAutomation[t]=r.filter(e=>e.ventCalculationSource&&"manual_entry"!==e.ventCalculationSource).length}const h={manualTimePerCalculation:5,automatedTimePerCalculation:.5,timeSavedPerCalculation:4.5,totalTimeSaved:4.5*c.automatedCalculations,hourlyCost:30,totalCostSavings:4.5*c.automatedCalculations/60*30};return{revenue:i,automation:c,performance:u,trends:d,roi:h,generatedAt:(new Date).toISOString(),timeRange:e}},[n,r,l]);(0,e.useEffect)(()=>{if(n.length>0||r.length>0){const e=g();i(e)}},[n,r,l,g]);const v=(0,e.useCallback)(async()=>{f(!0);try{const e={metadata:{generatedAt:(new Date).toISOString(),timeRange:"".concat(l," days"),totalRecords:n.length+r.length,reportVersion:"2.0"},analytics:s,rawData:{jobCounts:n.map(e=>o(o({},e),{},{phoneNumber:e.phoneNumber?"***-***-".concat(e.phoneNumber.slice(-4)):"",email:e.email?"***@".concat(e.email.split("@")[1]):""})),leads:r.map(e=>o(o({},e),{},{phoneNumber:e.phoneNumber?"***-***-".concat(e.phoneNumber.slice(-4)):"",email:e.email?"***@".concat(e.email.split("@")[1]):""}))}},t=JSON.stringify(e,null,2),i="data:application/json;charset=utf-8,"+encodeURIComponent(t),c="crm-analytics-report-".concat((new Date).toISOString().slice(0,10),".json"),u=document.createElement("a");u.setAttribute("href",i),u.setAttribute("download",c),u.click(),a("Analytics report exported successfully","success")}catch(e){a("Export failed: ".concat(e.message),"error")}finally{f(!1)}},[s,n,r,l,a]),b=(0,e.useCallback)(e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),[]),x=(0,e.useCallback)(e=>"".concat(Math.round(100*e)/100,"%"),[]),w=(0,e.useMemo)(()=>s?[{id:"revenue",title:"Total Revenue Pipeline",value:b(s.revenue.totalQuoteValue),change:"+12.5%",icon:y,color:"green"},{id:"automation",title:"Automation Success Rate",value:x(s.automation.automationRate),change:"+8.3%",icon:oi,color:"blue"},{id:"conversion",title:"Lead Conversion Rate",value:x(s.revenue.conversionRate),change:"+5.1%",icon:Qa,color:"purple"},{id:"efficiency",title:"Time Saved (Hours)",value:Math.round(s.roi.totalTimeSaved/60),change:"".concat(s.automation.automatedCalculations," calcs"),icon:I,color:"orange"}]:[],[s,b,x]);return s?(0,Ha.jsxs)("div",{className:"space-y-6",children:[(0,Ha.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)(di,{className:"h-6 w-6 text-purple-600 mr-3"}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Advanced Analytics Dashboard"}),(0,Ha.jsx)("p",{className:"text-sm text-gray-600",children:"Comprehensive business intelligence and insights"})]})]}),(0,Ha.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ha.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[(0,Ha.jsx)("option",{value:"7",children:"Last 7 days"}),(0,Ha.jsx)("option",{value:"30",children:"Last 30 days"}),(0,Ha.jsx)("option",{value:"90",children:"Last 90 days"}),(0,Ha.jsx)("option",{value:"365",children:"Last year"})]}),(0,Ha.jsx)("button",{onClick:v,disabled:h,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 disabled:opacity-50 transition-colors",children:h?(0,Ha.jsxs)(Ha.Fragment,{children:[(0,Ha.jsx)(I,{className:"w-4 h-4 mr-2 animate-spin"}),"Exporting..."]}):(0,Ha.jsxs)(Ha.Fragment,{children:[(0,Ha.jsx)(xs,{className:"w-4 h-4 mr-2"}),"Export Report"]})})]})]}),(0,Ha.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:w.map(e=>(0,Ha.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,Ha.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ha.jsx)("div",{className:"flex items-center",children:(0,Ha.jsx)("div",{className:"flex-shrink-0 p-3 rounded-lg bg-".concat(e.color,"-100"),children:(0,Ha.jsx)(e.icon,{className:"h-6 w-6 text-".concat(e.color,"-600")})})}),(0,Ha.jsxs)("div",{className:"text-right",children:[(0,Ha.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.value}),(0,Ha.jsx)("div",{className:"text-sm text-green-600",children:e.change})]})]}),(0,Ha.jsx)("div",{className:"mt-4",children:(0,Ha.jsx)("h4",{className:"text-sm font-medium text-gray-600",children:e.title})})]},e.id))}),(0,Ha.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Ha.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,Ha.jsxs)("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,Ha.jsx)(y,{className:"w-5 h-5 mr-2 text-green-600"}),"Revenue Analytics"]}),(0,Ha.jsxs)("div",{className:"space-y-4",children:[(0,Ha.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ha.jsx)("span",{className:"text-sm text-gray-600",children:"Total Quote Value"}),(0,Ha.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:b(s.revenue.totalQuoteValue)})]}),(0,Ha.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ha.jsx)("span",{className:"text-sm text-gray-600",children:"Average Quote"}),(0,Ha.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:b(s.revenue.averageQuoteValue)})]}),(0,Ha.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ha.jsx)("span",{className:"text-sm text-gray-600",children:"Closed Sold Value"}),(0,Ha.jsx)("span",{className:"text-lg font-semibold text-green-600",children:b(s.revenue.closedSoldValue)})]}),(0,Ha.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ha.jsx)("span",{className:"text-sm text-gray-600",children:"Conversion Rate"}),(0,Ha.jsx)("span",{className:"text-lg font-semibold text-blue-600",children:x(s.revenue.conversionRate)})]})]})]}),(0,Ha.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,Ha.jsxs)("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,Ha.jsx)(oi,{className:"w-5 h-5 mr-2 text-blue-600"}),"Automation Performance"]}),(0,Ha.jsxs)("div",{className:"space-y-4",children:[(0,Ha.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ha.jsx)("span",{className:"text-sm text-gray-600",children:"Total Calculations"}),(0,Ha.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:s.automation.totalCalculations})]}),(0,Ha.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ha.jsx)("span",{className:"text-sm text-gray-600",children:"Automated"}),(0,Ha.jsx)("span",{className:"text-lg font-semibold text-green-600",children:s.automation.automatedCalculations})]}),(0,Ha.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ha.jsx)("span",{className:"text-sm text-gray-600",children:"Web Automation Success"}),(0,Ha.jsx)("span",{className:"text-lg font-semibold text-blue-600",children:s.automation.webAutomationSuccess})]}),(0,Ha.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ha.jsx)("span",{className:"text-sm text-gray-600",children:"Automation Rate"}),(0,Ha.jsx)("span",{className:"text-lg font-semibold text-purple-600",children:x(s.automation.automationRate)})]})]})]})]}),(0,Ha.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg border p-6",children:[(0,Ha.jsxs)("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,Ha.jsx)(Ja,{className:"w-5 h-5 mr-2 text-green-600"}),"Return on Investment (ROI) Analysis"]}),(0,Ha.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,Ha.jsxs)("div",{className:"text-center",children:[(0,Ha.jsx)("div",{className:"text-3xl font-bold text-green-600",children:Math.round(s.roi.totalTimeSaved/60)}),(0,Ha.jsx)("div",{className:"text-sm text-gray-600",children:"Hours Saved"})]}),(0,Ha.jsxs)("div",{className:"text-center",children:[(0,Ha.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:b(s.roi.totalCostSavings)}),(0,Ha.jsx)("div",{className:"text-sm text-gray-600",children:"Cost Savings"})]}),(0,Ha.jsxs)("div",{className:"text-center",children:[(0,Ha.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:s.automation.automatedCalculations}),(0,Ha.jsx)("div",{className:"text-sm text-gray-600",children:"Automated Tasks"})]}),(0,Ha.jsxs)("div",{className:"text-center",children:[(0,Ha.jsx)("div",{className:"text-3xl font-bold text-orange-600",children:Math.round(10*s.roi.timeSavedPerCalculation)/10}),(0,Ha.jsx)("div",{className:"text-sm text-gray-600",children:"Min/Calculation"})]})]})]}),(0,Ha.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Ha.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,Ha.jsxs)("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,Ha.jsx)(Wa,{className:"w-5 h-5 mr-2 text-purple-600"}),"Lead Sources"]}),(0,Ha.jsx)("div",{className:"space-y-3",children:Object.entries(s.performance.leadSources).map(e=>{let[t,n]=e;return(0,Ha.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ha.jsx)("span",{className:"text-sm text-gray-600",children:t}),(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("span",{className:"text-sm font-medium text-gray-900 mr-2",children:n}),(0,Ha.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:(0,Ha.jsx)("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"".concat(n/s.performance.totalLeads*100,"%")}})})]})]},t)})})]}),(0,Ha.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,Ha.jsxs)("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,Ha.jsx)(Qa,{className:"w-5 h-5 mr-2 text-orange-600"}),"Lead Quality"]}),(0,Ha.jsx)("div",{className:"space-y-3",children:Object.entries(s.performance.qualityDistribution).map(e=>{let[t,n]=e;return(0,Ha.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ha.jsx)("span",{className:"text-sm text-gray-600",children:t}),(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("span",{className:"text-sm font-medium text-gray-900 mr-2",children:n}),(0,Ha.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:(0,Ha.jsx)("div",{className:"h-2 rounded-full ".concat("Hot"===t?"bg-red-500":"Warm"===t?"bg-yellow-500":"bg-blue-500"),style:{width:"".concat(n/s.performance.totalLeads*100,"%")}})})]})]},t)})})]}),(0,Ha.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,Ha.jsxs)("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,Ha.jsx)(ti,{className:"w-5 h-5 mr-2 text-red-600"}),"Disposition Status"]}),(0,Ha.jsx)("div",{className:"space-y-3",children:Object.entries(s.performance.dispositionDistribution).map(e=>{let[t,n]=e;return(0,Ha.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ha.jsx)("span",{className:"text-sm text-gray-600",children:t}),(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)("span",{className:"text-sm font-medium text-gray-900 mr-2",children:n}),(0,Ha.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:(0,Ha.jsx)("div",{className:"h-2 rounded-full ".concat("Closed Sold"===t?"bg-green-500":"Quoted"===t?"bg-blue-500":"Closed Lost"===t?"bg-red-500":"bg-gray-500"),style:{width:"".concat(n/s.performance.totalLeads*100,"%")}})})]})]},t)})})]})]}),(0,Ha.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,Ha.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Summary Statistics"}),(0,Ha.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 text-center",children:[(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:s.performance.totalJobCounts}),(0,Ha.jsx)("div",{className:"text-xs text-gray-600",children:"Job Counts"})]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("div",{className:"text-2xl font-bold text-green-600",children:s.performance.totalLeads}),(0,Ha.jsx)("div",{className:"text-xs text-gray-600",children:"Total Leads"})]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:Math.round(s.performance.averageSqFt).toLocaleString()}),(0,Ha.jsx)("div",{className:"text-xs text-gray-600",children:"Avg SQ FT"})]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:Math.round(s.performance.totalSqFt).toLocaleString()}),(0,Ha.jsx)("div",{className:"text-xs text-gray-600",children:"Total SQ FT"})]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("div",{className:"text-2xl font-bold text-red-600",children:s.revenue.quotedLeads}),(0,Ha.jsx)("div",{className:"text-xs text-gray-600",children:"Quoted Leads"})]}),(0,Ha.jsxs)("div",{children:[(0,Ha.jsx)("div",{className:"text-2xl font-bold text-indigo-600",children:x(s.automation.automationRate)}),(0,Ha.jsx)("div",{className:"text-xs text-gray-600",children:"Automation"})]})]})]})]}):(0,Ha.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,Ha.jsxs)("div",{className:"text-center py-8",children:[(0,Ha.jsx)(di,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,Ha.jsx)("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading Analytics..."}),(0,Ha.jsx)("p",{className:"text-sm text-gray-500",children:"Processing data to generate insights"})]})})};var fi=n(809);const mi=Symbol.for("Dexie"),pi=globalThis[mi]||(globalThis[mi]=fi);if(fi.semVer!==pi.semVer)throw new Error("Two different versions of Dexie loaded in the same app: ".concat(fi.semVer," and ").concat(pi.semVer));const{liveQuery:gi,mergeRanges:yi,rangesOverlap:vi,RangeSet:bi,cmp:xi,Entity:wi,PropModification:ki,replacePrefix:_i,add:Ni,remove:Si,DexieYProvider:Ei}=pi,ji=pi;const Ci=new class{constructor(){this.db=new ji("UltimateCRMCache"),this.initializeDatabase(),this.initializeInMemoryCache()}initializeDatabase(){this.db.version(1).stores({cache:"++id, key, value, expiresAt, createdAt, accessCount, lastAccessed, tags",sessions:"++id, sessionId, data, expiresAt, createdAt",calculations:"++id, sqft, ridgeVents, turbineVents, rimeFlow, method, timestamp",metrics:"++id, operation, duration, success, timestamp, metadata"}),this.db.open().catch(e=>{console.error("Failed to open cache database:",e)})}initializeInMemoryCache(){this.memoryCache=new Map,this.cacheStats={hits:0,misses:0,sets:0,deletes:0,evictions:0},this.maxMemorySize=1e3,this.cleanupInterval=setInterval(()=>this.cleanup(),3e5)}async set(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{ttl:r=36e5,tags:a=[],priority:s=1,compress:i=!1}=n,o=Date.now(),l=o+r,c={key:e,value:i?this.compress(t):t,expiresAt:l,createdAt:o,accessCount:0,lastAccessed:o,tags:Array.isArray(a)?a:[a],priority:s,compressed:i};try{return this.memoryCache.set(e,c),this.enforceMemoryLimit(),await this.db.cache.put(c),this.cacheStats.sets++,!0}catch(u){return console.error("Cache set error:",u),!1}}async get(e){const t=performance.now();try{let n=this.memoryCache.get(e);if(!n){const t=await this.db.cache.where("key").equals(e).first();t&&(n=t,this.memoryCache.set(e,n))}return n?Date.now()>n.expiresAt?(await this.delete(e),this.cacheStats.misses++,this.recordMetric("cache_get",performance.now()-t,!1),null):(n.accessCount++,n.lastAccessed=Date.now(),this.db.cache.put(n).catch(e=>{console.warn("Failed to update cache stats:",e)}),this.cacheStats.hits++,this.recordMetric("cache_get",performance.now()-t,!0),n.compressed?this.decompress(n.value):n.value):(this.cacheStats.misses++,this.recordMetric("cache_get",performance.now()-t,!1),null)}catch(n){return console.error("Cache get error:",n),this.cacheStats.misses++,this.recordMetric("cache_get",performance.now()-t,!1),null}}async delete(e){try{return this.memoryCache.delete(e),await this.db.cache.where("key").equals(e).delete(),this.cacheStats.deletes++,!0}catch(t){return console.error("Cache delete error:",t),!1}}async deleteByTags(e){const t=Array.isArray(e)?e:[e];try{const e=(await this.db.cache.toArray()).filter(e=>e.tags.some(e=>t.includes(e))).map(e=>e.key);return e.forEach(e=>this.memoryCache.delete(e)),await this.db.cache.where("key").anyOf(e).delete(),this.cacheStats.deletes+=e.length,e.length}catch(n){return console.error("Cache delete by tags error:",n),0}}async mget(e){const t={},n=e.map(async e=>{const n=await this.get(e);t[e]=n});return await Promise.all(n),t}async mset(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.entries(e).map(e=>{let[n,r]=e;return this.set(n,r,t)});return(await Promise.all(n)).every(e=>!0===e)}async exists(e){try{const t=this.memoryCache.get(e)||await this.db.cache.where("key").equals(e).first();return t&&Date.now()<=t.expiresAt}catch(t){return console.error("Cache exists error:",t),!1}}async keys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";try{const t=await this.db.cache.toCollection().primaryKeys();if("*"===e)return t;const n=new RegExp(e.replace(/\*/g,".*"));return t.filter(e=>n.test(e))}catch(t){return console.error("Cache keys error:",t),[]}}async clear(){try{return this.memoryCache.clear(),await this.db.cache.clear(),this.resetStats(),!0}catch(e){return console.error("Cache clear error:",e),!1}}async getStats(){try{const e=this.memoryCache.size,t=await this.db.cache.count(),n=this.cacheStats.hits/(this.cacheStats.hits+this.cacheStats.misses)||0;return o(o({},this.cacheStats),{},{memorySize:e,dbSize:t,hitRate:Math.round(100*n)/100,memoryUsage:"".concat(e,"/").concat(this.maxMemorySize)})}catch(e){return console.error("Cache stats error:",e),this.cacheStats}}async cleanup(){const e=Date.now();try{for(const[n,r]of this.memoryCache.entries())e>r.expiresAt&&(this.memoryCache.delete(n),this.cacheStats.evictions++);const t=await this.db.cache.where("expiresAt").below(e).delete();this.cacheStats.evictions+=t,console.log("Cache cleanup: removed ".concat(t," expired entries"))}catch(t){console.error("Cache cleanup error:",t)}}enforceMemoryLimit(){if(this.memoryCache.size<=this.maxMemorySize)return;const e=Array.from(this.memoryCache.entries()).sort((e,t)=>{let[,n]=e,[,r]=t;return n.lastAccessed-r.lastAccessed}),t=e.length-this.maxMemorySize;for(let n=0;n<t;n++)this.memoryCache.delete(e[n][0]),this.cacheStats.evictions++}compress(e){try{return JSON.stringify(e)}catch(t){return console.warn("Compression failed:",t),e}}decompress(e){try{return JSON.parse(e)}catch(t){return console.warn("Decompression failed:",t),e}}async recordMetric(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{await this.db.metrics.add({operation:e,duration:t,success:n,timestamp:Date.now(),metadata:r})}catch(a){console.warn("Failed to record metric:",a)}}resetStats(){this.cacheStats={hits:0,misses:0,sets:0,deletes:0,evictions:0}}async getMetrics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36e5;try{const t=Date.now()-e,n=(await this.db.metrics.where("timestamp").above(t).toArray()).reduce((e,t)=>(e[t.operation]||(e[t.operation]={count:0,totalDuration:0,successCount:0,failureCount:0}),e[t.operation].count++,e[t.operation].totalDuration+=t.duration,t.success?e[t.operation].successCount++:e[t.operation].failureCount++,e),{});return Object.keys(n).forEach(e=>{const t=n[e];t.avgDuration=t.totalDuration/t.count,t.successRate=t.successCount/t.count}),n}catch(t){return console.error("Failed to get metrics:",t),{}}}async cacheCalculation(e,t){const n="calculation:".concat(e),r=o(o({sqft:e},t),{},{timestamp:Date.now()});await Promise.all([this.set(n,r,{ttl:36e5,tags:["calculations"]}),this.db.calculations.add(r)])}async getCachedCalculation(e){const t="calculation:".concat(e);return await this.get(t)}destroy(){this.cleanupInterval&&clearInterval(this.cleanupInterval),this.memoryCache.clear(),this.db.close()}};const Ii=new class{constructor(){this.logLevels={ERROR:0,WARN:1,INFO:2,DEBUG:3,TRACE:4},this.currentLevel=this.logLevels.INFO,this.logBuffer=[],this.maxBufferSize=1e3,this.flushInterval=3e4,this.endpoints=[],this.metadata=this.collectMetadata(),this.initializeLogger()}initializeLogger(){setInterval(()=>this.flushLogs(),this.flushInterval),window.addEventListener("beforeunload",()=>this.flushLogs(!0)),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&this.flushLogs(!0)}),window.addEventListener("error",e=>{var t;this.error("Global Error",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:null===(t=e.error)||void 0===t?void 0:t.stack})}),window.addEventListener("unhandledrejection",e=>{this.error("Unhandled Promise Rejection",{reason:e.reason,promise:e.promise})})}collectMetadata(){return{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,screen:{width:window.screen.width,height:window.screen.height,colorDepth:window.screen.colorDepth},viewport:{width:window.innerWidth,height:window.innerHeight},url:window.location.href,referrer:document.referrer,timestamp:Date.now(),sessionId:this.getSessionId(),userId:this.getUserId()}}getSessionId(){let e=sessionStorage.getItem("loggerSessionId");return e||(e=this.generateId(),sessionStorage.setItem("loggerSessionId",e)),e}getUserId(){return localStorage.getItem("userId")||"anonymous"}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}setLevel(e){var t;"string"===typeof e?this.currentLevel=null!==(t=this.logLevels[e.toUpperCase()])&&void 0!==t?t:this.logLevels.INFO:this.currentLevel=e}addEndpoint(e){this.endpoints.push(e)}createLogEntry(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"general";return{id:this.generateId(),timestamp:Date.now(),level:e,message:t,category:r,data:this.sanitizeData(n),metadata:o(o({},this.metadata),{},{url:window.location.href,timestamp:Date.now()}),stack:this.captureStack()}}sanitizeData(e){try{return JSON.parse(JSON.stringify(e,(e,t)=>["password","token","apiKey","secret","auth"].some(t=>e.toLowerCase().includes(t))?"[REDACTED]":"function"===typeof t?"[Function: ".concat(t.name||"anonymous","]"):t))}catch(t){return{error:"Failed to sanitize data",original:String(e)}}}captureStack(){try{throw new Error}catch(e){return e.stack.split("\n").slice(3).join("\n")}}shouldLog(e){return this.logLevels[e]<=this.currentLevel}log(e,t,n,r){if(!this.shouldLog(e))return;const a=this.createLogEntry(e,t,n,r);this.logBuffer.push(a),this.logBuffer.length>this.maxBufferSize&&(this.logBuffer=this.logBuffer.slice(-this.maxBufferSize)),this.outputToConsole(a),this.storeInCache(a),"ERROR"===e&&setTimeout(()=>this.flushLogs(!0),100)}outputToConsole(e){const{level:t,message:n,data:r,timestamp:a}=e,s=new Date(a).toLocaleTimeString(),i={ERROR:"color: #dc2626; font-weight: bold;",WARN:"color: #f59e0b; font-weight: bold;",INFO:"color: #2563eb;",DEBUG:"color: #7c3aed;",TRACE:"color: #6b7280;"},o=i[t]||i.INFO;console.groupCollapsed("%c[".concat(t,"] ").concat(s," - ").concat(n),o),r&&Object.keys(r).length>0&&console.log("Data:",r),console.log("Stack:",e.stack),console.log("Metadata:",e.metadata),console.groupEnd()}async storeInCache(e){try{const t="log:".concat(e.id);await Ci.set(t,e,{ttl:864e5,tags:["logs",e.level.toLowerCase()]})}catch(t){console.warn("Failed to cache log entry:",t)}}async flushLogs(){if(0===this.logBuffer.length)return;const e=[...this.logBuffer];this.logBuffer=[];try{await Promise.all(this.endpoints.map(t=>this.sendToEndpoint(t,e))),await this.storeLogsInCache(e),console.log("Flushed ".concat(e.length," log entries"))}catch(t){console.error("Failed to flush logs:",t),this.logBuffer.unshift(...e)}}async sendToEndpoint(e,t){try{const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({logs:t,metadata:this.metadata})});if(!n.ok)throw new Error("HTTP ".concat(n.status,": ").concat(n.statusText))}catch(n){console.warn("Failed to send logs to ".concat(e,":"),n)}}async storeLogsInCache(e){try{const t="logs:batch:".concat(Date.now());await Ci.set(t,e,{ttl:6048e5,tags:["log-batches"]})}catch(t){console.warn("Failed to store logs in cache:",t)}}error(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error";this.log("ERROR",e,t,n)}warn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"warning";this.log("WARN",e,t,n)}info(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";this.log("INFO",e,t,n)}debug(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"debug";this.log("DEBUG",e,t,n)}trace(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"trace";this.log("TRACE",e,t,n)}business(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.info("Business Event: ".concat(e),t,"business")}security(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.warn("Security Event: ".concat(e),t,"security")}performance(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.info("Performance: ".concat(e),o({duration:t},n),"performance")}user(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.info("User Action: ".concat(e),t,"user")}api(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=n>=400?"ERROR":n>=300?"WARN":"INFO";this.log(s,"API: ".concat(e," ").concat(t),o({status:n,duration:r},a),"api")}async getLogStatistics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36e5;try{const t=Date.now()-e,n=await Ci.keys("log:*"),r=(await Promise.all(n.map(e=>Ci.get(e)))).filter(e=>e&&e.timestamp>t).filter(Boolean),a={total:r.length,byLevel:{},byCategory:{},timeRange:e,period:{start:t,end:Date.now()}};return r.forEach(e=>{a.byLevel[e.level]=(a.byLevel[e.level]||0)+1,a.byCategory[e.category]=(a.byCategory[e.category]||0)+1}),a}catch(t){return console.error("Failed to get log statistics:",t),null}}async exportLogs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const{level:t,category:n,timeRange:r=864e5}=e,a=Date.now()-r,s=await Ci.keys("log:*");let i=(await Promise.all(s.map(e=>Ci.get(e)))).filter(e=>e&&e.timestamp>a).filter(Boolean);return t&&(i=i.filter(e=>e.level===t)),n&&(i=i.filter(e=>e.category===n)),i.sort((e,t)=>t.timestamp-e.timestamp),{logs:i,exportedAt:Date.now(),filters:e,totalCount:i.length}}catch(t){return console.error("Failed to export logs:",t),null}}async clearLogs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6048e5;try{const t=Date.now()-e,n=await Ci.keys("log:*");let r=0;for(const e of n){const n=await Ci.get(e);n&&n.timestamp<t&&(await Ci.delete(e),r++)}return this.info("Log cleanup completed",{deletedCount:r,cutoffDate:new Date(t).toISOString()},"system"),r}catch(t){return console.error("Failed to clear logs:",t),0}}destroy(){this.flushLogs(!0)}};Ii.setLevel("WARN");const Ti=Ii;const Ai=class{constructor(){this.notifications=new Map,this.subscribers=new Set,this.alertRules=new Map,this.notificationHistory=[],this.channels={ui:!0,email:!1,sms:!1,webhook:!1},this.priorities={critical:1,high:2,medium:3,low:4,info:5},this.maxNotifications=100,this.maxHistorySize=1e3,this.autoCleanupInterval=3e5,this.initializeSystem()}initializeSystem(){this.loadNotificationsFromStorage(),setInterval(()=>{this.cleanupExpiredNotifications()},this.autoCleanupInterval),this.setupPerformanceMonitoring(),this.setupDefaultAlertRules()}createNotification(e){const t={id:this.generateNotificationId(),title:e.title||"Notification",message:e.message||"",type:e.type||"info",priority:e.priority||"medium",source:e.source||"system",timestamp:(new Date).toISOString(),read:!1,persistent:e.persistent||!1,expiresAt:e.expiresAt||this.calculateExpiration(e.type),actions:e.actions||[],metadata:e.metadata||{},channels:e.channels||["ui"],retryCount:0,maxRetries:e.maxRetries||3};return this.applyAlertRules(t),this.notifications.set(t.id,t),this.addToHistory(t),this.dispatchToChannels(t),this.notifySubscribers("notification_created",t),this.saveNotificationsToStorage(),t}createSystemAlert(e,t){const n={automation_failure:{title:"Automation System Failure",type:"critical",priority:"critical",persistent:!0,channels:["ui","email"],actions:[{label:"Run Diagnostics",action:"run_diagnostics"},{label:"Switch to Manual",action:"enable_manual_mode"}]},calculation_error:{title:"Calculation Error Detected",type:"error",priority:"high",channels:["ui"],actions:[{label:"Retry Calculation",action:"retry_calculation"},{label:"Use Fallback",action:"use_fallback"}]},performance_degradation:{title:"Performance Degradation Alert",type:"warning",priority:"medium",channels:["ui"],actions:[{label:"View Metrics",action:"view_performance"},{label:"Optimize System",action:"optimize_system"}]},batch_complete:{title:"Batch Processing Complete",type:"success",priority:"low",channels:["ui"],actions:[{label:"View Results",action:"view_batch_results"}]},security_alert:{title:"Security Alert",type:"critical",priority:"critical",persistent:!0,channels:["ui","email"],actions:[{label:"Review Logs",action:"review_security_logs"},{label:"Block IP",action:"block_suspicious_ip"}]}},r=n[e]||n.automation_failure;return this.createNotification(o(o({},r),{},{message:this.generateAlertMessage(e,t),source:"system_monitor",metadata:{alertType:e,alertData:t,systemState:this.getSystemState()}}))}createBusinessAlert(e,t){const n={new_lead:{title:"New Lead Created",type:"info",priority:"medium",message:"New lead: ".concat(t.customerName||"Unknown")},quote_generated:{title:"Quote Generated",type:"success",priority:"medium",message:"Quote of $".concat(t.amount," generated for ").concat(t.customerName)},calculation_completed:{title:"Vent Calculation Completed",type:"success",priority:"low",message:"Calculation completed for ".concat(t.sqft," sq ft via ").concat(t.method)},high_value_quote:{title:"High Value Quote Alert",type:"warning",priority:"high",message:"High value quote: $".concat(t.amount," for ").concat(t.customerName),persistent:!0,actions:[{label:"Review Quote",action:"review_quote"},{label:"Contact Customer",action:"contact_customer"}]}},r=n[e]||n.new_lead;return this.createNotification(o(o({},r),{},{source:"business_logic",metadata:{eventType:e,eventData:t}}))}createProgressNotification(e,t){const n=Array.from(this.notifications.values()).find(t=>t.metadata.processId===e);if(!n)return this.createNotification({title:t.title||"Processing...",message:"".concat(t.current,"/").concat(t.total," - ").concat(t.status),type:"info",priority:"low",source:"progress_tracker",persistent:!1,metadata:{processId:e,progress:t}});n.message="".concat(t.current,"/").concat(t.total," - ").concat(t.status),n.metadata.progress=t,n.timestamp=(new Date).toISOString(),this.notifySubscribers("notification_updated",n)}applyAlertRules(e){for(const[t,n]of this.alertRules)this.matchesRule(e,n)&&(n.escalate&&(e.priority="critical",e.persistent=!0),n.suppress&&(e.channels=[]),n.addChannels&&(e.channels=[...e.channels,...n.addChannels]),n.customMessage&&(e.message=n.customMessage(e)))}async dispatchToChannels(e){const t=e.channels.map(t=>{switch(t){case"ui":return this.sendUINotification(e);case"email":return this.sendEmailNotification(e);case"sms":return this.sendSMSNotification(e);case"webhook":return this.sendWebhookNotification(e);case"browser":return this.sendBrowserNotification(e);default:return Promise.resolve()}});try{await Promise.allSettled(t)}catch(n){console.error("Error dispatching notification:",n),this.handleDeliveryFailure(e,n)}}sendUINotification(e){const t=o(o({},e),{},{className:this.getUIClassName(e),icon:this.getNotificationIcon(e.type),autoHide:!e.persistent,hideDelay:this.getHideDelay(e.priority)});return this.notifySubscribers("ui_notification",t),Promise.resolve()}async sendBrowserNotification(e){if("Notification"in window&&"granted"===Notification.permission){return new Notification(e.title,{body:e.message,icon:"/favicon.ico",tag:e.id,requireInteraction:e.persistent,actions:e.actions.slice(0,2)}).onclick=()=>{window.focus(),this.markAsRead(e.id)},Promise.resolve()}return Promise.reject("Browser notifications not supported or permission denied")}async sendEmailNotification(e){return console.log("Email notification would be sent:",e),Promise.resolve()}async sendSMSNotification(e){return console.log("SMS notification would be sent:",e),Promise.resolve()}async sendWebhookNotification(e){return console.log("Webhook notification would be sent:",e),Promise.resolve()}getNotifications(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Array.from(this.notifications.values());return e.unreadOnly&&(t=t.filter(e=>!e.read)),e.type&&(t=t.filter(t=>t.type===e.type)),e.priority&&(t=t.filter(t=>t.priority===e.priority)),e.source&&(t=t.filter(t=>t.source===e.source)),t.sort((e,t)=>{const n=this.priorities[e.priority]-this.priorities[t.priority];return 0!==n?n:new Date(t.timestamp)-new Date(e.timestamp)}),t}markAsRead(e){const t=this.notifications.get(e);t&&(t.read=!0,t.readAt=(new Date).toISOString(),this.notifySubscribers("notification_read",t),this.saveNotificationsToStorage())}markAllAsRead(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getNotifications(e).forEach(e=>{this.markAsRead(e.id)})}dismissNotification(e){const t=this.notifications.get(e);t&&!t.persistent&&(this.notifications.delete(e),this.notifySubscribers("notification_dismissed",t),this.saveNotificationsToStorage())}clearAllNotifications(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])this.notifications.clear();else for(const[e,t]of this.notifications)t.persistent||this.notifications.delete(e);this.notifySubscribers("notifications_cleared"),this.saveNotificationsToStorage()}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}notifySubscribers(e,t){this.subscribers.forEach(n=>{try{n(e,t)}catch(r){console.error("Error in notification subscriber:",r)}})}setupDefaultAlertRules(){this.addAlertRule("suppress_duplicate_errors",{conditions:{type:"error",frequency:{count:5,window:3e5}},action:{suppress:!0}}),this.addAlertRule("escalate_critical",{conditions:{type:"critical"},action:{escalate:!0,addChannels:["email","browser"]}}),this.addAlertRule("business_hours_only",{conditions:{priority:"low",timeFilter:{startHour:9,endHour:17}},action:{suppress:e=>!this.isBusinessHours(),customMessage:e=>"".concat(e.message," (Business hours only)")}})}addAlertRule(e,t){this.alertRules.set(e,t)}removeAlertRule(e){this.alertRules.delete(e)}generateNotificationId(){return"notification_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}calculateExpiration(e){const t={critical:null,error:864e5,warning:432e5,success:216e5,info:108e5},n=t[e]||t.info;return n?new Date(Date.now()+n).toISOString():null}getUIClassName(e){const t="notification-".concat(e.type),n="notification-priority-".concat(e.priority);return"".concat("notification"," ").concat(t," ").concat(n)}getNotificationIcon(e){const t={success:"\u2705",error:"\u274c",warning:"\u26a0\ufe0f",info:"\u2139\ufe0f",critical:"\ud83d\udea8"};return t[e]||t.info}getHideDelay(e){const t={critical:0,high:1e4,medium:7e3,low:5e3,info:3e3};return t[e]||t.info}matchesRule(e,t){const n=t.conditions;if(n.type&&e.type!==n.type)return!1;if(n.priority&&e.priority!==n.priority)return!1;if(n.source&&e.source!==n.source)return!1;if(n.frequency){if(this.getRecentNotifications(n.frequency.window,{type:e.type,message:e.message}).length<n.frequency.count)return!1}if(n.timeFilter){const e=(new Date).getHours();if(e<n.timeFilter.startHour||e>n.timeFilter.endHour)return!1}return!0}getRecentNotifications(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Date.now()-e;return this.notificationHistory.filter(e=>!(new Date(e.timestamp).getTime()<n)&&((!t.type||e.type===t.type)&&(!t.message||e.message===t.message)))}isBusinessHours(){const e=new Date,t=e.getHours(),n=e.getDay();return n>=1&&n<=5&&t>=9&&t<=17}addToHistory(e){this.notificationHistory.push({id:e.id,type:e.type,message:e.message,timestamp:e.timestamp}),this.notificationHistory.length>this.maxHistorySize&&(this.notificationHistory=this.notificationHistory.slice(-this.maxHistorySize))}cleanupExpiredNotifications(){const e=Date.now(),t=[];for(const[n,r]of this.notifications)r.expiresAt&&new Date(r.expiresAt).getTime()<e&&t.push(n);t.forEach(e=>{this.notifications.delete(e)}),t.length>0&&this.saveNotificationsToStorage()}setupPerformanceMonitoring(){setInterval(()=>{const e={totalNotifications:this.notifications.size,unreadNotifications:Array.from(this.notifications.values()).filter(e=>!e.read).length,criticalNotifications:Array.from(this.notifications.values()).filter(e=>"critical"===e.priority).length,memoryUsage:this.calculateMemoryUsage()};e.totalNotifications>this.maxNotifications&&(this.createSystemAlert("notification_overload",e),this.performEmergencyCleanup())},6e4)}calculateMemoryUsage(){return JSON.stringify(Array.from(this.notifications.values())).length}performEmergencyCleanup(){for(const[e,t]of this.notifications)["critical","high"].includes(t.priority)||this.notifications.delete(e);this.saveNotificationsToStorage()}generateAlertMessage(e,t){return{automation_failure:"Automation system failed: ".concat(t.error||"Unknown error"),calculation_error:"Calculation failed for ".concat(t.sqft||"unknown"," sq ft: ").concat(t.error||"Unknown error"),performance_degradation:"System performance degraded: ".concat(t.metric||"response time"," is ").concat(t.value||"high"),batch_complete:"Batch processing completed: ".concat(t.processed||0," items processed, ").concat(t.errors||0," errors"),security_alert:"Security threat detected: ".concat(t.threat||"Unknown threat"," from ").concat(t.source||"unknown source")}[e]||"System alert: ".concat(e)}getSystemState(){return{timestamp:(new Date).toISOString(),notificationCount:this.notifications.size,subscriberCount:this.subscribers.size,alertRuleCount:this.alertRules.size}}handleDeliveryFailure(e,t){e.retryCount++,e.retryCount<e.maxRetries?setTimeout(()=>{this.dispatchToChannels(e)},1e3*Math.pow(2,e.retryCount)):this.createSystemAlert("notification_delivery_failed",{notificationId:e.id,error:t.message,retryCount:e.retryCount})}saveNotificationsToStorage(){try{const e={notifications:Array.from(this.notifications.entries()),history:this.notificationHistory.slice(-100),timestamp:(new Date).toISOString()};localStorage.setItem("crm_notifications",JSON.stringify(e))}catch(e){console.error("Failed to save notifications to storage:",e)}}loadNotificationsFromStorage(){try{const e=localStorage.getItem("crm_notifications");if(e){const t=JSON.parse(e);this.notifications=new Map(t.notifications||[]),this.notificationHistory=t.history||[],this.cleanupExpiredNotifications()}}catch(e){console.error("Failed to load notifications from storage:",e)}}getStatistics(){const e=Array.from(this.notifications.values());return{total:e.length,unread:e.filter(e=>!e.read).length,byType:e.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{}),byPriority:e.reduce((e,t)=>(e[t.priority]=(e[t.priority]||0)+1,e),{}),bySource:e.reduce((e,t)=>(e[t.source]=(e[t.source]||0)+1,e),{}),persistent:e.filter(e=>e.persistent).length,historySize:this.notificationHistory.length,subscriberCount:this.subscribers.size,alertRuleCount:this.alertRules.size}}};const Pi=new class{constructor(){this.metrics=new Map,this.alerts=new Map,this.thresholds={responseTime:5e3,errorRate:.05,memoryUsage:.8,cacheHitRate:.7,apiFailureRate:.1,calculationSuccessRate:.95,systemLoad:.8},this.monitoring={enabled:!0,interval:3e4,batchSize:100,retentionPeriod:6048e5},this.alertChannels=["ui","console","storage"],this.healthChecks=[],this.initializeMonitoring()}initializeMonitoring(){this.setupPerformanceObserver(),this.setupResourceMonitoring(),this.setupErrorTracking(),this.setupHealthChecks(),this.startMonitoringLoop(),Ti.info("Enterprise Monitoring System initialized",{thresholds:this.thresholds,monitoring:this.monitoring})}setupPerformanceObserver(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>this.recordPerformanceMetric(e))});e.observe({entryTypes:["navigation","measure","resource"]}),this.performanceObserver=e}catch(e){Ti.warn("Performance Observer setup failed",{error:e.message})}}setupResourceMonitoring(){setInterval(()=>{if("memory"in performance){this.recordMetric("memory.used",performance.memory.usedJSHeapSize),this.recordMetric("memory.total",performance.memory.totalJSHeapSize),this.recordMetric("memory.limit",performance.memory.jsHeapSizeLimit);const e=performance.memory.usedJSHeapSize/performance.memory.jsHeapSizeLimit;this.checkThreshold("memoryUsage",e)}},this.monitoring.interval),this.monitorNetworkStatus()}setupErrorTracking(){window.addEventListener("error",e=>{var t;this.recordError("javascript",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:null===(t=e.error)||void 0===t?void 0:t.stack})}),window.addEventListener("unhandledrejection",e=>{this.recordError("promise",{reason:e.reason,promise:e.promise})})}setupHealthChecks(){this.addHealthCheck("cache",async()=>{try{const e=await Ci.getStats();return{status:"healthy",metrics:e,hitRate:e.hitRate||0}}catch(e){return{status:"unhealthy",error:e.message}}}),this.addHealthCheck("storage",async()=>{try{const e="health_check_"+Date.now();localStorage.setItem(e,"test");const t=localStorage.getItem(e);return localStorage.removeItem(e),{status:"test"===t?"healthy":"degraded",metrics:{localStorageAvailable:!0,itemCount:localStorage.length}}}catch(e){return{status:"unhealthy",error:e.message}}}),this.addHealthCheck("network",async()=>{try{const e=performance.now(),t=await fetch("https://httpbin.org/status/200",{method:"HEAD",cache:"no-cache"}),n=performance.now()-e;return{status:t.ok?"healthy":"degraded",metrics:{responseTime:Math.round(n),status:t.status}}}catch(e){return{status:"unhealthy",error:e.message}}}),this.addHealthCheck("api",async()=>{try{const e={action:"test",timestamp:Date.now()},t=await fetch("/api/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return{status:t.ok?"healthy":"degraded",metrics:{status:t.status,available:t.ok}}}catch(e){return{status:"degraded",error:"API not available or CORS issue"}}})}startMonitoringLoop(){setInterval(async()=>{this.monitoring.enabled&&(await this.collectSystemMetrics(),await this.runHealthChecks(),await this.processAlerts(),await this.cleanupOldMetrics())},this.monitoring.interval),setTimeout(()=>this.collectSystemMetrics(),5e3)}async collectSystemMetrics(){try{const e={timestamp:Date.now(),system:await this.getSystemMetrics(),performance:await this.getPerformanceMetrics(),cache:await this.getCacheMetrics(),errors:await this.getErrorMetrics()};await this.storeMetrics(e),this.analyzeMetrics(e)}catch(e){Ti.error("Failed to collect system metrics",{error:e.message})}}async getSystemMetrics(){return{timestamp:Date.now(),userAgent:navigator.userAgent,online:navigator.onLine,cookieEnabled:navigator.cookieEnabled,language:navigator.language,platform:navigator.platform,viewport:{width:window.innerWidth,height:window.innerHeight},memory:"memory"in performance?{used:performance.memory.usedJSHeapSize,total:performance.memory.totalJSHeapSize,limit:performance.memory.jsHeapSizeLimit,usage:performance.memory.usedJSHeapSize/performance.memory.jsHeapSizeLimit}:null}}async getPerformanceMetrics(){const e=performance.getEntriesByType("navigation")[0];return{domContentLoaded:(null===e||void 0===e?void 0:e.domContentLoadedEventEnd)-(null===e||void 0===e?void 0:e.domContentLoadedEventStart)||0,loadComplete:(null===e||void 0===e?void 0:e.loadEventEnd)-(null===e||void 0===e?void 0:e.loadEventStart)||0,firstPaint:this.getFirstPaint(),firstContentfulPaint:this.getFirstContentfulPaint(),timeToInteractive:this.estimateTimeToInteractive()}}async getCacheMetrics(){try{const e=await Ci.getStats(),t=await Ci.getMetrics();return o(o({},e),{},{operations:t})}catch(e){return Ti.warn("Failed to get cache metrics",{error:e.message}),{}}}async getErrorMetrics(){const e=this.metrics.get("errors")||[],t=e.filter(e=>Date.now()-e.timestamp<2*this.monitoring.interval);return{totalErrors:e.length,recentErrors:t.length,errorRate:t.length/this.monitoring.interval*1e3,errorTypes:this.categorizeErrors(t)}}getFirstPaint(){const e=performance.getEntriesByType("paint").find(e=>"first-paint"===e.name);return e?Math.round(e.startTime):0}getFirstContentfulPaint(){const e=performance.getEntriesByType("paint").find(e=>"first-contentful-paint"===e.name);return e?Math.round(e.startTime):0}estimateTimeToInteractive(){const e=performance.getEntriesByType("navigation")[0];return e?Math.round(e.domInteractive-e.fetchStart):0}recordMetric(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={name:e,value:t,timestamp:Date.now(),metadata:n};this.metrics.has(e)||this.metrics.set(e,[]);const a=this.metrics.get(e);a.push(r);const s=Date.now()-this.monitoring.retentionPeriod;this.metrics.set(e,a.filter(e=>e.timestamp>s)),this.checkThreshold(e,t)}recordPerformanceMetric(e){const t={name:e.name,type:e.entryType,startTime:e.startTime,duration:e.duration,timestamp:Date.now()};this.recordMetric("performance.".concat(e.entryType),e.duration,t),"navigation"!==e.entryType&&"measure"!==e.entryType||this.checkThreshold("responseTime",e.duration)}recordError(e,t){const n={type:e,details:t,timestamp:Date.now(),url:window.location.href,userAgent:navigator.userAgent};this.metrics.has("errors")||this.metrics.set("errors",[]),this.metrics.get("errors").push(n),this.triggerAlert("error","critical","".concat(e," error occurred"),n),Ti.error("Monitoring: ".concat(e," error recorded"),t)}checkThreshold(e,t){const n=this.thresholds[e];if(!n)return;t>n&&this.triggerAlert("threshold","warning","".concat(e," threshold exceeded"),{metric:e,value:t,threshold:n})}triggerAlert(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a={id:this.generateAlertId(),type:e,severity:t,message:n,data:r,timestamp:Date.now(),resolved:!1};this.alerts.set(a.id,a),this.sendAlert(a),Ti.warn("Alert triggered: ".concat(n),a)}async sendAlert(e){try{for(const t of this.alertChannels)switch(t){case"ui":await Ai.error(e.message,{priority:"critical"===e.severity?"high":"medium",category:"monitoring",metadata:e.data});break;case"console":console.warn("\ud83d\udea8 MONITORING ALERT:",e);break;case"storage":await this.storeAlert(e);break;case"webhook":await this.sendWebhookAlert(e)}}catch(t){Ti.error("Failed to send alert",{alertId:e.id,error:t.message})}}async runHealthChecks(){const e={};for(const[n,r]of this.healthChecks)try{const t=await r();e[n]=t,"unhealthy"===t.status&&this.triggerAlert("health","critical","Health check failed: ".concat(n),t)}catch(t){e[n]={status:"error",error:t.message},this.triggerAlert("health","critical","Health check error: ".concat(n),{error:t.message})}return await this.storeHealthCheckResults(e),e}addHealthCheck(e,t){this.healthChecks.push([e,t])}removeHealthCheck(e){this.healthChecks=this.healthChecks.filter(t=>{let[n]=t;return n!==e})}async processAlerts(){const e=Date.now();for(const[t,n]of this.alerts.entries())!n.resolved&&e-n.timestamp>3e5&&await this.resolveAlert(t);Array.from(this.alerts.entries()).filter(t=>{let[,n]=t;return n.resolved&&e-n.timestamp>864e5}).forEach(e=>{let[t]=e;return this.alerts.delete(t)})}async resolveAlert(e){const t=this.alerts.get(e);t&&(t.resolved=!0,t.resolvedAt=Date.now(),Ti.info("Alert resolved",{alertId:e,alert:t.message}))}categorizeErrors(e){const t={};return e.forEach(e=>{const n=e.type||"unknown";t[n]=(t[n]||0)+1}),t}analyzeMetrics(e){var t,n,r;const a={timestamp:e.timestamp,performance:this.analyzePerformance(e.performance),errors:this.analyzeErrors(e.errors),cache:this.analyzeCachePerformance(e.cache),recommendations:[]};return(null===(t=e.performance)||void 0===t?void 0:t.domContentLoaded)>3e3&&a.recommendations.push({type:"performance",priority:"medium",message:"DOM Content Loaded time is high. Consider optimizing JavaScript loading."}),(null===(n=e.errors)||void 0===n?void 0:n.errorRate)>this.thresholds.errorRate&&a.recommendations.push({type:"reliability",priority:"high",message:"Error rate is above threshold. Investigate recent errors."}),(null===(r=e.cache)||void 0===r?void 0:r.hitRate)<this.thresholds.cacheHitRate&&a.recommendations.push({type:"performance",priority:"medium",message:"Cache hit rate is low. Review caching strategy."}),a}analyzePerformance(e){return e?{score:this.calculatePerformanceScore(e),bottlenecks:this.identifyBottlenecks(e),trends:this.getPerformanceTrends()}:null}calculatePerformanceScore(e){let t=100;return e.domContentLoaded>2e3&&(t-=20),e.loadComplete>4e3&&(t-=20),e.firstContentfulPaint>1500&&(t-=15),e.timeToInteractive>3e3&&(t-=25),Math.max(0,t)}identifyBottlenecks(e){const t=[];return e.domContentLoaded>3e3&&t.push("Slow DOM content loading"),e.firstContentfulPaint>2e3&&t.push("Slow first paint"),e.timeToInteractive>5e3&&t.push("Slow time to interactive"),t}getPerformanceTrends(){const e=(this.metrics.get("performance.navigation")||[]).slice(-5);if(e.length<2)return"insufficient_data";return e[e.length-1].value-e[0].value>0?"degrading":"improving"}analyzeErrors(e){return e?{severity:this.categorizeErrorSeverity(e),patterns:this.identifyErrorPatterns(e),frequency:e.errorRate}:null}categorizeErrorSeverity(e){return e.errorRate>.1?"critical":e.errorRate>.05?"high":e.errorRate>.01?"medium":"low"}identifyErrorPatterns(e){const t=(this.metrics.get("errors")||[]).slice(-10),n={};return t.forEach(e=>{var t;const r=(null===(t=e.details)||void 0===t?void 0:t.message)||e.type;n[r]=(n[r]||0)+1}),n}analyzeCachePerformance(e){return e?{efficiency:e.hitRate||0,utilization:this.calculateCacheUtilization(e),recommendations:this.getCacheRecommendations(e)}:null}calculateCacheUtilization(e){return e.memorySize&&e.maxMemorySize?e.memorySize/e.maxMemorySize:0}getCacheRecommendations(e){const t=[];return e.hitRate<.7&&t.push("Consider adjusting cache TTL values"),e.evictions>.1*e.sets&&t.push("Cache size may be too small"),t}monitorNetworkStatus(){window.addEventListener("online",()=>{this.recordMetric("network.status",1,{status:"online"}),Ti.info("Network status: online")}),window.addEventListener("offline",()=>{this.recordMetric("network.status",0,{status:"offline"}),this.triggerAlert("network","warning","Network connection lost",{}),Ti.warn("Network status: offline")})}async storeMetrics(e){try{const t="metrics:".concat(Date.now());await Ci.set(t,e,{ttl:this.monitoring.retentionPeriod,tags:["metrics"]})}catch(t){Ti.error("Failed to store metrics",{error:t.message})}}async storeAlert(e){try{const t="alert:".concat(e.id);await Ci.set(t,e,{ttl:6048e5,tags:["alerts"]})}catch(t){Ti.error("Failed to store alert",{error:t.message})}}async storeHealthCheckResults(e){try{const t="health:".concat(Date.now());await Ci.set(t,e,{ttl:864e5,tags:["health"]})}catch(t){Ti.error("Failed to store health check results",{error:t.message})}}async sendWebhookAlert(e){Ti.info("Webhook alert would be sent",e)}generateAlertId(){return"alert_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}async cleanupOldMetrics(){try{const e=Date.now()-this.monitoring.retentionPeriod;for(const[t,n]of this.metrics.entries()){const r=n.filter(t=>t.timestamp>e);this.metrics.set(t,r)}await Ci.deleteByTags(["metrics"]),Ti.debug("Old metrics cleaned up",{cutoff:new Date(e)})}catch(e){Ti.error("Failed to cleanup old metrics",{error:e.message})}}async getSystemReport(){try{const e=await this.runHealthChecks(),t=await this.getRecentMetrics(),n=Array.from(this.alerts.values()).filter(e=>!e.resolved);return{timestamp:Date.now(),systemHealth:this.calculateOverallHealth(e),healthChecks:e,metrics:t,alerts:{active:n.length,critical:n.filter(e=>"critical"===e.severity).length,warnings:n.filter(e=>"warning"===e.severity).length},performance:await this.getPerformanceSummary(),recommendations:this.getSystemRecommendations(e,t)}}catch(e){return Ti.error("Failed to generate system report",{error:e.message}),{error:e.message}}}calculateOverallHealth(e){const t=Object.values(e).map(e=>e.status),n=t.filter(e=>"healthy"===e).length,r=t.length;return t.includes("unhealthy")?"critical":t.includes("degraded")?"degraded":n===r?"healthy":"unknown"}async getRecentMetrics(){const e={};for(const[t,n]of this.metrics.entries()){const r=n.slice(-5);r.length>0&&(e[t]={latest:r[r.length-1],count:r.length,average:r.reduce((e,t)=>e+t.value,0)/r.length})}return e}async getPerformanceSummary(){const e=performance.getEntriesByType("navigation")[0];return e?{pageLoad:Math.round(e.loadEventEnd-e.fetchStart),domReady:Math.round(e.domContentLoadedEventEnd-e.fetchStart),firstPaint:this.getFirstPaint(),score:this.calculatePerformanceScore({domContentLoaded:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,loadComplete:e.loadEventEnd-e.loadEventStart,firstContentfulPaint:this.getFirstContentfulPaint(),timeToInteractive:e.domInteractive-e.fetchStart})}:null}getSystemRecommendations(e,t){var n,r;const a=[];return Object.entries(e).forEach(e=>{let[t,n]=e;"unhealthy"===n.status&&a.push({type:"critical",component:t,message:"".concat(t," is unhealthy and requires immediate attention")})}),(null===(n=t["memory.usage"])||void 0===n||null===(r=n.latest)||void 0===r?void 0:r.value)>.8&&a.push({type:"warning",component:"memory",message:"Memory usage is high. Consider clearing caches or reducing data retention."}),a}setThreshold(e,t){this.thresholds[e]=t,Ti.info("Threshold updated",{metric:e,value:t})}setMonitoringEnabled(e){this.monitoring.enabled=e,Ti.info("Monitoring ".concat(e?"enabled":"disabled"))}addAlertChannel(e){this.alertChannels.includes(e)||(this.alertChannels.push(e),Ti.info("Alert channel added",{channel:e}))}removeAlertChannel(e){this.alertChannels=this.alertChannels.filter(t=>t!==e),Ti.info("Alert channel removed",{channel:e})}destroy(){this.performanceObserver&&this.performanceObserver.disconnect(),this.monitoring.enabled=!1,Ti.info("Enterprise Monitoring System destroyed")}};const Ri=class{constructor(){this.encryptionKey=this.generateEncryptionKey(),this.rateLimiter=new Map,this.securityLogs=[],this.bannedIPs=new Set,this.sessionTokens=new Map}sanitizeInput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";switch("string"!==typeof e&&(e=String(e)),t){case"sqft":const t=e.replace(/[^\d.]/g,""),n=parseFloat(t);if(isNaN(n)||n<=0||n>1e5)throw new Error("Invalid SQFT value: must be between 1 and 100,000");return n;case"name":return e.replace(/[<>\"'&]/g,"").trim().slice(0,100);case"phone":const r=e.replace(/\D/g,"");if(10!==r.length)throw new Error("Invalid phone number: must be 10 digits");return r;case"email":if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))throw new Error("Invalid email format");return e.toLowerCase().trim();case"address":return e.replace(/[<>\"']/g,"").trim().slice(0,500);default:return e.replace(/[<>\"'&]/g,"").trim()}}checkRateLimit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e4;const r=Date.now(),a=r-n;this.rateLimiter.has(e)||this.rateLimiter.set(e,[]);const s=this.rateLimiter.get(e).filter(e=>e>a);if(s.length>=t)throw this.logSecurityEvent("RATE_LIMIT_EXCEEDED",{identifier:e,requests:s.length}),new Error("Rate limit exceeded. Please try again later.");return s.push(r),this.rateLimiter.set(e,s),!0}encryptSensitiveData(e){try{const t=JSON.stringify(e),n=btoa(t);return"encrypted_".concat(n)}catch(t){throw this.logSecurityEvent("ENCRYPTION_FAILED",{error:t.message}),new Error("Failed to encrypt sensitive data")}}decryptSensitiveData(e){try{if(!e.startsWith("encrypted_"))throw new Error("Invalid encrypted data format");const t=e.substring(10),n=atob(t);return JSON.parse(n)}catch(t){throw this.logSecurityEvent("DECRYPTION_FAILED",{error:t.message}),new Error("Failed to decrypt sensitive data")}}generateSessionToken(e){const t=this.generateRandomString(32),n=Date.now()+864e5;return this.sessionTokens.set(t,{userId:e,createdAt:Date.now(),expiresAt:n,lastAccessed:Date.now()}),this.logSecurityEvent("SESSION_CREATED",{userId:e,token:t.substring(0,8)+"..."}),t}validateSession(e){if(!e||!this.sessionTokens.has(e))return this.logSecurityEvent("INVALID_SESSION_TOKEN",{token:(null===e||void 0===e?void 0:e.substring(0,8))+"..."}),!1;const t=this.sessionTokens.get(e);return Date.now()>t.expiresAt?(this.sessionTokens.delete(e),this.logSecurityEvent("SESSION_EXPIRED",{userId:t.userId}),!1):(t.lastAccessed=Date.now(),this.sessionTokens.set(e,t),t)}sanitizeQueryParameters(e){const t={};for(const[n,r]of Object.entries(e))t[n]="string"===typeof r?r.replace(/['";\\]/g,"").replace(/--/g,"").replace(/\/\*/g,"").replace(/\*\//g,"").trim():r;return t}escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}generateCSRFToken(){return this.generateRandomString(32)}getCSPHeaders(){return{"Content-Security-Policy":"default-src 'self'; script-src 'self' 'unsafe-inline' https://apis.google.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https://script.google.com https://sheets.googleapis.com;","X-Frame-Options":"DENY","X-Content-Type-Options":"nosniff","X-XSS-Protection":"1; mode=block","Strict-Transport-Security":"max-age=31536000; includeSubDomains","Referrer-Policy":"strict-origin-when-cross-origin"}}logSecurityEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={timestamp:(new Date).toISOString(),eventType:e,details:t,userAgent:"undefined"!==typeof navigator?navigator.userAgent:"unknown",ip:this.getClientIP(),sessionId:this.getCurrentSessionId()};this.securityLogs.push(n),this.securityLogs.length>1e3&&(this.securityLogs=this.securityLogs.slice(-1e3)),this.isCriticalEvent(e)&&this.sendSecurityAlert(n)}maskSensitiveData(e){const t=o({},e);if(t.phoneNumber&&(t.phoneNumber="***-***-".concat(t.phoneNumber.slice(-4))),t.email){const[e,n]=t.email.split("@");t.email="".concat(e.substring(0,2),"***@").concat(n)}return t.address&&(t.address=t.address.substring(0,10)+"***"),t}scanForVulnerabilities(e){const t=[/(\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|UNION)\b)/i,/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,/(\b(eval|exec|system|shell_exec|passthru|cmd)\b)/i,/(\.\.\/|\.\.\\)/g,/(\*|\(|\)|\||\&)/g];for(const n of t)if(n.test(e))throw this.logSecurityEvent("VULNERABILITY_DETECTED",{pattern:n.toString(),input:e.substring(0,100)+"..."}),new Error("Potentially malicious input detected");return!0}validatePermissions(e,t,n){const r={job_counts:["read","write","delete"],calculations:["read","execute"],system_monitoring:["read"],batch_processing:["execute"]};if(!r[t]||!r[t].includes(n))throw this.logSecurityEvent("ACCESS_DENIED",{userId:e,resource:t,action:n}),new Error("Access denied: insufficient permissions");return!0}encryptBackupData(e){const t={data:e,timestamp:Date.now(),checksum:this.calculateChecksum(JSON.stringify(e)),version:"1.0"};return this.encryptSensitiveData(t)}createSecureExport(e,t){const n=o(o({},e),{},{exportMetadata:{exportedBy:t,exportedAt:(new Date).toISOString(),exportId:this.generateRandomString(16),watermark:"CONFIDENTIAL - Exported by User ".concat(t)}});return this.logSecurityEvent("DATA_EXPORTED",{userId:t,recordCount:e.length}),n}generateRandomString(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let r=0;r<e;r++)n+=t.charAt(Math.floor(62*Math.random()));return n}generateEncryptionKey(){return this.generateRandomString(32)}calculateChecksum(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t.toString(16)}getClientIP(){return"client-ip-masked"}getCurrentSessionId(){return sessionStorage.getItem("sessionId")||"anonymous"}isCriticalEvent(e){return["RATE_LIMIT_EXCEEDED","VULNERABILITY_DETECTED","ACCESS_DENIED","ENCRYPTION_FAILED","SESSION_HIJACK_ATTEMPT"].includes(e)}sendSecurityAlert(e){console.warn("SECURITY ALERT:",e)}getSecurityReport(){const e=Date.now()-864e5,t=this.securityLogs.filter(t=>new Date(t.timestamp).getTime()>e),n=t.reduce((e,t)=>(e[t.eventType]=(e[t.eventType]||0)+1,e),{});return{totalEvents:t.length,eventBreakdown:n,criticalEvents:t.filter(e=>this.isCriticalEvent(e.eventType)),activeSessions:this.sessionTokens.size,generatedAt:(new Date).toISOString()}}};const Oi=new class{constructor(){this.backupPrefix="backup_",this.maxBackups=10,this.autoBackupInterval=216e5,this.compressionThreshold=1e4,this.encryptionEnabled=!0,this.initializeBackupSystem()}initializeBackupSystem(){this.scheduleAutoBackups(),this.setupDataChangeListeners(),this.scheduleCleanup(),Ti.info("Backup and Recovery System initialized",{autoBackupInterval:this.autoBackupInterval,maxBackups:this.maxBackups,encryptionEnabled:this.encryptionEnabled})}scheduleAutoBackups(){setInterval(async()=>{try{await this.createAutoBackup(),Ti.info("Automatic backup completed successfully")}catch(e){Ti.error("Automatic backup failed",{error:e.message})}},this.autoBackupInterval),setTimeout(()=>this.createAutoBackup(),3e4)}setupDataChangeListeners(){window.addEventListener("storage",e=>{this.isCriticalData(e.key)&&this.scheduleIncrementalBackup(e.key)}),window.addEventListener("beforeunload",()=>{this.createEmergencyBackup()})}scheduleCleanup(){setInterval(()=>{this.cleanupOldBackups()},864e5)}isCriticalData(e){return["leads_","jobCounts_","calculations_","userSettings_"].some(t=>null===e||void 0===e?void 0:e.startsWith(t))}async createFullBackup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=performance.now();try{const n=e||"full_".concat(Date.now()),r=(new Date).toISOString();Ti.info("Starting full backup",{backupId:n});const a={metadata:{backupId:n,timestamp:r,type:"full",version:"1.0",source:"Ultimate CRM"},localStorage:await this.backupLocalStorage(),sessionStorage:await this.backupSessionStorage(),indexedDB:await this.backupIndexedDB(),cache:await this.backupCacheData(),settings:await this.backupUserSettings(),calculations:await this.backupCalculations()},s=JSON.stringify(a);a.metadata.size=s.length,a.metadata.checksum=this.calculateChecksum(s);const i=this.shouldCompress(s)?this.compressData(a):a,o=this.encryptionEnabled?Ri.encryptBackupData(i):i,l="".concat(this.backupPrefix).concat(n);await this.storeBackup(l,o),await this.updateBackupRegistry(n,{timestamp:r,type:"full",size:a.metadata.size,compressed:this.shouldCompress(s),encrypted:this.encryptionEnabled});const c=performance.now()-t;return Ti.info("Full backup completed",{backupId:n,duration:Math.round(c),size:a.metadata.size,compressed:this.shouldCompress(s)}),{success:!0,backupId:n,size:a.metadata.size,duration:c}}catch(n){const e=performance.now()-t;return Ti.error("Full backup failed",{error:n.message,duration:Math.round(e)}),{success:!1,error:n.message,duration:e}}}async createIncrementalBackup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=performance.now();try{const n="incremental_".concat(Date.now()),r=(new Date).toISOString();Ti.info("Starting incremental backup",{backupId:n,changedKeys:e});const a={metadata:{backupId:n,timestamp:r,type:"incremental",version:"1.0",changedKeys:e},changes:{}};for(const t of e)if(t.startsWith("localStorage_")){const e=t.substring(13);a.changes[t]=localStorage.getItem(e)}else if(t.startsWith("sessionStorage_")){const e=t.substring(15);a.changes[t]=sessionStorage.getItem(e)}const s=JSON.stringify(a);a.metadata.size=s.length,a.metadata.checksum=this.calculateChecksum(s);const i=this.encryptionEnabled?Ri.encryptBackupData(a):a,o="".concat(this.backupPrefix).concat(n);await this.storeBackup(o,i),await this.updateBackupRegistry(n,{timestamp:r,type:"incremental",size:a.metadata.size,changedKeys:e});const l=performance.now()-t;return Ti.info("Incremental backup completed",{backupId:n,duration:Math.round(l),size:a.metadata.size}),{success:!0,backupId:n,size:a.metadata.size}}catch(n){return Ti.error("Incremental backup failed",{error:n.message}),{success:!1,error:n.message}}}async createAutoBackup(){return await this.createFullBackup("auto_".concat(Date.now()))}createEmergencyBackup(){try{const e={timestamp:Date.now(),localStorage:o({},localStorage),sessionStorage:o({},sessionStorage)};localStorage.setItem("emergencyBackup",JSON.stringify(e)),Ti.info("Emergency backup created")}catch(e){console.error("Emergency backup failed:",e)}}async scheduleIncrementalBackup(e){this.incrementalTimeout&&clearTimeout(this.incrementalTimeout),this.changedKeys||(this.changedKeys=new Set),this.changedKeys.add(e),this.incrementalTimeout=setTimeout(async()=>{const e=Array.from(this.changedKeys);this.changedKeys.clear(),await this.createIncrementalBackup(e)},3e4)}async restoreFromBackup(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=performance.now();try{const{dryRun:r=!1,skipConfirmation:a=!1,selectiveRestore:s=null}=t;if(Ti.info("Starting restore operation",{backupId:e,dryRun:r}),!a&&!r){if(!window.confirm('Are you sure you want to restore from backup "'.concat(e,'"? This will overwrite current data.')))return{success:!1,cancelled:!0}}const i="".concat(this.backupPrefix).concat(e),o=await this.retrieveBackup(i);if(!o)throw new Error('Backup "'.concat(e,'" not found'));const l=this.encryptionEnabled?Ri.decryptSensitiveData(o):o;if(!await this.validateBackupIntegrity(l))throw new Error("Backup integrity validation failed");if(r)return{success:!0,dryRun:!0,metadata:l.metadata,dataKeys:Object.keys(l).filter(e=>"metadata"!==e)};await this.createFullBackup("pre_restore_".concat(Date.now())),await this.performRestore(l,s);const c=performance.now()-n;return Ti.info("Restore completed successfully",{backupId:e,duration:Math.round(c)}),{success:!0,backupId:e,restoredAt:(new Date).toISOString(),duration:c}}catch(r){const t=performance.now()-n;return Ti.error("Restore operation failed",{backupId:e,error:r.message,duration:Math.round(t)}),{success:!1,error:r.message,duration:t}}}async performRestore(e,t){const{metadata:n,localStorage:r,sessionStorage:a,indexedDB:s,cache:i}=e;t&&!t.includes("localStorage")||!r||Object.entries(r).forEach(e=>{let[t,n]=e;null!==n&&localStorage.setItem(t,n)}),t&&!t.includes("sessionStorage")||!a||Object.entries(a).forEach(e=>{let[t,n]=e;null!==n&&sessionStorage.setItem(t,n)}),t&&!t.includes("indexedDB")||!s||await this.restoreIndexedDB(s),t&&!t.includes("cache")||!i||await this.restoreCache(i),Ti.info("Data restoration completed",{restoredSections:t||["all"]})}async backupLocalStorage(){const e={};for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);e[n]=localStorage.getItem(n)}return e}async backupSessionStorage(){const e={};for(let t=0;t<sessionStorage.length;t++){const n=sessionStorage.key(t);e[n]=sessionStorage.getItem(n)}return e}async backupIndexedDB(){try{const e=await Ci.keys("*"),t={};for(const n of e)t[n]=await Ci.get(n);return t}catch(e){return Ti.warn("IndexedDB backup failed",{error:e.message}),{}}}async backupCacheData(){try{return await Ci.getStats()}catch(e){return Ti.warn("Cache backup failed",{error:e.message}),{}}}async backupUserSettings(){return{theme:localStorage.getItem("theme"),language:localStorage.getItem("language"),preferences:localStorage.getItem("userPreferences"),settings:localStorage.getItem("appSettings")}}async backupCalculations(){try{const e=await Ci.keys("calculation:*"),t={};for(const n of e)t[n]=await Ci.get(n);return t}catch(e){return Ti.warn("Calculations backup failed",{error:e.message}),{}}}async restoreIndexedDB(e){try{for(const[t,n]of Object.entries(e))await Ci.set(t,n,{ttl:864e5})}catch(t){Ti.error("IndexedDB restore failed",{error:t.message})}}async restoreCache(e){try{Ti.info("Cache stats from backup",e)}catch(t){Ti.error("Cache restore failed",{error:t.message})}}shouldCompress(e){return e.length>this.compressionThreshold}compressData(e){try{return{compressed:!0,data:JSON.stringify(e)}}catch(t){return Ti.warn("Compression failed",{error:t.message}),e}}decompressData(e){try{return e.compressed?JSON.parse(e.data):e}catch(t){return Ti.error("Decompression failed",{error:t.message}),e}}calculateChecksum(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t.toString(16)}async validateBackupIntegrity(e){try{if(!e.metadata)return Ti.warn("Backup missing metadata"),!1;const{checksum:t,size:n}=e.metadata,r=JSON.stringify(e);if(n&&r.length!==n&&Ti.warn("Backup size mismatch",{expected:n,actual:r.length}),t){const e=this.calculateChecksum(r);if(e!==t)return Ti.error("Backup checksum validation failed",{expected:t,actual:e}),!1}return!0}catch(t){return Ti.error("Backup validation failed",{error:t.message}),!1}}async storeBackup(e,t){await Ci.set(e,t,{ttl:2592e6,tags:["backup"]})}async retrieveBackup(e){return await Ci.get(e)}async updateBackupRegistry(e,t){try{const n=await Ci.get("backup_registry")||{};n[e]=t,await Ci.set("backup_registry",n,{ttl:2592e6,tags:["backup","registry"]})}catch(n){Ti.error("Failed to update backup registry",{error:n.message})}}async getBackupList(){try{const e=await Ci.get("backup_registry")||{};return Object.entries(e).map(e=>{let[t,n]=e;return o({id:t},n)}).sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp))}catch(e){return Ti.error("Failed to get backup list",{error:e.message}),[]}}async deleteBackup(e){try{const t="".concat(this.backupPrefix).concat(e);await Ci.delete(t);const n=await Ci.get("backup_registry")||{};return delete n[e],await Ci.set("backup_registry",n),Ti.info("Backup deleted",{backupId:e}),{success:!0}}catch(t){return Ti.error("Failed to delete backup",{backupId:e,error:t.message}),{success:!1,error:t.message}}}async cleanupOldBackups(){try{const e=await this.getBackupList(),t=e.slice(this.maxBackups);for(const n of t)await this.deleteBackup(n.id);return Ti.info("Backup cleanup completed",{totalBackups:e.length,deletedBackups:t.length,remainingBackups:Math.min(e.length,this.maxBackups)}),t.length}catch(e){return Ti.error("Backup cleanup failed",{error:e.message}),0}}async getSystemHealth(){try{const e=await this.getBackupList(),t=e[0],n=await Ci.getStats();return{totalBackups:e.length,lastBackup:t?{id:t.id,timestamp:t.timestamp,type:t.type,size:t.size}:null,autoBackupEnabled:!!this.autoBackupInterval,nextAutoBackup:this.getNextBackupTime(),storageHealth:n,encryptionEnabled:this.encryptionEnabled}}catch(e){return Ti.error("Failed to get system health",{error:e.message}),{error:e.message}}}getNextBackupTime(){const e=Date.now(),t=this.lastAutoBackupTime||e;return new Date(t+this.autoBackupInterval).toISOString()}destroy(){this.incrementalTimeout&&clearTimeout(this.incrementalTimeout),Ti.info("Backup and Recovery System destroyed")}};function Di(t){let{onLogout:n}=t;const{notifications:r,addNotification:a}=P(),{leads:s,loading:i,refreshLeads:l,addLead:c,updateLead:u,deleteLead:d}=function(t){const[n,r]=(0,e.useState)([]),[a,s]=(0,e.useState)(!0),i=(0,e.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||s(!0);const n=await A.fetchLeads();if(n.success){const a=(n.data||n.leads||[]).map(e=>o(o({},e),{},{customerName:e.customerName||"".concat(e.firstName||""," ").concat(e.lastName||"").trim()||"Unknown"})).sort((e,t)=>new Date(t.createdDate||0)-new Date(e.createdDate||0));r(a),t(e?"Leads refreshed. Found ".concat(a.length," leads."):"Leads loaded. Found ".concat(a.length," leads."),"success")}else t("Error fetching leads: ".concat(n.message),"error");e||s(!1)},[t]);(0,e.useEffect)(()=>{i()},[i]);const l=(0,e.useCallback)(async e=>{const n=await A.addLead(e);return n.success&&n.lead?(r(e=>[n.lead,...e].sort((e,t)=>new Date(t.createdDate||0)-new Date(e.createdDate||0))),t("Lead added: ".concat(n.lead.customerName),"success")):t("Error adding lead: ".concat(n.message),"error"),n},[t]),c=(0,e.useCallback)(async e=>{const n=await A.updateLead(e);return n.success&&n.lead?(r(e=>e.map(e=>e.id===n.lead.id?n.lead:e)),t("Lead updated: ".concat(n.lead.customerName),"info")):t("Error updating lead: ".concat(n.message),"error"),n},[t]),u=(0,e.useCallback)(async e=>{const a=n.find(t=>t.id===e);if(a&&window.confirm("Are you sure you want to delete ".concat(a.customerName,"?"))){const n=await A.deleteLead(e);n.success?(r(t=>t.filter(t=>t.id!==e)),t("Lead deleted: ".concat(a.customerName),"warning")):t("Error deleting lead: ".concat(n.message),"error")}},[n,t]);return{leads:n,loading:a,refreshLeads:()=>i(!0),addLead:l,updateLead:c,deleteLead:u}}(a),{jobCounts:h,loading:f,refreshJobCounts:m,addJobCount:p,updateJobCount:T,deleteJobCount:R}=function(t){const[n,r]=(0,e.useState)([]),[a,s]=(0,e.useState)(!0),i=(0,e.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||s(!0);try{const n=await A.fetchJobCounts();if(n.success){const a=(n.data||n.jobCounts||[]).map((e,t)=>o(o({},e),{},{id:e.id||"jobcount_".concat(Date.now(),"_").concat(t),fullName:e.customerName||"".concat(e.firstName||""," ").concat(e.lastName||"").trim()||"Unknown Customer"})).sort((e,t)=>new Date(t.date||0)-new Date(e.date||0));r(a);const s=e?"Job counts refreshed. Found ".concat(a.length," records."):"Job counts loaded. Found ".concat(a.length," records.");t(s,"success")}else t("Error fetching job counts: ".concat(n.message),"error")}catch(n){t("Error loading job counts: ".concat(n.message),"error")}finally{e||s(!1)}},[t]);(0,e.useEffect)(()=>{i()},[i]);const l=(0,e.useCallback)(async e=>{try{const n=await A.addJobCount(e);if(n.success&&n.jobCount){const e=o(o({},n.jobCount),{},{id:n.jobCount.id||"jobcount_".concat(Date.now()),fullName:n.jobCount.customerName||"".concat(n.jobCount.firstName||""," ").concat(n.jobCount.lastName||"").trim()||"Unknown Customer"});r(t=>[e,...t].sort((e,t)=>new Date(t.date||0)-new Date(e.date||0))),t("Job count added: ".concat(e.fullName),"success")}else t("Error adding job count: ".concat(n.message),"error");return n}catch(n){return t("Error adding job count: ".concat(n.message),"error"),{success:!1,message:n.message}}},[t]),c=(0,e.useCallback)(async e=>{try{const n=await A.updateJobCount(e);if(n.success&&n.jobCount){const a=o(o({},n.jobCount),{},{id:n.jobCount.id||e.id,fullName:n.jobCount.customerName||"".concat(n.jobCount.firstName||""," ").concat(n.jobCount.lastName||"").trim()||"Unknown Customer"});r(e=>e.map(e=>e.id===a.id?a:e)),t("Job count updated: ".concat(a.fullName),"info")}else t("Error updating job count: ".concat(n.message),"error");return n}catch(n){return t("Error updating job count: ".concat(n.message),"error"),{success:!1,message:n.message}}},[t]),u=(0,e.useCallback)(async e=>{const a=n.find(t=>t.id===e);if(!a)return void t("Job count not found","error");const s="Are you sure you want to delete the job count for ".concat(a.fullName,"?");if(window.confirm(s))try{const n=await A.deleteJobCount(e);n.success?(r(t=>t.filter(t=>t.id!==e)),t("Job count deleted: ".concat(a.fullName),"info")):t("Error deleting job count: ".concat(n.message),"error")}catch(i){t("Error deleting job count: ".concat(i.message),"error")}},[n,t]);return{jobCounts:n,loading:a,refreshJobCounts:()=>i(!0),addJobCount:l,updateJobCount:c,deleteJobCount:u}}(a),[O,D]=(0,e.useState)("dashboard"),[L,M]=(0,e.useState)("healthy"),[F,z]=(0,e.useState)(!1);(0,e.useEffect)(()=>{(async()=>{try{const e=sessionStorage.getItem("userId")||"user_"+Date.now();sessionStorage.setItem("userId",e);const t=Ri.generateSessionToken(e);sessionStorage.setItem("sessionToken",t),Ti.business("Application Startup",{userId:e,timestamp:(new Date).toISOString(),version:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTH_CODE:"IAMBRANDON",REACT_APP_FIREBASE_API_KEY:"AIzaSyCa63Fy9PF-NV8C_z_5Qp7VWse5nRxRRJ8",REACT_APP_FIREBASE_APP_ID:"1:874590395925:web:41fff249ed9a7b349af81c",REACT_APP_FIREBASE_AUTH_DOMAIN:"crmbackend-470221.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-4BG7SZMK6K",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"874590395925",REACT_APP_FIREBASE_PROJECT_ID:"crmbackend-470221",REACT_APP_FIREBASE_STORAGE_BUCKET:"crmbackend-470221.firebasestorage.app",REACT_APP_GAS_WEB_APP_URL:"https://script.google.com/macros/s/AKfycbweOri4v6JDVEsMnU2KbxiQ2_MicbaltR49-cqYwwT2J8YE1dbLhd_Klc5AuUThJjpNZA/exec",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyA-IhqTEAOQMTU9DlEeUwt1_oM5yq3-sb4",REACT_APP_SHEET_NAME:"Bhotchleads",REACT_APP_SPREADSHEET_ID:"1E9VX7XI7GNGJa8Hq9__XAWv95WNgfJto1gUEXMbGqi0",REACT_APP_TWILIO_ACCOUNT_SID:"AC20e24f43ac063d43511d06c688b5ec06",REACT_APP_TWILIO_AUTH_TOKEN:"65cc837132a39a100d4b03a8a234f2ed",REACT_APP_TWILIO_PHONE_NUMBER:"+13852357204"}.REACT_APP_VERSION||"1.0.0"}),Pi.recordMetric("app.startup",1,{component:"CrmApplication",version:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTH_CODE:"IAMBRANDON",REACT_APP_FIREBASE_API_KEY:"AIzaSyCa63Fy9PF-NV8C_z_5Qp7VWse5nRxRRJ8",REACT_APP_FIREBASE_APP_ID:"1:874590395925:web:41fff249ed9a7b349af81c",REACT_APP_FIREBASE_AUTH_DOMAIN:"crmbackend-470221.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-4BG7SZMK6K",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"874590395925",REACT_APP_FIREBASE_PROJECT_ID:"crmbackend-470221",REACT_APP_FIREBASE_STORAGE_BUCKET:"crmbackend-470221.firebasestorage.app",REACT_APP_GAS_WEB_APP_URL:"https://script.google.com/macros/s/AKfycbweOri4v6JDVEsMnU2KbxiQ2_MicbaltR49-cqYwwT2J8YE1dbLhd_Klc5AuUThJjpNZA/exec",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyA-IhqTEAOQMTU9DlEeUwt1_oM5yq3-sb4",REACT_APP_SHEET_NAME:"Bhotchleads",REACT_APP_SPREADSHEET_ID:"1E9VX7XI7GNGJa8Hq9__XAWv95WNgfJto1gUEXMbGqi0",REACT_APP_TWILIO_ACCOUNT_SID:"AC20e24f43ac063d43511d06c688b5ec06",REACT_APP_TWILIO_AUTH_TOKEN:"65cc837132a39a100d4b03a8a234f2ed",REACT_APP_TWILIO_PHONE_NUMBER:"+13852357204"}.REACT_APP_VERSION||"1.0.0"}),await Ai.success("Ultimate CRM System Initialized",{category:"system",metadata:{features:["Advanced Caching","Monitoring","Security","Backup Recovery"],version:"1.0.0"}});const n=await Pi.getSystemReport();M(n.systemHealth||"healthy")}catch(e){Ti.error("Failed to initialize enterprise systems",{error:e.message}),a("System initialization warning: Some enterprise features may be limited","error")}})();const e=e=>{e.preventDefault(),z(!0),window.deferredPrompt=e};return window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}},[a]);const[U,B]=(0,e.useState)(null),[q,H]=(0,e.useState)(!1),[V,K]=(0,e.useState)(null),[W,J]=(0,e.useState)(""),[Q,G]=(0,e.useState)(null),[$,Y]=(0,e.useState)(!1),[X,Z]=(0,e.useState)(null),ee=(0,e.useMemo)(()=>({totalLeads:s.length,hotLeads:s.filter(e=>"Hot"===e.quality).length,quotedLeads:s.filter(e=>"Quoted"===e.disposition).length,totalQuoteValue:s.reduce((e,t)=>e+(parseFloat(String(t.dabellaQuote).replace(/[$,]/g,""))||0),0),totalJobCounts:h.length,totalSqFt:h.reduce((e,t)=>e+(parseFloat(t.sqFt)||0),0)}),[s,h]),te=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";D(e),"map"===e&&t&&J(t),K(null),Z(null)};return i||f?(0,Ha.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,Ha.jsx)(g,{className:"animate-spin h-12 w-12 text-blue-600"})}):(0,Ha.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Ha.jsx)("header",{className:"bg-white shadow-sm border-b sticky top-0 z-30",children:(0,Ha.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Ha.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,Ha.jsxs)("div",{className:"flex items-center",children:[(0,Ha.jsx)(y,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,Ha.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Bhotch CRM"})]}),(0,Ha.jsxs)("nav",{className:"flex space-x-1 sm:space-x-2",children:[(0,Ha.jsxs)("button",{onClick:()=>D("dashboard"),className:"px-3 py-2 rounded-md text-sm font-medium flex items-center transition-colors ".concat("dashboard"===O?"bg-blue-100 text-blue-700":"text-gray-500 hover:bg-gray-100"),children:[(0,Ha.jsx)(v,{className:"w-4 h-4 mr-1"}),(0,Ha.jsx)("span",{className:"hidden sm:inline",children:"Dashboard"})]}),(0,Ha.jsxs)("button",{onClick:()=>D("leads"),className:"px-3 py-2 rounded-md text-sm font-medium flex items-center transition-colors ".concat("leads"===O?"bg-blue-100 text-blue-700":"text-gray-500 hover:bg-gray-100"),children:[(0,Ha.jsx)(b,{className:"w-4 h-4 mr-1"}),(0,Ha.jsx)("span",{className:"hidden sm:inline",children:"Leads"})]}),(0,Ha.jsxs)("button",{onClick:()=>D("jobcount"),className:"px-3 py-2 rounded-md text-sm font-medium flex items-center transition-colors ".concat("jobcount"===O?"bg-blue-100 text-blue-700":"text-gray-500 hover:bg-gray-100"),children:[(0,Ha.jsx)(x,{className:"w-4 h-4 mr-1"}),(0,Ha.jsx)("span",{className:"hidden sm:inline",children:"Job Count"})]}),(0,Ha.jsxs)("button",{onClick:()=>D("analytics"),className:"px-3 py-2 rounded-md text-sm font-medium flex items-center transition-colors ".concat("analytics"===O?"bg-blue-100 text-blue-700":"text-gray-500 hover:bg-gray-100"),children:[(0,Ha.jsx)(w,{className:"w-4 h-4 mr-1"}),(0,Ha.jsx)("span",{className:"hidden sm:inline",children:"Analytics"})]}),(0,Ha.jsxs)("button",{onClick:()=>D("monitoring"),className:"px-3 py-2 rounded-md text-sm font-medium flex items-center transition-colors ".concat("monitoring"===O?"bg-blue-100 text-blue-700":"text-gray-500 hover:bg-gray-100"),children:[(0,Ha.jsx)(k,{className:"w-4 h-4 mr-1"}),(0,Ha.jsx)("span",{className:"hidden sm:inline",children:"System"})]}),(0,Ha.jsxs)("button",{onClick:()=>D("map"),className:"px-3 py-2 rounded-md text-sm font-medium flex items-center transition-colors ".concat("map"===O?"bg-blue-100 text-blue-700":"text-gray-500 hover:bg-gray-100"),children:[(0,Ha.jsx)(_,{className:"w-4 h-4 mr-1"}),(0,Ha.jsx)("span",{className:"hidden sm:inline",children:"Map"})]}),(0,Ha.jsxs)("button",{onClick:()=>D("calendar"),className:"px-3 py-2 rounded-md text-sm font-medium flex items-center transition-colors ".concat("calendar"===O?"bg-blue-100 text-blue-700":"text-gray-500 hover:bg-gray-100"),children:[(0,Ha.jsx)(N,{className:"w-4 h-4 mr-1"}),(0,Ha.jsx)("span",{className:"hidden sm:inline",children:"Calendar"})]}),(0,Ha.jsxs)("div",{className:"px-2 py-2 rounded-md flex items-center ".concat("healthy"===L?"bg-green-100 text-green-700":"degraded"===L?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:[(0,Ha.jsx)("div",{className:"w-2 h-2 rounded-full mr-1 ".concat("healthy"===L?"bg-green-500":"degraded"===L?"bg-yellow-500":"bg-red-500")}),(0,Ha.jsx)("span",{className:"text-xs hidden sm:inline",children:"healthy"===L?"Optimal":"degraded"===L?"Degraded":"Critical"})]}),F&&(0,Ha.jsxs)("button",{onClick:async()=>{if(window.deferredPrompt){window.deferredPrompt.prompt();const{outcome:e}=await window.deferredPrompt.userChoice;"accepted"===e&&(Ti.user("PWA Installation Accepted"),a("App installed successfully!","success")),window.deferredPrompt=null,z(!1)}},className:"px-3 py-2 bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 transition-colors flex items-center",children:[(0,Ha.jsx)(S,{className:"w-4 h-4 mr-1"}),(0,Ha.jsx)("span",{className:"hidden sm:inline",children:"Install"})]}),(0,Ha.jsx)("button",{onClick:n,className:"p-2 bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors",children:(0,Ha.jsx)(E,{className:"w-5 h-5"})})]})]})})}),(0,Ha.jsx)("div",{className:"fixed top-20 right-5 w-80 z-50",children:r.map(e=>(0,Ha.jsxs)("div",{className:"p-3 rounded-md mb-2 shadow-lg animate-fade-in-right flex items-start ".concat("success"===e.type?"bg-green-100 text-green-800":"error"===e.type?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:["success"===e.type&&(0,Ha.jsx)(j,{className:"w-5 h-5 mr-2 mt-0.5 shrink-0"}),"error"===e.type&&(0,Ha.jsx)(C,{className:"w-5 h-5 mr-2 mt-0.5 shrink-0"}),"info"===e.type&&(0,Ha.jsx)(I,{className:"w-5 h-5 mr-2 mt-0.5 shrink-0"}),(0,Ha.jsx)("span",{className:"text-sm",children:e.message})]},e.id))}),(0,Ha.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:["dashboard"===O&&(0,Ha.jsxs)(Ha.Fragment,{children:[(0,Ha.jsx)($s,{}),(0,Ha.jsx)(Ga,{stats:ee,leads:s})]}),"leads"===O&&(0,Ha.jsx)(ns,{leads:s,onAddLead:()=>H(!0),onEditLead:B,onDeleteLead:d,onRefreshLeads:l,onSelectLead:K}),"jobcount"===O&&(0,Ha.jsx)(rs,{jobCounts:h,onAddJobCount:()=>Y(!0),onEditJobCount:G,onDeleteJobCount:R,onRefreshJobCounts:m,onSelectJobCount:Z}),"analytics"===O&&(0,Ha.jsx)(hi,{leads:s,jobCounts:h,onNavigateToTab:te}),"monitoring"===O&&(0,Ha.jsx)(ui,{}),"map"===O&&(0,Ha.jsx)(ds,{leads:s,onLeadClick:K,searchAddress:W,onSearchComplete:()=>J("")}),"calendar"===O&&(0,Ha.jsx)(_s,{})]}),q&&(0,Ha.jsx)(Ps,{onSubmit:async e=>{await c(e),H(!1)},onCancel:()=>H(!1)}),U&&(0,Ha.jsx)(Ps,{initialData:U,onSubmit:async e=>{await u(e),B(null)},onCancel:()=>B(null),isEdit:!0}),V&&(0,Ha.jsx)(Fs,{lead:V,onClose:()=>K(null),onEdit:()=>{B(V),K(null)},onDelete:()=>{d(V.id),K(null)},onNavigateToTab:te}),$&&(0,Ha.jsx)(Qs,{onSubmit:async e=>{await p(e),Y(!1)},onCancel:()=>Y(!1)}),Q&&(0,Ha.jsx)(Qs,{initialData:Q,onSubmit:async e=>{await T(e),G(null)},onCancel:()=>G(null),isEdit:!0}),X&&(0,Ha.jsx)(Gs,{jobCount:X,onClose:()=>Z(null),onEdit:()=>{G(X),Z(null)},onDelete:()=>{R(X.id),Z(null)},onJobCountUpdate:e=>{Z(e),m()}})]})}function Li(){const[t,n]=(0,e.useState)(!!sessionStorage.getItem("isAuthenticated"));(0,e.useEffect)(()=>("serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(()=>Ti.info("Service Worker registered successfully")).catch(e=>Ti.error("Service Worker registration failed",{error:e.message})),Pi.recordMetric("app.load",1,{version:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTH_CODE:"IAMBRANDON",REACT_APP_FIREBASE_API_KEY:"AIzaSyCa63Fy9PF-NV8C_z_5Qp7VWse5nRxRRJ8",REACT_APP_FIREBASE_APP_ID:"1:874590395925:web:41fff249ed9a7b349af81c",REACT_APP_FIREBASE_AUTH_DOMAIN:"crmbackend-470221.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-4BG7SZMK6K",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"874590395925",REACT_APP_FIREBASE_PROJECT_ID:"crmbackend-470221",REACT_APP_FIREBASE_STORAGE_BUCKET:"crmbackend-470221.firebasestorage.app",REACT_APP_GAS_WEB_APP_URL:"https://script.google.com/macros/s/AKfycbweOri4v6JDVEsMnU2KbxiQ2_MicbaltR49-cqYwwT2J8YE1dbLhd_Klc5AuUThJjpNZA/exec",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyA-IhqTEAOQMTU9DlEeUwt1_oM5yq3-sb4",REACT_APP_SHEET_NAME:"Bhotchleads",REACT_APP_SPREADSHEET_ID:"1E9VX7XI7GNGJa8Hq9__XAWv95WNgfJto1gUEXMbGqi0",REACT_APP_TWILIO_ACCOUNT_SID:"AC20e24f43ac063d43511d06c688b5ec06",REACT_APP_TWILIO_AUTH_TOKEN:"65cc837132a39a100d4b03a8a234f2ed",REACT_APP_TWILIO_PHONE_NUMBER:"+13852357204"}.REACT_APP_VERSION||"1.0.0",environment:"production"}),Ti.business("Ultimate CRM System Loaded",{version:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTH_CODE:"IAMBRANDON",REACT_APP_FIREBASE_API_KEY:"AIzaSyCa63Fy9PF-NV8C_z_5Qp7VWse5nRxRRJ8",REACT_APP_FIREBASE_APP_ID:"1:874590395925:web:41fff249ed9a7b349af81c",REACT_APP_FIREBASE_AUTH_DOMAIN:"crmbackend-470221.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-4BG7SZMK6K",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"874590395925",REACT_APP_FIREBASE_PROJECT_ID:"crmbackend-470221",REACT_APP_FIREBASE_STORAGE_BUCKET:"crmbackend-470221.firebasestorage.app",REACT_APP_GAS_WEB_APP_URL:"https://script.google.com/macros/s/AKfycbweOri4v6JDVEsMnU2KbxiQ2_MicbaltR49-cqYwwT2J8YE1dbLhd_Klc5AuUThJjpNZA/exec",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyA-IhqTEAOQMTU9DlEeUwt1_oM5yq3-sb4",REACT_APP_SHEET_NAME:"Bhotchleads",REACT_APP_SPREADSHEET_ID:"1E9VX7XI7GNGJa8Hq9__XAWv95WNgfJto1gUEXMbGqi0",REACT_APP_TWILIO_ACCOUNT_SID:"AC20e24f43ac063d43511d06c688b5ec06",REACT_APP_TWILIO_AUTH_TOKEN:"65cc837132a39a100d4b03a8a234f2ed",REACT_APP_TWILIO_PHONE_NUMBER:"+13852357204"}.REACT_APP_VERSION||"1.0.0",timestamp:(new Date).toISOString(),features:["Enterprise Security","Advanced Caching","Real-time Monitoring","Backup & Recovery","PWA Support","Automated Deployment"]}),()=>{try{Oi.destroy(),Pi.destroy(),Ti.destroy()}catch(e){console.warn("Cleanup error:",e)}}),[]);const r=["AIzaSyCa63Fy9PF-NV8C_z_5Qp7VWse5nRxRRJ8","https://script.google.com/macros/s/AKfycbweOri4v6JDVEsMnU2KbxiQ2_MicbaltR49-cqYwwT2J8YE1dbLhd_Klc5AuUThJjpNZA/exec","AIzaSyA-IhqTEAOQMTU9DlEeUwt1_oM5yq3-sb4"].some(e=>!e)?"One or more critical environment variables (Firebase, GAS URL, Maps API) are not set.":null;return r?(0,Ha.jsx)(Ys,{error:r}):t?(0,Ha.jsx)(ii,{children:(0,Ha.jsx)(Di,{onLogout:()=>{Ti.user("User Logout",{timestamp:(new Date).toISOString()}),sessionStorage.removeItem("isAuthenticated"),sessionStorage.removeItem("sessionToken"),n(!1)}})}):(0,Ha.jsx)(ii,{children:(0,Ha.jsx)(Va,{onLogin:()=>n(!0)})})}t.createRoot(document.getElementById("root")).render((0,Ha.jsx)(e.StrictMode,{children:(0,Ha.jsx)(Li,{})}))})()})();
//# sourceMappingURL=main.de3f351c.js.map